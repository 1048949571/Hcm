(window.webpackJsonp=window.webpackJsonp||[]).push([[58,101],{1157:function(e,t){},1158:function(e,t){},1164:function(e,t){},1165:function(e,t){},1166:function(e,t){},1167:function(e,t){},1168:function(e,t){},1175:function(e,t){},25:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=l(n(54));n(53);var r=l(n(28));function l(e){return e&&e.__esModule?e:{default:e}}n(1157);var i=function(t){return e.createElement("div",{className:"layout-wrapper "+(t.className||"")},e.createElement("div",{className:"header-wrapper"},e.createElement(a.default,{className:"breadcrumb"},t.breadcrumbList.map(function(n,r){return""===t.linkList[r]?e.createElement(a.default.Item,{key:n},n):e.createElement(a.default.Item,{href:"javascript:;",key:n},e.createElement("span",{onClick:function(){t.history.go(-t.linkList[r])}},n))}))),e.createElement("div",{className:"layout-content"},t.children),e.createElement("div",{className:"copyright"},e.createElement(r.default,null)))};i.defaultProps={title:"标题",breadcrumbList:[],linkList:[]},t.default=i}).call(this,n(1))},28:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var a=function(t){function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e.Component),n(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return e.createElement("div",{className:this.props.clazzName?this.props.clazzName:"Copyright"},"Copyright © 杭州久点网络技术有限公司")}}]),a}();t.default=a}).call(this,n(1))},433:function(e,t){},571:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=v(n(14)),r=v(n(11)),l=v(n(236)),i=v(n(201)),c=v(n(73)),o=v(n(33)),u=v(n(32)),s=v(n(27)),d=v(n(48)),p=v(n(30)),f=v(n(54)),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(18),n(22),n(235),n(200),n(72),n(41),n(42),n(26),n(47),n(31),n(53);var h=v(n(17)),g=v(n(25)),y=(v(n(28)),v(n(10)));function v(e){return e&&e.__esModule?e:{default:e}}f.default.Item;var b=p.default.Option,_=d.default.RangePicker,E=s.default.TextArea,w=(0,h.default)(function(t){var n=t.props.shopList,a=t.state,r=a.shop_id,l=a.campaign_name,i=a.start_time,d=a.end_time,f=a.campaign_desc;return e.createElement(c.default,{className:"shop-wrapper"},"SHOP"===localStorage.getItem("logintype")?null:e.createElement(o.default,{className:"row"},e.createElement(u.default,{span:24},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"申请店铺：",e.createElement(p.default,{value:r,placeholder:"请选择",style:{width:"440px"},getPopupContainer:function(e){return e.parentNode},onChange:t.handleSwitchShopChange},e.createElement(b,{value:"",disabled:!0},"请选择"),n.map(function(t){return e.createElement(b,{value:t.id,key:t.id},t.shop_name,"（",t.platform_name,"）")}))))),e.createElement(o.default,{className:"row"},e.createElement(u.default,{span:24},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"活动主题：",e.createElement(s.default,{placeholder:"请输入",value:l,style:{width:"440px"},onChange:function(e){return t.handleInputChange({flag:!0,key:"campaign_name",event:e})}})))),e.createElement(o.default,{className:"row"},e.createElement(u.default,{span:24,id:"timeSelect"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"活动时间：",e.createElement(_,{defaultValue:[(0,y.default)(),(0,y.default)()],getCalendarContainer:function(e){return document.getElementById("timeSelect")},disabledDate:function(e){return e&&e<(0,y.default)().subtract(1,"d").endOf("day")},showTime:{minuteStep:30,secondStep:60},value:[(0,y.default)(i),(0,y.default)(d)],format:"YYYY-MM-DD HH:mm",placeholder:["请选择","请选择"],style:{width:"440px"},onChange:t.handleSwitchDateChange})))),e.createElement(o.default,{className:"row",style:{marginLeft:"10px"}},e.createElement(u.default,{span:24},e.createElement("label",null,"活动说明：",e.createElement(E,{autosize:{minRows:2,maxRows:6},placeholder:"请输入",value:f,style:{width:"440px"},onChange:function(e){t.handleInputChange({flag:!0,key:"campaign_desc",event:e})}})))))}),P=(0,h.default)(function(t){var n=t.props,d=n.productList,p=(n.shopList,t.state.shop_id);console.log(p);var f=t.state.addActivityProductList,h=0!==d.length?d.map(function(e){var t={productName:e.productClassifyName};return e.children||(t.disabled=!0),Object.assign({},e,m({},t))}):[],y={width:"300px"};return e.createElement(g.default,{breadcrumbList:["活动信息","活动申报"],linkList:["",""]},e.createElement("div",{className:"activity-declaration-wrapper"},e.createElement("section",{className:"content"},e.createElement(w,{that:t}),0!==f.length?f.map(function(n,a){return r=n,d=a,e.createElement(c.default,{className:"product-wrapper",key:d},e.createElement("div",{className:"top",id:"proSelect"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"产品信息：",e.createElement(i.default,{disabled:"SHOP"!=localStorage.getItem("logintype")&&!p,options:h,getPopupContainer:function(e){return document.getElementById("proSelect")},fieldNames:{label:"productName",value:"id"},placeholder:"请选择/请选择",style:{minWidth:"300px"},value:r.product_id||[],onChange:function(e,n){t.handleSwitchProductChange(d,e,n)},showSearch:!0})),e.createElement("span",{onClick:function(){t.handleDeleteProduct(d)}},"删除")),0!==Object.keys(r.prices_map).length?e.createElement("div",{className:"middle"},e.createElement(o.default,{className:"row"},Object.entries(r.prices_map).map(function(t){return e.createElement(u.default,{key:t[0],span:8},t[0]+"："+t[1])}))):""===r.prices_map?null:e.createElement("div",{style:{marginTop:"20px"}},"暂无参考价格"),e.createElement("div",{className:"bottom"},e.createElement(o.default,{className:"row"},e.createElement(u.default,{span:8,className:"col"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"商品链接",e.createElement("br",null),e.createElement(s.default,{placeholder:"请输入",value:r.product_url||"",style:y,onChange:function(e){return t.handleInputChange({key:"product_url",index:d,event:e})}}))),e.createElement(u.default,{span:8,className:"col"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"申请标价",e.createElement("br",null),e.createElement(l.default,{min:0,maxLength:12,placeholder:"请输入",style:y,value:r.apply_price||"",onChange:function(e){t.handleInputChange({key:"apply_price",event:e,index:d})}}))),e.createElement(u.default,{span:8,className:"col"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"实际成交价",e.createElement("br",null),e.createElement(l.default,{min:0,maxLength:12,placeholder:"请输入",style:y,value:r.actual_price||"",onChange:function(e){t.handleInputChange({key:"actual_price",event:e,index:d})}})))),e.createElement(o.default,{className:"row"},e.createElement(u.default,{span:8,className:"col"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"活动类型",e.createElement("br",null),e.createElement(s.default,{placeholder:"请输入",style:y,value:r.campaign_type||"",onChange:function(e){t.handleInputChange({key:"campaign_type",event:e,index:d})}}))),e.createElement(u.default,{span:8,className:"col"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"赠品情况",e.createElement("br",null),e.createElement(s.default,{placeholder:"请输入",style:y,value:r.gift_situation||"",onChange:function(e){t.handleInputChange({key:"gift_situation",event:e,index:d})}}))),e.createElement(u.default,{span:8,className:"col"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"玩法说明",e.createElement("br",null),e.createElement(s.default,{placeholder:"请输入",style:y,value:r.play_content||"",onChange:function(e){t.handleInputChange({key:"play_content",event:e,index:d})}}))))));var r,d}):null,e.createElement("div",{className:"addNew",onClick:function(){t.handleAddClick(f.length)}},e.createElement(r.default,{type:"plus"})," ",e.createElement("span",null,"新增")),e.createElement("div",{className:"submit-wrapper"},e.createElement(a.default,{type:"primary",className:"submit btn2-main",onClick:t.handleSubmit},"提交"),e.createElement(a.default,{className:"btn2-sub noneFloat",onClick:t.handleClearForm},"取消")))))});t.default=P}).call(this,n(1))},62:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={onVisibilityChange:function(e,t){var n="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,a=n.replace(/hidden/i,"visibilitychange"),r=function(){document[n]||console.log("页面非激活"+new Date),document[n]&&console.log("页面激活"+new Date)};document.addEventListener(a,r)},formatAccount:function(e){return e=e.replace(/[\s]/g,"").replace(/(\d{4})(?=\d)/g,"$1 ")},formatThousandMoney:function(t,n){return isNaN(t)?"":(n=n||"",!1===e.isNumeric(t)||0==t?"0.00":0==(t=(t=+t).toFixed(2))?"0.00":n+" "+(t+"").replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,"))},encryption:function(){return(""+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")).replace(/(\d{3})\d*([0-9a-zA-Z]{4})/,"$1****$2")},browser:{versions:function(){var e=navigator.userAgent,t=(navigator.appVersion,"");if(e.indexOf("Ourydc.Yuebaobao")>-1){var n=e.match(/Ourydc.Yuebaobao.*/);if(n.length>0){var a=n[0];t=a.substr(a.indexOf("/")+1)}}return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,weibo:"WeiBo"==e.match(/WeiBo/i)||"Weibo"==e.match(/Weibo/i)||"weibo"==e.match(/weibo/i),qq:"qq"==e.match(/qq/i)||"QQ"==e.match(/QQ/i),qqBrower:-1==e.indexOf("Mobile MQQBrowser")&&-1!=e.indexOf("MQQBrowser"),isInApp:e.indexOf("Ourydc.Yuebaobao")>-1,locAppVersion:t}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},checkAccount:function(e){return/^[a-zA-Z](\w|\s+){5,15}$/.test(this.trim(e||""))},checkUrl:function(e){return/^((ht|f)tps?):\/\/([\w\-]+(\.[\w\-]+)*\/)*[\w\-]+(\.[\w\-]+)*\/?(\?([\w\-\.,@?^=%&:\/~\+#]*)+)?/.test(this.trim(e||""))},Reg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^[^\u4e00-\u9fa5]{5,31}$/.test(this.trim(e||""))},checkPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^.{6,16}$/.test(this.trim(e||""))},trim:function(e){return(e=""+e).replace(/(^\s*)|(\s*$)/g,"")},getCookie:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null},required:function(e){var t=this.trim(e||"");return!(!t||!t.length)},legnthCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INPUT";return this.trim(e||"").length<this.LENGTH[t]},LENGTH:{URL:500,TEXTAREA:200,INPUT:50},getQueryString:function(e){var t=new RegExp("(^|&|[?])"+e+"=([^&]*)(&|$)"),n=window.location.href.substr(1).match(t);return null!=n?n[2]:""},getParamString:function(e,t){var n=new RegExp("(^|&|[?])"+t+"=([^&]*)(&|$)"),a=e.substr(1).match(n);return null!=a?a[2]:""},Trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},deviceCheck:function(){return browser.versions.mobile?browser.versions.android?"android":browser.versions.ios?"ios":"mobile":"web"}}}).call(this,n(112))},768:function(e,t){},887:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a,r=f(n(15)),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(16);var o=n(123),u=n(398),s=f(n(571)),d=f(n(12)),p=f(n(62));function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var h=(0,o.connect)(function(e){return{shopList:e.dealer.shopList,productList:e.dealer.productList}})(a=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.checkInputLength=function(e){var t={product_url:{label:"商品链接",type:"URL"},campaign_type:{label:"活动类型",type:"INPUT"},gift_situation:{label:"赠品情况",type:"TEXTAREA"},play_content:{label:"玩法说明",type:"TEXTAREA"}};if(e.length){var n=e.map(function(e,n){return Object.keys(e).map(function(a){if(t[a]&&!p.default.legnthCheck(e[a],t[a].type))return"请把"+(n+1)+"号产品的"+t[a].label+"限制在"+p.default.LENGTH[t[a].type]+"字符内！"})}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return void 0!==e});return!n.length||(n.forEach(function(e){return r.default.warning(e)}),!1)}return r.default.warning("请至少添加一个活动产品！"),!1},t.handleSubmit=function(e){var n=t.state,a=n.shop_id,l=n.campaign_name,i=n.start_time,c=n.end_time,o=n.campaign_desc,u=n.addActivityProductList;if("SHOP"===localStorage.getItem("logintype")||""!==a)if(""!==l)if(i!==c)if(t.checkInputValue(u))if(p.default.legnthCheck(l,"INPUT"))if(!o||p.default.legnthCheck(o,"TEXTAREA")){if(t.checkInputLength(u)){var s=t.props.shopList.length?t.props.shopList.filter(function(e){return e.id===a})[0].shop_name:"",f={campaign_name:l,start_time:i,end_time:c,campaign_desc:o,cplist:u.slice().map(function(e){var t=e.product_id[1];return Object.assign({},e,{product_id:t})})};"SHOP"!==localStorage.getItem("logintype")&&(f.shop_id=a,f.shop_name=s),LoadingModal({bl:!0}),(0,d.default)({method:"post",url:"/hcm/campgign/Apply",transformRequest:[function(e,t){return e}],headers:{"Content-Type":"application/json;charset=utf-8"},data:JSON.stringify(f)}).then(function(e){LoadingModal({bl:!1});var n=e.data,a=(n.data,n.status),l=n.message;"10000"===a?(r.default.success(l),t.handleClearForm()):r.default.error(l)}).catch(function(e){LoadingModal({bl:!1}),r.default.error("网络繁忙，请稍后再试！")})}}else r.default.warning("请把活动说明限制在"+p.default.LENGTH.TEXTAREA+"字符内！");else r.default.warning("请把活动主题限制在"+p.default.LENGTH.INPUT+"字符内！");else r.default.warning("请完善活动产品信息！");else r.default.warning("请选择活动时间！");else r.default.warning("请输入活动主题！");else r.default.warning("请选择店铺！")},t.handleSelectBeforeChange=function(e,n){var a=t.state.addActivityProductList.slice();t.setState({addActivityProductList:a})},t.handleClearForm=function(){t.setState({shop_id:"",campaign_name:"",start_time:Date.now(),end_time:Date.now(),campaign_desc:"",addActivityProductList:[{product_id:"",product_url:"",apply_price:"",actual_price:"",campaign_type:"",gift_situation:"",play_content:"",prices_map:""}]})},t.handleDeleteProduct=function(e){console.log(e);var n=t.state.addActivityProductList,a=[].concat(m(n));a.splice(e,1),t.setState({addActivityProductList:a})},t.handleSwitchDateChange=function(e){console.log(e),t.setState({start_time:0===e.length?Date.now():e[0].valueOf(),end_time:0===e.length?Date.now():e[1].valueOf()})},t.handleSwitchShopChange=function(e){console.log(e),(0,t.props.dispatch)((0,u.getProductList)(e)),t.setState({shop_id:e})},t.handleSwitchProductChange=function(e,n,a){var r=t.state.addActivityProductList.slice();r[e].product_id=n,t.setState({addActivityProductList:r}),2===n.length&&t.getProductPrices(n[1],e)},t.handleInputChange=function(e){var n=e.flag,a=e.key,r=e.event,c=e.index,o=void 0===c?0:c;if(n)t.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},a,r.target.value));else{var u=[].concat(m(t.state.addActivityProductList)),s=i({},u[o]);s[a]="object"===(void 0===r?"undefined":l(r))?r.target.value:r,u[o]=s,t.setState({addActivityProductList:u})}},t.getProductPrices=function(e,n){(0,d.default)({method:"post",url:"/hcm/campgign/productPrice",data:{product_id:e}}).then(function(e){var a=e.data,r=a.data,l=a.status,i=(a.message,t.state.addActivityProductList.slice());i[n].prices_map=r,"10000"===l&&t.setState({addActivityProductList:i})}).catch()},t.checkInputValue=function(e){return e.map(function(e){return Object.keys(e).every(function(t){return""!==e[t]&&!!e.apply_price&&!!e.actual_price})}).every(function(e){return!0===e})},t.handleAddClick=function(e){var n=t.state,a=n.addActivityProductList;n.shop_id,n.campaign_name,n.start_time,n.end_time;a.push({product_id:"",product_url:"",apply_price:"",actual_price:"",campaign_type:"",gift_situation:"",play_content:"",prices_map:""}),t.setState({addActivityProductList:a})},t.state={addActivityProductList:[{product_id:"",product_url:"",apply_price:"",actual_price:"",campaign_type:"",gift_situation:"",play_content:"",prices_map:""}],shop_id:"",campaign_name:"",start_time:Date.now(),end_time:Date.now(),campaign_desc:""},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),c(n,[{key:"componentWillMount",value:function(){this.state.shop_id;var e=this.props.dispatch;e((0,u.getShopList)()),e((0,u.getProductList)())}},{key:"render",value:function(){return e.createElement(s.default,{that:this})}}]),n}())||a;t.default=h}).call(this,n(1))}}]);