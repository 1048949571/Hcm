{"version":3,"sources":["webpack:///./app/widget/index/Brand/SalesReports/main.js"],"names":["App","props","match","params","type","form","state","header","list","pageNumber","pageSize","totalElements","date","moment","subtract","add","getList","nextprops","setState","React","Component","onChangePicker","diff","error","handlePanelChange","value","mode","ajax","get","info","url","start_time","format","end_time","then","response","data","status","message","head","page","content","warning","catch","statusText","getColumns","columns","i","length","case","push","title","dataIndex","className","width","fixed","render","row","index","obj","children","isauthed","color","rowSpan","changePagination","onPaginationSize","current","size"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAEA;;;;AACA;;;;;;;;;;IACMA,G;;;AACF,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA,8GACTA,KADS;;AAAA;;AAAA,kCAEMA,MAAMC,KAAN,CAAYC,MAFlB;AAAA,YAETC,IAFS,uBAETA,IAFS;AAAA,YAEHC,IAFG,uBAEHA,IAFG;;AAGf,cAAKC,KAAL,GAAa;AACTF,sBADS;AAETC,sBAFS;AAGTE,oBAAQ,EAHC;AAITC,kBAAM,EAJG;AAKTC,wBAAY,CALH;AAMTC,sBAAU,EAND;AAOTC,2BAAe,CAPN;AAQTC,kBAAK,CAAER,QAAM,OAAN,GAAeS,SAASC,QAAT,CAAkB,CAAlB,EAAqB,OAArB,EAA8BA,QAA9B,CAAuC,CAAvC,EAA0C,QAA1C,CAAf,GAAmED,SAASC,QAAT,CAAkB,CAAlB,EAAqB,QAArB,EAA+BC,GAA/B,CAAmC,CAAnC,EAAsC,MAAtC,CAArE,EAAmHF,QAAnH;AARI,SAAb;AAHe;AAalB;;;;4CACmB;AAChB,iBAAKG,OAAL;AACH;;;kDACyBC,S,EAAW;AAAA;;AACjC,gBAAId,SAASc,UAAUf,KAAV,CAAgBC,MAA7B;AADiC,yBAEZ,KAAKG,KAFO;AAAA,gBAE3BF,IAF2B,UAE3BA,IAF2B;AAAA,gBAErBC,IAFqB,UAErBA,IAFqB;;AAGjC,gBAAIF,OAAOC,IAAP,IAAeA,IAAf,IAAuBD,OAAOE,IAAP,IAAeA,IAA1C,EAAgD;AAC5C,qBAAKa,QAAL,CAAc;AACVd,0BAAMD,OAAOC,IADH;AAEVC,0BAAMF,OAAOE,IAFH;AAGVE,4BAAQ,EAHE;AAIVC,0BAAM,EAJI;AAKVC,gCAAY,CALF;AAMVC,8BAAU,EANA;AAOVC,mCAAe,CAPL;AAQVC,0BAAK,CAAET,OAAOC,IAAP,IAAa,OAAb,GAAsBS,SAASC,QAAT,CAAkB,CAAlB,EAAqB,OAArB,EAA8BA,QAA9B,CAAuC,CAAvC,EAA0C,QAA1C,CAAtB,GAA0ED,SAASC,QAAT,CAAkB,CAAlB,EAAqB,QAArB,EAA+BC,GAA/B,CAAmC,CAAnC,EAAsC,MAAtC,CAA5E,EAA0HF,QAA1H;AARK,iBAAd,EASE,YAAI;AACF,2BAAKG,OAAL;AACH,iBAXD;AAYH;AACJ;;;iCAwHQ;AACL,mBAAO,oBAAC,aAAD,IAAK,MAAM,IAAX,GAAP;AACH;;;;EA7JaG,MAAMC,S;;;SAoCpBC,c,GAAiB,UAACT,IAAD,EAAS;AACtB,YAAGA,KAAK,CAAL,EAAQU,IAAR,CAAaV,KAAK,CAAL,CAAb,EAAqB,MAArB,IAA6B,EAAhC,EAAmC;AAC/B,8BAAIW,KAAJ,CAAU,YAAV;AACA;AACH;AACD,eAAKL,QAAL,CAAc;AACVN;AADU,SAAd,EAEE,YAAI;AACF,mBAAKI,OAAL;AACH,SAJD;AAKH,K;;SACDQ,iB,GAAoB,UAACC,KAAD,EAAQC,IAAR,EAAe;AAC/B,YAAGD,MAAM,CAAN,EAASH,IAAT,CAAcG,MAAM,CAAN,CAAd,EAAuB,QAAvB,IAAiC,EAApC,EAAuC;AACnC,8BAAIF,KAAJ,CAAU,aAAV;AACA;AACH;AACD,eAAKL,QAAL,CAAc;AACVN,kBAAKa;AADK,SAAd;AAGH,K;;SACDT,O,GAAU,YAAM;AAAA,sBAC+B,OAAKV,KADpC;AAAA,YACPF,IADO,WACPA,IADO;AAAA,YACFC,IADE,WACFA,IADE;AAAA,YACGI,UADH,WACGA,UADH;AAAA,YACcC,QADd,WACcA,QADd;AAAA,YACuBE,IADvB,WACuBA,IADvB;;;AAGZe,uBAAKC,GAAL,CAASC,aAAKzB,IAAL,EAAWC,IAAX,EAAiByB,GAA1B,EAA8B;AAC1B3B,oBAAO;AACHC,sBAAKyB,aAAKzB,IAAL,EAAWC,IAAX,EAAiBD,IADnB;AAEH2B,4BAAY3B,QAAM,OAAN,GAAcQ,KAAK,CAAL,EAAQoB,MAAR,CAAe,SAAf,CAAd,GAAwCpB,KAAK,CAAL,EAAQoB,MAAR,CAAe,YAAf,CAFjD;AAGHC,0BAAU7B,QAAM,OAAN,GAAcQ,KAAK,CAAL,EAAQoB,MAAR,CAAe,SAAf,CAAd,GAAwCpB,KAAK,CAAL,EAAQoB,MAAR,CAAe,YAAf,CAH/C;AAIHvB,sCAJG;AAKHC;AALG;AADmB,SAA9B,EASKwB,IATL,CASU,UAACC,QAAD,EAAc;AAAA,iCACgBA,SAASC,IADzB;AAAA,gBACVC,MADU,kBACVA,MADU;AAAA,gBACFC,OADE,kBACFA,OADE;AAAA,gBACOF,IADP,kBACOA,IADP;;AAEhB,gBAAIC,UAAU,OAAd,EAAuB;AACnB,uBAAKnB,QAAL,CAAc;AACVX,4BAAQ6B,KAAKG,IADH;AAEV/B,0BAAM4B,KAAKI,IAAL,CAAUC,OAFN;AAGVhC,gCAAY2B,KAAKI,IAAL,CAAU/B,UAHZ;AAIVC,8BAAU0B,KAAKI,IAAL,CAAU9B,QAJV;AAKVC,mCAAeyB,KAAKI,IAAL,CAAU7B;AALf,iBAAd;AAOH,aARD,MAQO;AACH,kCAAI+B,OAAJ,CAAYJ,OAAZ;AACH;AACJ,SAtBL,EAsBOK,KAtBP,CAsBa,UAACpB,KAAD,EAAW;AAChB,8BAAIA,KAAJ,CAAUA,MAAMqB,UAAhB;AACH,SAxBL;AAyBH,K;;SACDC,U,GAAa,UAACtC,MAAD,EAASC,IAAT,EAAkB;AAAA,sBACT,OAAKF,KADI;AAAA,YACtBF,IADsB,WACtBA,IADsB;AAAA,YACjBC,IADiB,WACjBA,IADiB;;AAE3B,YAAIyC,UAAU,EAAd;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIxC,OAAOyC,MAA3B,EAAmCD,GAAnC,EAAwC;AACpC,oBAAQxC,OAAOwC,CAAP,CAAR;AACI,qBAAKlB,aAAKzB,IAAL,EAAWC,IAAX,EAAiB4C,IAAtB;AACIH,4BAAQI,IAAR,CAAa;AACTC,+BAAO5C,OAAOwC,CAAP,CADE;AAETK,mCAAU,MAFD;AAGTC,mCAAU,MAHD;AAITC,+BAAO,GAJE;AAKTC,+BAAO,MALE;AAMTC,gCAAQ,gBAAC/B,KAAD,EAAQgC,GAAR,EAAaC,KAAb,EAAuB;AAC3B,gCAAMC,MAAM;AACVC,0CAAU;AAAA;AAAA,sCAAM,OAAOH,IAAII,QAAJ,IAAc,SAAd,GAAwB,EAACC,OAAM,MAAP,EAAxB,GAAuC,EAApD;AAAyDrC;AAAzD,iCADA;AAEVxB,uCAAO;AAFG,6BAAZ;AAIA,gCAAGyD,QAAM,CAAN,IAAS,CAAZ,EAAc;AACXC,oCAAI1D,KAAJ,CAAU8D,OAAV,GAAoB,CAApB;AACF,6BAFD,MAEK;AACHJ,oCAAI1D,KAAJ,CAAU8D,OAAV,GAAoB,CAApB;AACD;AACD,mCAAOJ,GAAP;AACH;AAjBQ,qBAAb;AAmBA;AACJ,qBAAK,IAAL;AACIb,4BAAQI,IAAR,CAAa;AACTC,+BAAO5C,OAAOwC,CAAP,CADE;AAETK,mCAAU,MAFD;AAGTC,mCAAU,MAHD;AAITC,+BAAO,GAJE;AAKTC,+BAAO;AALE,qBAAb;AAOA;;AAEJ,qBAAK,IAAL;AACIT,4BAAQI,IAAR,CAAa;AACTC,+BAAO5C,OAAOwC,CAAP,CADE;AAETK,mCAAU,OAFD;AAGTC,mCAAU,OAHD;AAITC,+BAAO,GAJE;AAKTC,+BAAO;AALE,qBAAb;AAOA;AACJ;AACIT,4BAAQI,IAAR,CAAa;AACTC,+BAAO5C,OAAOwC,CAAP,CADE;AAETK,mCAAU7C,OAAOwC,CAAP;AAFD,qBAAb;AA1CR;AA+CH;AACD,eAAOD,OAAP;AACH,K;;SACDkB,gB,GAAmB,UAACxB,IAAD,EAAO9B,QAAP,EAAoB;AACnC,eAAKQ,QAAL,CAAc;AACVT,wBAAY+B,IADF;AAEV9B,sBAAUA;AAFA,SAAd,EAGG,YAAM;AACL,mBAAKM,OAAL;AACH,SALD;AAMH,K;;SACDiD,gB,GAAmB,UAACC,OAAD,EAAUC,IAAV,EAAmB;AAClC,eAAKjD,QAAL,CAAc;AACVT,wBAAY,CADF;AAEVC,sBAAUyD;AAFA,SAAd,EAGG,YAAM;AACL,mBAAKnD,OAAL;AACH,SALD;AAMH,K;;kBAKUhB,G","file":"js/chunk/273_f96bbf737d9accfd9cdb.js","sourcesContent":["import Tpl from './tpl';\r\nimport { message as MSG } from 'antd';\r\nimport ajax from '../../../../js/common/ajax';\r\nimport {info} from './CONFIG';\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        let { type, form } = props.match.params;\r\n        this.state = {\r\n            type,\r\n            form,\r\n            header: [],\r\n            list: [],\r\n            pageNumber: 1,\r\n            pageSize: 10,\r\n            totalElements: 0,\r\n            date:[ type=='month' ?moment().subtract(1, 'years').subtract(1, 'months'):moment().subtract(1, 'months').add(1, 'days'),moment()]\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.getList()\r\n    }\r\n    componentWillReceiveProps(nextprops) {\r\n        let params = nextprops.match.params;\r\n        let { type, form } = this.state;\r\n        if (params.type != type || params.form != form) {\r\n            this.setState({\r\n                type: params.type,\r\n                form: params.form,\r\n                header: [],\r\n                list: [],\r\n                pageNumber: 1,\r\n                pageSize: 10,\r\n                totalElements: 0,\r\n                date:[ params.type=='month' ?moment().subtract(1, 'years').subtract(1, 'months'):moment().subtract(1, 'months').add(1, 'days'),moment()]\r\n            },()=>{\r\n                this.getList()\r\n            })\r\n        }\r\n    }\r\n    onChangePicker = (date) =>{\r\n        if(date[1].diff(date[0],'days')>30){\r\n            MSG.error('时间区间请小于31天')\r\n            return\r\n        }\r\n        this.setState({\r\n            date\r\n        },()=>{\r\n            this.getList()\r\n        })\r\n    }\r\n    handlePanelChange = (value, mode)=>{\r\n        if(value[1].diff(value[0],'months')>11){\r\n            MSG.error('时间区间请小于12个月')\r\n            return\r\n        }\r\n        this.setState({\r\n            date:value\r\n        })\r\n    }\r\n    getList = () => {\r\n        let {type,form,pageNumber,pageSize,date} = this.state;\r\n\r\n        ajax.get(info[type][form].url,{\r\n            params:{\r\n                type:info[type][form].type,\r\n                start_time: type=='month'?date[0].format('YYYY-MM'):date[0].format('YYYY-MM-DD'),\r\n                end_time: type=='month'?date[1].format('YYYY-MM'):date[1].format('YYYY-MM-DD'),\r\n                pageNumber,\r\n                pageSize\r\n            }\r\n        })\r\n            .then((response) => {\r\n                let { status, message, data } = response.data;\r\n                if (status == '10000') {\r\n                    this.setState({\r\n                        header: data.head,\r\n                        list: data.page.content,\r\n                        pageNumber: data.page.pageNumber,\r\n                        pageSize: data.page.pageSize,\r\n                        totalElements: data.page.totalElements,\r\n                    })\r\n                } else {\r\n                    MSG.warning(message)\r\n                }\r\n            }).catch((error) => {\r\n                MSG.error(error.statusText);\r\n            });\r\n    }\r\n    getColumns = (header, list) => {\r\n        let {type,form} = this.state;\r\n        let columns = []\r\n        for (let i = 0; i < header.length; i++) {\r\n            switch (header[i]) {\r\n                case info[type][form].case:\r\n                    columns.push({\r\n                        title: header[i], \r\n                        dataIndex:'name',\r\n                        className:'name',\r\n                        width: 150, \r\n                        fixed: 'left',\r\n                        render: (value, row, index) => {\r\n                            const obj = {\r\n                              children: <span style={row.isauthed=='NOTAUTH'?{color:'#999'}:{}}>{value}</span>,\r\n                              props: {},\r\n                            };\r\n                            if(index%2==0){\r\n                               obj.props.rowSpan = 2;\r\n                            }else{\r\n                              obj.props.rowSpan = 0;\r\n                            }\r\n                            return obj;\r\n                        },\r\n                    })\r\n                    break;\r\n                case \"类别\":\r\n                    columns.push({\r\n                        title: header[i], \r\n                        dataIndex:'type',\r\n                        className:'type',\r\n                        width: 150, \r\n                        fixed: 'left'\r\n                    })\r\n                    break;\r\n\r\n                case \"合计\":\r\n                    columns.push({\r\n                        title: header[i], \r\n                        dataIndex:'total',\r\n                        className:'total',\r\n                        width: 100, \r\n                        fixed: 'right'\r\n                    })\r\n                    break;\r\n                default:\r\n                    columns.push({\r\n                        title: header[i], \r\n                        dataIndex:header[i]\r\n                    })\r\n            }\r\n        }\r\n        return columns\r\n    }\r\n    changePagination = (page, pageSize) => {\r\n        this.setState({\r\n            pageNumber: page,\r\n            pageSize: pageSize,\r\n        }, () => {\r\n            this.getList()\r\n        })\r\n    }\r\n    onPaginationSize = (current, size) => {\r\n        this.setState({\r\n            pageNumber: 1,\r\n            pageSize: size,\r\n        }, () => {\r\n            this.getList()\r\n        })\r\n    }\r\n    render() {\r\n        return <Tpl that={this} />\r\n    }\r\n}\r\nexport default App;\r\n"],"sourceRoot":""}