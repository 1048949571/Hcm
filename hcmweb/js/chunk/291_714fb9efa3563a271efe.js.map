{"version":3,"sources":["webpack:///./app/widget/index/Dealers/ActivityDetails/main.js"],"names":["ActivityDetails","props","getActiveDetail","id","state","method","url","data","then","res","status","setState","detail","cplist","map","Object","assign","v","_isShowReeditForm","_isExpandPrice","catch","handleEditSubmit","index","campaign_id","e","preventDefault","_forms","validateFields","err","values","LoadingModal","bl","message","success","error","handleCancelEdit","selectIndex","handleReeditClick","flag","list","slice","handleExpandPrice","expandPriceIndex","match","params","React","Component","create"],"mappings":"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","file":"js/chunk/291_714fb9efa3563a271efe.js","sourcesContent":["import Tpl from './tpl'\r\nimport axios from '../../../../js/common/ajax'\r\nimport { Form, message as Msg } from 'antd'\r\n// import { LoadingModal } from '../../../components/LoadingModal/LoadingModal'\r\n\r\nclass ActivityDetails extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      expandPriceIndex: -1,\r\n      id: props.match.params.id,\r\n      status: props.match.params.status,\r\n      detail: {},\r\n      cplist: [],\r\n      selectIndex: -1\r\n    }\r\n    this._forms = []\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.getActiveDetail()\r\n  }\r\n  // componentDidMount() {\r\n  //   const { search } = this.props.location\r\n  //   const str = decodeURIComponent(search.slice(1).split('=')[1])\r\n  //   this.setState({\r\n  //     status: str\r\n  //   })\r\n  // }\r\n\r\n  // 获取活动详情\r\n  getActiveDetail = () => {\r\n    const { id } = this.state\r\n    axios({\r\n      method: 'post',\r\n      url: '/hcm/campgign/Detail',\r\n      data: {\r\n        id\r\n      }\r\n    }).then(res => {\r\n      const { data, status } = res.data\r\n      this.setState({\r\n        detail: data,\r\n        cplist: data.cplist.map(v => Object.assign({}, v, {_isShowReeditForm: false, _isExpandPrice: false}))\r\n      })\r\n    }).catch(err => {\r\n\r\n    })\r\n  }\r\n\r\n  handleEditSubmit = (id, index, campaign_id, e) => {\r\n    e.preventDefault()\r\n    // console.log(this)\r\n    // return\r\n    this._forms[index].validateFields((err, values) => {\r\n      if (!err) {\r\n        // console.log(id, values, index, this)\r\n        // return\r\n        LoadingModal({bl:true})\r\n        axios({\r\n          method: 'post',\r\n          url: '/hcm/campgign/Reapply',\r\n          data: {\r\n            id,\r\n            campaign_id,\r\n            ...values\r\n          }\r\n        }).then(res => {\r\n          LoadingModal({bl:false})\r\n          const { data, status, message } = res.data\r\n          if (status === '10000') {\r\n            Msg.success(message)\r\n            this.getActiveDetail()\r\n          }\r\n        }).catch(err => {\r\n          LoadingModal({bl:false})\r\n          Msg.error('系统繁忙，请稍后再试！')\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  handleCancelEdit = () => {\r\n    this.setState({\r\n      selectIndex: -1\r\n    })\r\n  }\r\n\r\n  handleReeditClick = (index, flag) => {\r\n    const { cplist } = this.state\r\n    const list = cplist.slice()\r\n    list[index]._isShowReeditForm = flag\r\n    this.setState({\r\n      // selectIndex: index\r\n      cplist: list\r\n    })\r\n  }\r\n\r\n  handleExpandPrice = index => {\r\n    const { expandPriceIndex, cplist } = this.state\r\n    const list = cplist.slice()\r\n    list[index]._isExpandPrice = !list[index]._isExpandPrice\r\n    this.setState({\r\n      // expandPriceIndex: index === expandPriceIndex ? -1 : index\r\n      cplist: list\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return <Tpl that={this} />\r\n  }\r\n}\r\n\r\nexport default Form.create()(ActivityDetails)"],"sourceRoot":""}