{"version":3,"sources":["webpack:///./app/widget/index/Brand/CustomerOverview/ChartTree.js"],"names":["myChart","App","props","onScale","bl","scale","state","clientHeight","clientWidth","setState","$","css","height","Math","floor","width","resize","inChart","value","data","echarts","init","document","getElementById","recursive","util","each","datum","index","collapsed","label","length","children","recursiveColor","console","log","name","toUpperCase","indexOf","i","setOption","tooltip","trigger","triggerOn","formatter","params","take_people","contact","dutynumber","address","level","platform_name","shop_url","series","type","roam","top","left","bottom","right","symbolSize","align","padding","color","leaves","normal","position","verticalAlign","animationDuration","animationDurationUpdate","render","that","customerOverview","nodeDom","React","Component"],"mappings":"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","file":"js/chunk/47_67497d5553f93a3023e2.js","sourcesContent":["import ajax from '../../../../js/common/ajax';\r\nimport echarts from 'echarts';\r\nimport {Icon } from 'antd';\r\nlet myChart = null;\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        // document.title = '客户总览';\r\n        super(props);\r\n        this.state = {\r\n            data: props.data,\r\n            scale: 1,\r\n            clientHeight: 0,\r\n            clientWidth: 0\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        let that = this;\r\n        // let customerOverview = $(\".CustomerOverview\")[0];\r\n        let customerOverview = $(this.props.nodeDom)[0]\r\n        $('.scale-box').css({\r\n            height: customerOverview.clientHeight + 'px',\r\n            width: customerOverview.clientWidth + 'px'\r\n        })\r\n        $('#container').css({\r\n            height: customerOverview.clientHeight + 'px',\r\n            width: customerOverview.clientWidth + 'px'\r\n        })\r\n        this.setState({\r\n            clientHeight: customerOverview.clientHeight,\r\n            clientWidth: customerOverview.clientWidth\r\n        })\r\n        this.inChart()\r\n    }\r\n    onScale = (bl) => {\r\n        let scale = this.state.scale;\r\n        let { clientHeight, clientWidth } = this.state;\r\n        if (bl) {\r\n            this.setState({\r\n                scale: scale >= 2 ? 2 : scale + 0.1\r\n            }, () => {\r\n                $('#container').css({\r\n                    height: Math.floor(clientHeight * (this.state.scale < 1 ? 1 : this.state.scale)) + 'px',\r\n                    width: Math.floor(clientWidth * this.state.scale) + 'px'\r\n                })\r\n                myChart.resize()\r\n            })\r\n\r\n        } else {\r\n            this.setState({\r\n                scale: scale <= 0.2 ? 0.2 : scale - 0.1\r\n            }, () => {\r\n                $('#container').css({\r\n                    height: clientHeight + 'px',\r\n                    width: Math.floor(clientWidth * this.state.scale) + 'px'\r\n                })\r\n                myChart.resize()\r\n            })\r\n        }\r\n    }\r\n    inChart = (value='') => {\r\n        let { data } = this.props\r\n        let bl = false;\r\n        myChart = echarts.init(document.getElementById(\"container\"))\r\n        \r\n        function recursive(data){\r\n            echarts.util.each(data, function (datum, index) {\r\n                datum.collapsed = true;\r\n                \r\n                delete datum.label\r\n                if(value.length){\r\n                    \r\n                    if(datum.children&&datum.children.length){\r\n                        bl = false;\r\n                        if(recursiveColor(datum.children,value)){\r\n                            datum.collapsed = false;\r\n                            console.log(datum.children)\r\n                        }else{\r\n                            datum.collapsed = true;\r\n                        }\r\n                    }\r\n                    if(datum.name.toUpperCase().indexOf(value)!=-1){\r\n                        datum.label = {\r\n                            'color':'red'\r\n                        }\r\n                    }\r\n                    if(datum.children&&datum.children.length){\r\n                        recursive(datum.children)\r\n                    }\r\n\r\n                }else{\r\n                    if(datum.children&&datum.children.length){\r\n                        datum.collapsed = false\r\n                        \r\n                    }else{\r\n                        datum.collapsed = true;\r\n                    }\r\n                    \r\n                }\r\n            });\r\n        }\r\n        \r\n        function recursiveColor(data,value){\r\n            if(value){\r\n                for(let i = 0 ; i< data.length; i++){\r\n                    if(data[i].name.toUpperCase().indexOf(value)!=-1 ){\r\n                        bl = true;\r\n                        break;\r\n                    }\r\n                    if(data[i].children&&data[i].children.length){\r\n                        recursiveColor(data[i].children,value)\r\n                    }\r\n                }\r\n            }\r\n            return bl\r\n        }\r\n        \r\n        recursive(data.children)\r\n        \r\n        myChart.setOption({\r\n            tooltip: {\r\n                trigger: 'item',\r\n                triggerOn: 'mousemove',\r\n                formatter: function (params) {\r\n                    let {take_people='',contact, dutynumber, address='',level,platform_name,shop_url='' } = params.data\r\n                    if(level==2){\r\n                        return `\r\n                        <div>\r\n                            <p>联系方式:${contact}</p>\r\n                            <p>对接人:${take_people}</p>\r\n                            <p>公司税号:${dutynumber}</p>\r\n                            <p>公司地址:${address}</p>\r\n                        </div>\r\n                        `\r\n                    }else if(level==3){\r\n                        return `\r\n                        <div>\r\n                            <p>平台:${platform_name}</p>\r\n                            <p>链接地址:${shop_url}</p>\r\n                        </div>\r\n                        `\r\n                    }\r\n                    \r\n                }\r\n            },\r\n            series: [\r\n                {\r\n                    type: 'tree',\r\n                    roam:true,\r\n                    data: [data],\r\n                    top: '1%',\r\n                    left: '7%',\r\n                    bottom: '1%',\r\n                    right: '20%',\r\n                    symbolSize: 15,\r\n                    // symbol: 'rect',\r\n                    // lineStyle: {\r\n                    //     curveness: 0.8\r\n                    // },\r\n                    // itemStyle: {\r\n                    //     borderWidth: 10,\r\n                    //     borderColor: 'none'\r\n                    // },\r\n                    label: {\r\n                        formatter: function (params) {\r\n                            return ` ${params.data.name} ${params.data.children&&params.data.children.length ? '>' : ''}`\r\n                        },\r\n                        align:'right',\r\n                        padding:[0,10,0,0],\r\n                        color: '#4493e8',\r\n                    },\r\n                    leaves: {\r\n                        label: {\r\n                            normal: {\r\n                                position: 'right',\r\n                                verticalAlign: 'middle',\r\n                                align: 'left'\r\n                            }\r\n                        }\r\n                    },\r\n                    animationDuration: 550,\r\n                    animationDurationUpdate: 750\r\n                }\r\n            ]\r\n        });\r\n        \r\n    }\r\n    render = ()=>{\r\n        let {scale} = this.state;\r\n        return(\r\n            // <div className='scale-box'>\r\n            <div id=\"container\">\r\n\r\n            </div>\r\n        //     <div className='bs-box'>\r\n        //         <Icon onClick={() => this.onScale(false)} type=\"minus-circle\" />\r\n        //         {Math.round(scale * 100)}%\r\n        //         <Icon onClick={() => this.onScale(true)} type=\"plus-circle\" />\r\n        //     </div>\r\n        // </div>\r\n        )\r\n    }\r\n}\r\nexport default App"],"sourceRoot":""}