(window.webpackJsonp=window.webpackJsonp||[]).push([[198],{1157:function(e,t){},1158:function(e,t){},25:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(54));a(53);var r=i(a(28));function i(e){return e&&e.__esModule?e:{default:e}}a(1157);var o=function(t){return e.createElement("div",{className:"layout-wrapper "+(t.className||"")},e.createElement("div",{className:"header-wrapper"},e.createElement(n.default,{className:"breadcrumb"},t.breadcrumbList.map(function(a,r){return""===t.linkList[r]?e.createElement(n.default.Item,{key:a},a):e.createElement(n.default.Item,{href:"javascript:;",key:a},e.createElement("span",{onClick:function(){t.history.go(-t.linkList[r])}},a))}))),e.createElement("div",{className:"layout-content"},t.children),e.createElement("div",{className:"copyright"},e.createElement(r.default,null)))};o.defaultProps={title:"标题",breadcrumbList:[],linkList:[]},t.default=o}).call(this,a(1))},28:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var n=function(t){function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),a(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return e.createElement("div",{className:this.props.clazzName?this.props.clazzName:"Copyright"},"Copyright © 杭州久点网络技术有限公司")}}]),n}();t.default=n}).call(this,a(1))},62:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={onVisibilityChange:function(e,t){var a="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,n=a.replace(/hidden/i,"visibilitychange"),r=function(){document[a]||console.log("页面非激活"+new Date),document[a]&&console.log("页面激活"+new Date)};document.addEventListener(n,r)},formatAccount:function(e){return e=e.replace(/[\s]/g,"").replace(/(\d{4})(?=\d)/g,"$1 ")},formatThousandMoney:function(t,a){return isNaN(t)?"":(a=a||"",!1===e.isNumeric(t)||0==t?"0.00":0==(t=(t=+t).toFixed(2))?"0.00":a+" "+(t+"").replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,"))},encryption:function(){return(""+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")).replace(/(\d{3})\d*([0-9a-zA-Z]{4})/,"$1****$2")},browser:{versions:function(){var e=navigator.userAgent,t=(navigator.appVersion,"");if(e.indexOf("Ourydc.Yuebaobao")>-1){var a=e.match(/Ourydc.Yuebaobao.*/);if(a.length>0){var n=a[0];t=n.substr(n.indexOf("/")+1)}}return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,weibo:"WeiBo"==e.match(/WeiBo/i)||"Weibo"==e.match(/Weibo/i)||"weibo"==e.match(/weibo/i),qq:"qq"==e.match(/qq/i)||"QQ"==e.match(/QQ/i),qqBrower:-1==e.indexOf("Mobile MQQBrowser")&&-1!=e.indexOf("MQQBrowser"),isInApp:e.indexOf("Ourydc.Yuebaobao")>-1,locAppVersion:t}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},checkAccount:function(e){return/^[a-zA-Z](\w|\s+){5,15}$/.test(this.trim(e||""))},checkUrl:function(e){return/^((ht|f)tps?):\/\/([\w\-]+(\.[\w\-]+)*\/)*[\w\-]+(\.[\w\-]+)*\/?(\?([\w\-\.,@?^=%&:\/~\+#]*)+)?/.test(this.trim(e||""))},Reg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^[^\u4e00-\u9fa5]{5,31}$/.test(this.trim(e||""))},checkPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^.{6,16}$/.test(this.trim(e||""))},trim:function(e){return(e=""+e).replace(/(^\s*)|(\s*$)/g,"")},getCookie:function(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?unescape(t[2]):null},required:function(e){var t=this.trim(e||"");return!(!t||!t.length)},legnthCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INPUT";return this.trim(e||"").length<this.LENGTH[t]},LENGTH:{URL:500,TEXTAREA:200,INPUT:50},getQueryString:function(e){var t=new RegExp("(^|&|[?])"+e+"=([^&]*)(&|$)"),a=window.location.href.substr(1).match(t);return null!=a?a[2]:""},getParamString:function(e,t){var a=new RegExp("(^|&|[?])"+t+"=([^&]*)(&|$)"),n=e.substr(1).match(a);return null!=n?n[2]:""},Trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},deviceCheck:function(){return browser.versions.mobile?browser.versions.android?"android":browser.versions.ios?"ios":"mobile":"web"}}}).call(this,a(112))},877:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(14)),r=m(a(11)),i=m(a(15)),o=m(a(30)),l=m(a(27)),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(18),a(22),a(16),a(31),a(26);var c=m(a(12)),u=m(a(62)),d=m(a(25));function m(e){return e&&e.__esModule?e:{default:e}}l.default.TextArea;var p=o.default.Option,f=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));t.getUrlInfo=function(){var e=t.state,a=e.shopUrl,n=e.platformCode;a&&u.default.checkUrl(a)?n&&n.trim().length?t.setState({shopUrlStatus:!0},function(){c.default.get("/hcm/hcmShop/searchShopPy",{params:{shopUrls:a,platform:n}}).then(function(e){if("10000"==e.data.status){var a=e.data.data[0];"True"==a.success?(t.setState({shopUrlStatus:!1,wangwang:a.wangwang,shopUrl:a.resultShopUrl,shopName:a.shopName,shopmainid:a.shopmainid,shopUrlCheck:!0}),i.default.success("店铺信息获取成功")):(t.setState({shopUrlStatus:!1}),i.default.error("店铺信息获取失败，请检查首页地址是否正确"))}else t.setState({shopUrlStatus:!1}),i.default.error(e.data.message)}).catch(function(e){i.default.error(e.statusText)})}):i.default.error("平台不可为空"):i.default.error("首页地址验证不通过,请输入正确的首页地址！")},t.getPlatform=function(){t.setState({platForm:can.platform||[]})},t.getByProduct=function(){c.default.get("/hcm/hcmCustomModel/getBybmcidAndModule",{params:{module:"SHOP"}}).then(function(e){var a=e.data.data;t.setState({formatColumn:a})}).catch(function(e){i.default.error(e.statusText)})},t.onChangeSlect=function(e){t.setState({platformCode:e,shopUrlStatus:!1,shopUrlCheck:!1,wangwang:null,shopName:null,platTarget:can.platform.filter(function(t){return t.dictCode==e})[0]},function(){"main"!=t.state.platTarget.pricename&&t.setState({shopUrlCheck:!0},function(){console.log(1,t.state.shopUrlCheck)})})},t.brandList=function(){c.default.post("/hcm/ProductClassify/list",{}).then(function(e){"10000"==e.data.status?t.setState({brandList:e.data.data}):i.default.warning(e.data.message)}).catch(function(e){i.default.error(e.statusText)})},t.handleChangesx=function(e,a){console.log(e,a),t.setState({mcids:e.join(","),productclassifyid:e})};var n=t.props.match.params,r=n.id,o=n.dealerid,l=n.type;return t.state={id:r,dealerid:o,type:l,shopUrlStatus:!1,shopUrlCheck:"edit"==l,formatColumn:{},product_classify_id:null,bmcid:1,product_name:null,platformCode:null,shopmainid:null,brand_name:null,productclassifyid:[],addField:{},platForm:[],platTarget:{},brandList:[],mcids:""},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e.Component),s(a,[{key:"componentWillMount",value:function(){var e=this.props.match.params.type;this.getPlatform(),this.getByProduct(),"add"==e||this.getInfo(),this.brandList()}},{key:"componentDidMount",value:function(){}},{key:"getInfo",value:function(){var e=this,t=this.props.match.params,a=t.id,n=t.dealerid;c.default.get("/hcm/hcmShop/getById",{params:{shopId:a,dealerid:n,getType:"UPDATE"}}).then(function(t){var a=t.data.data,n=a.shopUrl,r=a.dealername,i=a.wangwang,o=a.platformCode,l=a.shopmainid,s=a.shopName,c=a.productclassifyid,u=(a.status,a.productClassifyName,a.platformname,a.id,function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(a,["shopUrl","dealername","wangwang","platformCode","shopmainid","shopName","productclassifyid","status","productClassifyName","platformname","id"]));e.setState({shopUrl:n,dealername:r,wangwang:i,platformCode:o,shopName:s,shopmainid:l,addField:u,productclassifyid:c?c.split(","):[]})}).catch(function(e){i.default.error(e.statusText)})}},{key:"fixedIptChange",value:function(e,t){var a=this.state;"shopUrl"==t&&(a.shopUrlStatus=!1,a.shopUrlCheck="main"!=a.platTarget.pricename,a.wangwang=null,a.shopName=null,a.shopmainid=null),a[t]=e.target.value,this.setState(a)}},{key:"iptChange",value:function(e,t){var a=this.state.addField;console.log(e.target.value),a[t.fieldvalue]=e.target.value,this.setState({addField:a})}},{key:"onSubmit",value:function(){var e=this,t=this.state,a=t.shopUrlCheck,n=t.id,r=t.type,o=t.shopUrl,l=t.dealername,s=t.wangwang,d=t.shopmainid,m=t.platformCode,p=t.shopName,f=t.addField;t.formatColumn;m&&m.trim().length?o&&u.default.checkUrl(o)?a?p&&p.trim().length?l&&l.trim().length?!m||"TB"!=m&&"TM"!=m&&"1688"!=m||s&&s.trim().length?(LoadingModal({bl:!0,text:"保存中,请稍后..."}),c.default.post("/hcm/hcmShop/saveHcmShopByBmc",{shopUrl:o,dealername:l,wangwang:s,platformCode:m,shopName:p,shopmainid:d,addField:JSON.stringify(f),productclassifyid:this.state.mcids,id:"add"==r?null:n}).then(function(t){"10000"==t.data.status?(i.default.success(t.data.message),"add"==r?e.setState({shopUrl:null,dealername:null,wangwang:null,platformCode:null,shopUrlStatus:!1,shopUrlCheck:!1,shopName:null,shopmainid:null,productclassifyid:[],addField:{},platTarget:{}}):window.location.href="/index.html#/ShopFile"):(console.log(t),i.default.warning(t.data.message)),LoadingModal({bl:!1})}).catch(function(e){LoadingModal({bl:!1}),i.default.error(e.statusText)})):i.default.error("请输入旺旺名称"):i.default.error("经销商名称不可为空"):i.default.error("店铺名不可为空"):i.default.error("请先获取店铺信息"):i.default.error("首页地址验证不通过"):i.default.error("平台不可为空")}},{key:"render",value:function(){var t=this,a=this.state,i=(a.id,a.type),s=a.addField,c=a.shopUrlStatus,u=a.shopUrlCheck,m=a.platTarget,f=a.formatColumn,h=a.platForm,g=f.add,v=(f.basic,this.state.brandList.map(function(t,a){return e.createElement(p,{key:t.id},t.productClassifyName)}));return e.createElement(d.default,{breadcrumbList:["店铺档案","add"==i?"新增店铺档案":"编辑店铺档案"],linkList:["1",""],history:this.props.history},e.createElement("div",{className:"ActionShopFile"},e.createElement("div",{className:"content"},e.createElement("div",{className:"box"},e.createElement("div",{className:"items"},e.createElement("div",{className:"item"},e.createElement("span",{className:"text red"},"平台"),e.createElement(o.default,{disabled:"add"!=i||c,value:this.state.platformCode,style:{width:350},onChange:this.onChangeSlect},e.createElement(p,{value:null},"请选择"),h.map(function(t,a){return e.createElement(p,{key:a,value:t.dictCode},t.dictName)}))),e.createElement("div",{style:{position:"relative"},className:"item"},e.createElement("span",{className:"text red"},"店铺首页地址"),e.createElement(l.default,{disabled:"add"!=i||c,maxLength:512,placeholder:"请输入",onChange:function(e){return t.fixedIptChange(e,"shopUrl")},value:this.state.shopUrl,className:"input"}),"main"==m.pricename?e.createElement(n.default,{disabled:u,onClick:this.getUrlInfo,style:{position:"absolute",right:"-150px"}},u?e.createElement(e.Fragment,null,"信息获取成功",e.createElement(r.default,{type:"check-circle",style:{paddingLeft:"9px",color:"rgba(0,0,0,0.3)"}})):e.createElement(e.Fragment,null,"获取店铺信息",c?e.createElement(r.default,{spin:!0,type:"loading"}):null)):null),e.createElement("div",{className:"item"},e.createElement("span",{className:"text red"},"店铺名称"),e.createElement(l.default,{maxLength:512,disabled:"add"!=i||"main"==m.pricename,placeholder:"main"==m.pricename?"店铺名称根据首页地址获取":"请输入店铺名称",onChange:function(e){return t.fixedIptChange(e,"shopName")},value:this.state.shopName,className:"input"})),e.createElement("div",{className:"item"},e.createElement("span",{className:"TB"==this.state.platformCode||"TM"==this.state.platformCode||"1688"==this.state.platformCode?"text red":"text "},"旺旺名称"),e.createElement(l.default,{maxLength:32,disabled:"add"!=i||"main"==m.pricename,placeholder:"main"==m.pricename?"旺旺名称根据首页地址获取":"请输入旺旺名称",onChange:function(e){return t.fixedIptChange(e,"wangwang")},value:this.state.wangwang,className:"input"})),e.createElement("div",{className:"item"},e.createElement("span",{className:"text red"},"经销商名称"),e.createElement(l.default,{maxLength:32,placeholder:"请输入",disabled:"add"!=i,onChange:function(e){return t.fixedIptChange(e,"dealername")},value:this.state.dealername,className:"input"})),e.createElement("div",{className:"item"},e.createElement("span",{className:"text"},"经营品类"),e.createElement("div",{className:"input"},e.createElement(o.default,{mode:"multiple",placeholder:"请选择经营品类",onChange:this.handleChangesx,onFocus:this.onFocusChang,value:this.state.productclassifyid},v))),g?g.data.map(function(a,n){if("brand_name"!==a.fieldvalue&&"product_name"!==a.fieldvalue)return e.createElement("div",{key:"add"+n,className:"item"},e.createElement("span",{className:"text"},a.fieldname),e.createElement(l.default,{maxLength:"memo"==a.fieldvalue?128:32,placeholder:"请输入",onChange:function(e){return t.iptChange(e,a)},value:s[a.fieldvalue],className:"input"}))}):null),e.createElement("div",{className:"items"},e.createElement("div",{className:"item"},e.createElement("span",{className:"text"}),e.createElement(n.default,{className:"btn2-main",onClick:function(){return t.onSubmit()},style:{marginLeft:"20px"}},"确认"),e.createElement("a",{href:"/index.html#/ShopFile"},e.createElement(n.default,{className:"btn2-sub noneFloat"},"取消"))))))))}}]),a}();t.default=f}).call(this,a(1))}}]);