(window.webpackJsonp=window.webpackJsonp||[]).push([[240],{539:function(t,e,a){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0});var o=l(a(15)),i=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();a(16);var s=l(a(540)),r=l(a(12));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(e){function a(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return e.onShow=function(t){console.log(t),e.setState({visible:!0,id:t},function(){e.getDealerInfo()})},e.onClose=function(){e.setState({visible:!1,activity:{date:[n().subtract(1,"months"),n()],show:1,list:[]},abnormalOrders:{date:[n().subtract(1,"months"),n()],show:1,list:[]}})},e.getMonth=function(){var t=e.state.id,a=e.state.salesData,n=(a.list,a.pageNo),i=a.pageSize;r.default.get("/hcm/dayReport/findMonitorDinDanDayReportPageListMonth",{params:{dealer_id:t,pageNo:n,pageSize:i}}).then(function(t){var a=t.data,n=a.data,o=a.status,i=(a.message,e.state.salesData);i.list=n.content,i.pageNo=n.pageNumber,i.pageSize=n.pageSize,i.totalNum=n.totalElements,"10000"===o&&e.setState({salesData:i})}).catch(function(t){o.default.error("系统繁忙，请稍后再试！")})},e.getActivityList=function(){var t=e.state,a=t.id,n=t.activity;r.default.get("/hcm/dealer/DealerDetail_Campaign",{params:{dealer_id:a,pageNo:1,pageSize:n.list.length+10,start_time:n.date[0].format("YYYY-MM-DD"),end_time:n.date[1].format("YYYY-MM-DD")}}).then(function(t){var a=t.data,o=a.data,i=a.status;a.message;n.list.length==o.length||o.length<10?n.show=2:n.show=1,0==o.length&&(n.show=3),n.list=o,"10000"===i&&e.setState({activity:n})}).catch(function(t){o.default.error("系统繁忙，请稍后再试！")})},e.getAbnormalOrdersList=function(){var t=e.state,a=t.id,n=t.abnormalOrders;r.default.get("/hcm/hcmShopMonitor/getMonitorByShopid",{params:{dealerid:a,pageNo:1,pageSize:n.list.length+10,start_time:n.date[0].format("YYYY-MM-DD"),end_time:n.date[1].format("YYYY-MM-DD")}}).then(function(t){var a=t.data,o=a.data,i=a.status;a.message;n.list.length==o.length||o.length<10?n.show=2:n.show=1,0==o.length&&(n.show=3),n.list=o,"10000"===i&&e.setState({abnormalOrders:n})}).catch(function(t){o.default.error("系统繁忙，请稍后再试！")})},e.getDealerInfo=function(){var t=e.state.id;LoadingModal({bl:!0}),(0,r.default)({method:"post",url:"/hcm/hcmCustomModel/getBybmcidAndModule",data:{fieldSource:t,module:"DEALER"}}).then(function(a){var n=a.data,i=n.data,s=n.status;n.message;"10000"===s&&e.setState({diyList:i.add.data,activeKey:"1"},function(){(0,r.default)({method:"post",url:"/hcm/dealer/update_page",data:{id:t}}).then(function(t){LoadingModal({bl:!1});var a=t.data,n=a.data,o=a.status;a.message;"10000"===o&&e.setState({baseInfo:n},function(){e.getAuthorizedShops(),e.getActivityList(),e.getAbnormalOrdersList(),e.getMonth()})}).catch(function(t){LoadingModal({bl:!1}),o.default.error("系统繁忙，请稍后再试！")})})}).catch(function(t){LoadingModal({bl:!1}),o.default.error("系统繁忙，请稍后再试！")})},e.getAuthorizedShops=function(){var t=e.state.authorizedShops,a=e.state.id;r.default.get("/hcm/dealer/DealerDetail_Authshop",{params:{dealerid:a,pageNo:1,pageSize:t.list.length+10}}).then(function(a){var n=a.data,o=n.data,i=n.status;n.message;t.list.length==o.length||o.length<10?t.show=2:t.show=1,0==o.length&&(t.show=3),t.list=o,"10000"===i&&e.setState({authorizedShops:t})}).catch(function(t){o.default.error("系统繁忙，请稍后再试！")})},e.onTabsChange=function(t){e.setState({activeKey:t})},e.onSalesDataPagination=function(t,a){var n=e.state.salesData;n.pageNo=t,n.pageSize=a,e.setState({salesData:n},function(){e.getMonth()})},e.onSalesDataPaginationSize=function(t,a){var n=e.state.salesData;n.pageNo=1,n.pageSize=a,e.setState({salesData:n},function(){e.getMonth()})},e.activityRangePicker=function(t){var a=e.state.activity;a.date=t,e.setState({activity:a},function(){e.getActivityList()})},e.abnormalOrdersRangePicker=function(t){var a=e.state.abnormalOrders;a.date=t,e.setState({abnormalOrders:a},function(){e.getAbnormalOrdersList()})},e.state={id:null,visible:!1,activeKey:"1",diyList:[],baseInfo:{dealername:"--",contact:"--",dutynumber:"--",take_people:"--",address:"--",creditscore:"--",memo_dealername:"--",zssj:"--",authorize_num:"--",authorize_start:null,authorize_end:null},authorizedShops:{list:[],show:1},salesData:{list:[],pageNo:1,pageSize:10,totalNum:0},activity:{date:[n().subtract(1,"months"),n()],show:1,list:[]},abnormalOrders:{date:[n().subtract(1,"months"),n()],show:1,list:[]}},e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,t.Component),i(a,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return t.createElement(s.default,{that:this})}}]),a}();e.default=u}).call(this,a(1),a(10))}}]);