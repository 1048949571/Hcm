{"version":3,"sources":["webpack:///./app/js/common/lib.js","webpack:///./app/widget/index/Dealers/ActivityDeclaration/main.js"],"names":["onVisibilityChange","fn1","fn2","hiddenProperty","document","visibilityChangeEvent","replace","console","log","Date","addEventListener","formatAccount","number","formatThousandMoney","money","currencyText","isNaN","$","isNumeric","toFixed","encryption","s","str","browser","versions","u","navigator","userAgent","app","appVersion","isInApp","indexOf","locAppVersion","infoArr","match","length","info","substr","trident","presto","webKit","gecko","mobile","ios","android","iPhone","iPad","webApp","weixin","weibo","qq","qqBrower","language","browserLanguage","toLowerCase","checkAccount","name","patt","test","trim","checkUrl","Reg","checkPassword","password","getCookie","arr","reg","RegExp","cookie","unescape","required","legnthCheck","type","LENGTH","URL","TEXTAREA","INPUT","getQueryString","r","window","location","href","newName","getParamString","Trim","deviceCheck","device","ActivityDeclaration","shopList","state","dealer","productList","props","checkInputLength","LIST","label","list","map","v","i","Object","keys","key","utils","temList","reduce","a","b","concat","filter","undefined","forEach","warning","msg","handleSubmit","shop_id","campaign_name","start_time","end_time","campaign_desc","addActivityProductList","localStorage","getItem","checkInputValue","shop_name","id","slice","data","cplist","product_id","assign","LoadingModal","bl","method","url","transformRequest","headers","JSON","stringify","then","res","status","message","success","handleClearForm","error","catch","handleSelectBeforeChange","index","value","setState","now","product_url","apply_price","actual_price","campaign_type","gift_situation","play_content","prices_map","handleDeleteProduct","splice","handleSwitchDateChange","dates","valueOf","handleSwitchShopChange","dispatch","handleSwitchProductChange","selectOption","getProductPrices","handleInputChange","params","flag","event","obj","target","every","val","handleAddClick","push","React","Component"],"mappings":"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","file":"js/chunk/290_49c78a7567f85c7fc3d7.js","sourcesContent":["\r\nexport default {\r\n    onVisibilityChange(fn1, fn2) {\r\n        var hiddenProperty = 'hidden' in document ? 'hidden' :\r\n            'webkitHidden' in document ? 'webkitHidden' :\r\n                'mozHidden' in document ? 'mozHidden' :\r\n                    null;\r\n        var visibilityChangeEvent = hiddenProperty.replace(/hidden/i, 'visibilitychange');\r\n        var onVisibilityChange = function () {\r\n            if (!document[hiddenProperty]) {\r\n                console.log('页面非激活' + new Date());\r\n            }\r\n            if (document[hiddenProperty]) {\r\n                console.log('页面激活' + new Date())\r\n            }\r\n        }\r\n        document.addEventListener(visibilityChangeEvent, onVisibilityChange);\r\n    },\r\n    //银行卡号格式化\r\n    formatAccount(number) {\r\n        number = number.replace(/[\\s]/g, '').replace(/(\\d{4})(?=\\d)/g, \"$1 \");\r\n        return number;\r\n    },\r\n    formatThousandMoney(money, currencyText) {\r\n        if (isNaN(money))\r\n            return '';\r\n        currencyText = currencyText || '';\r\n        if ($.isNumeric(money) === false || money == 0) {\r\n            return '0.00';\r\n        } else {\r\n            money = +money;\r\n        }\r\n        money = money.toFixed(2);\r\n        if (money == 0) {\r\n            return '0.00';\r\n        } else {\r\n            return (currencyText + ' ' + (money + '').replace(/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g, '$&,'));\r\n        }\r\n    },\r\n    encryption(s=''){\r\n        let str = `${s}`;\r\n        return str.replace(/(\\d{3})\\d*([0-9a-zA-Z]{4})/,\"$1****$2\"); \r\n    },\r\n    browser: {\r\n        versions: function () {\r\n            var u = navigator.userAgent, app = navigator.appVersion;\r\n            var isInApp = u.indexOf('Ourydc.Yuebaobao') > -1;\r\n            var locAppVersion = '';\r\n            if (isInApp) {\r\n                var infoArr = u.match(/Ourydc.Yuebaobao.*/);\r\n                if (infoArr.length > 0) {\r\n                    var info = infoArr[0];\r\n                    locAppVersion = info.substr(info.indexOf(\"/\") + 1);\r\n                }\r\n            }\r\n\r\n            return {\r\n                trident: u.indexOf('Trident') > -1, //IE�ں�\r\n                presto: u.indexOf('Presto') > -1, //opera�ں�\r\n                webKit: u.indexOf('AppleWebKit') > -1, //ƻ�����ȸ��ں�\r\n                gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1,//����ں�\r\n                mobile: !!u.match(/AppleWebKit.*Mobile.*/), //�Ƿ�Ϊ�ƶ��ն�\r\n                ios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios�ն�\r\n                android: u.indexOf('Android') > -1 || u.indexOf('Adr') > -1, //android�ն�\r\n                iPhone: u.indexOf('iPhone') > -1, //�Ƿ�ΪiPhone����QQHD�����\r\n                iPad: u.indexOf('iPad') > -1, //�Ƿ�iPad\r\n                webApp: u.indexOf('Safari') == -1, //�Ƿ�webӦ�ó���û��ͷ����ײ�\r\n                weixin: u.indexOf('MicroMessenger') > -1, //�Ƿ�΢��\r\n                weibo: (u.match(/WeiBo/i) == \"WeiBo\") || (u.match(/Weibo/i) == \"Weibo\") || (u.match(/weibo/i) == \"weibo\"),\r\n                qq: (u.match(/qq/i) == \"qq\") || (u.match(/QQ/i) == \"QQ\"),  //�Ƿ�QQ\r\n                qqBrower: (u.indexOf(\"Mobile MQQBrowser\") == -1) && (u.indexOf(\"MQQBrowser\") != -1),\r\n                isInApp: u.indexOf('Ourydc.Yuebaobao') > -1,\r\n                locAppVersion: locAppVersion\r\n\r\n            };\r\n        }(),\r\n        language: (navigator.browserLanguage || navigator.language).toLowerCase()\r\n    },\r\n\r\n    /**\r\n     * 验证账号格式\r\n     */\r\n    checkAccount(name) {\r\n        var patt = /^[a-zA-Z](\\w|\\s+){5,15}$/;\r\n        return patt.test(this.trim(name ? name : ''))\r\n    },\r\n    checkUrl(name) {\r\n        var patt = /^((ht|f)tps?):\\/\\/([\\w\\-]+(\\.[\\w\\-]+)*\\/)*[\\w\\-]+(\\.[\\w\\-]+)*\\/?(\\?([\\w\\-\\.,@?^=%&:\\/~\\+#]*)+)?/;\r\n        return patt.test(this.trim(name ? name : ''))\r\n    },\r\n\r\n    \r\n\r\n/**\r\n     * 对接人\r\n     */\r\n    Reg(str = '') {\r\n        var patt =  /^[^\\u4e00-\\u9fa5]{5,31}$/;\r\n        return patt.test(this.trim(str ? str : ''))\r\n    },\r\n    \r\n   \r\n    /**\r\n     * 验证密码格式\r\n     */\r\n    checkPassword(password = '') {\r\n        var patt = /^.{6,16}$/;\r\n        return patt.test(this.trim(password ? password : ''))\r\n    },\r\n    /**\r\n     * 去除左右空格\r\n     */\r\n    trim(s) {\r\n        s = `${s}`;\r\n        return s.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n    },\r\n\r\n    /**\r\n      * 获取对应名称的cookie\r\n      * @param name cookie的名称\r\n      * @returns {null} 不存在时，返回null\r\n      */\r\n    getCookie(name) {\r\n        var arr;\r\n        var reg = new RegExp(\"(^| )\" + name + \"=([^;]*)(;|$)\");\r\n        if (arr = document.cookie.match(reg))\r\n            return unescape(arr[2]);\r\n        else\r\n            return null;\r\n    },\r\n\r\n\r\n    required(s) {\r\n\r\n        let str = this.trim(s ? s : '')\r\n        if (str && str.length) {\r\n            return true\r\n        } else {\r\n            return false\r\n        }\r\n    },\r\n\r\n    legnthCheck(s='',type='INPUT'){\r\n        let str = this.trim(s? s : '')\r\n        return str.length<this.LENGTH[type]\r\n    },\r\n\r\n    LENGTH: {\r\n        URL:500,\r\n        TEXTAREA:200,\r\n        INPUT:50\r\n    },\r\n\r\n    /**\r\n     * 获取URL中的参数\r\n     * @param name\r\n     * @returns {string}\r\n     */\r\n    getQueryString(name) {\r\n        var reg = new RegExp(\"(^|&|[?])\" + name + \"=([^&]*)(&|$)\")\r\n        var r = window.location.href.substr(1).match(reg)\r\n        var newName = (r != null ? r[2] : \"\")\r\n        return newName\r\n    },\r\n\r\n\r\n    /**\r\n     * 获取str中的参数\r\n     * @param name\r\n     * @returns {string}\r\n     */\r\n    getParamString(str, name) {\r\n        var reg = new RegExp(\"(^|&|[?])\" + name + \"=([^&]*)(&|$)\")\r\n        var r = str.substr(1).match(reg)\r\n        var newName = (r != null ? r[2] : \"\")\r\n        return newName\r\n    },\r\n    Trim(str) { //去除空格\r\n        return str.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n    },\r\n\r\n    /**\r\n     * 获取设备名称\r\n     * @returns {string}\r\n     */\r\n    deviceCheck() {\r\n        var device = \"\";\r\n        if (browser.versions.mobile) {\r\n            if (browser.versions.android) {\r\n                device = \"android\";\r\n            } else if (browser.versions.ios) {\r\n                device = \"ios\";\r\n            } else {\r\n                device = \"mobile\";\r\n            }\r\n        } else {\r\n            device = \"web\";\r\n        }\r\n        return device;\r\n    }\r\n}","import { connect } from 'react-redux'\r\nimport { getShopList, getProductList } from '../../../../js/actions/dealer'\r\nimport Tpl from './tpl'\r\nimport axios from '../../../../js/common/ajax'\r\nimport { message as Msg } from 'antd'\r\n// import { LoadingModal } from '../../../components/LoadingModal/LoadingModal'\r\nimport utils from '../../../../js/common/lib'\r\n\r\n\r\n@connect(state => (\r\n  {\r\n    shopList: state.dealer.shopList,\r\n    productList: state.dealer.productList\r\n  }\r\n))\r\nclass ActivityDeclaration extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      addActivityProductList: [{\r\n        product_id: '',\r\n        product_url: '',\r\n        apply_price: '',\r\n        actual_price: '',\r\n        campaign_type: '',\r\n        gift_situation: '',\r\n        play_content: '',\r\n        prices_map: '',\r\n      }], // 添加活动产品列表\r\n      shop_id: '', // 店铺编号\r\n      campaign_name: '', // 活动主题\r\n      start_time: Date.now(), // 开始时间\r\n      end_time: Date.now(), // 结束时间\r\n      campaign_desc: '', // 活动描述\r\n      // prices_map: {} // 价格map\r\n      // selectHttp: 'Http://'\r\n    }\r\n  }\r\n  componentWillMount() {\r\n      let {shop_id} = this.state;\r\n    const { dispatch } = this.props\r\n    dispatch(getShopList())\r\n    dispatch(getProductList())\r\n  }\r\n  checkInputLength = list => {\r\n    const LIST = {\r\n      'product_url': {\r\n        label: '商品链接',\r\n        type: 'URL'\r\n      },\r\n      // 'apply_price': {\r\n      //   label: '申请标价',\r\n      //   type: 'INPUT'\r\n      // },\r\n      // 'actual_price': {\r\n      //   label: '实际成交价',\r\n      //   type: 'INPUT'\r\n      // },\r\n      'campaign_type': {\r\n        label: '活动类型',\r\n        type: 'INPUT'\r\n      },\r\n      'gift_situation': {\r\n        label: '赠品情况',\r\n        type: 'TEXTAREA'\r\n      },\r\n      'play_content': {\r\n        label: '玩法说明',\r\n        type: 'TEXTAREA'\r\n      }\r\n    }\r\n    if (list.length) {\r\n      const arr = list.map((v, i) => {\r\n        return Object.keys(v).map(key => {\r\n          if (LIST[key] && !utils.legnthCheck(v[key], LIST[key].type)) {\r\n            return `请把${i+1}号产品的${LIST[key].label}限制在${utils.LENGTH[LIST[key].type]}字符内！`\r\n          }\r\n        })\r\n      })\r\n      const temList = arr.reduce((a, b) => a.concat(b), []).filter(v => v !== undefined)\r\n      // console.log('---------------arr', temList)\r\n      if (temList.length) {\r\n        temList.forEach(msg => Msg.warning(msg))\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    } else {\r\n      Msg.warning('请至少添加一个活动产品！')\r\n      return false\r\n    }\r\n  }\r\n  // 提交表单\r\n  handleSubmit = e => {\r\n    const {\r\n      shop_id,\r\n      campaign_name,\r\n      start_time,\r\n      end_time,\r\n      campaign_desc,\r\n      addActivityProductList\r\n    } = this.state\r\n    if (localStorage.getItem('logintype') !== 'SHOP' && shop_id === '') {\r\n      Msg.warning('请选择店铺！')\r\n      return\r\n    }\r\n    if (campaign_name === '') {\r\n      Msg.warning('请输入活动主题！')\r\n      return\r\n    }\r\n    if (start_time === end_time) {\r\n      Msg.warning('请选择活动时间！')\r\n      return\r\n    }\r\n    if (!this.checkInputValue(addActivityProductList)) {\r\n      Msg.warning('请完善活动产品信息！')\r\n      return\r\n    }\r\n    if (!utils.legnthCheck(campaign_name, 'INPUT')) {\r\n      Msg.warning(`请把活动主题限制在${utils.LENGTH.INPUT}字符内！`)\r\n      return\r\n    }\r\n    if (campaign_desc && !utils.legnthCheck(campaign_desc, 'TEXTAREA')) {\r\n      Msg.warning(`请把活动说明限制在${utils.LENGTH.TEXTAREA}字符内！`)\r\n      return\r\n    }\r\n    if (!this.checkInputLength(addActivityProductList)) return\r\n    const shop_name = this.props.shopList.length?this.props.shopList.filter(v => v.id === shop_id)[0].shop_name:'';\r\n    const list = addActivityProductList.slice()\r\n    const data = {\r\n      // shop_id,\r\n      // shop_name,\r\n      campaign_name,\r\n      start_time,\r\n      end_time,\r\n      campaign_desc,\r\n      cplist: list.map(\r\n        v => {\r\n          const product_id = v.product_id[1]\r\n          // const product_url = v.selectHttp + v.product_url\r\n          return Object.assign({}, v, {product_id})\r\n        }\r\n      )\r\n    }\r\n    if (localStorage.getItem('logintype') !== 'SHOP') {\r\n      data.shop_id = shop_id\r\n      data.shop_name = shop_name\r\n    }\r\n    // console.log(data)\r\n    // return\r\n    LoadingModal({bl:true})\r\n    axios({\r\n      method: 'post',\r\n      url: '/hcm/campgign/Apply',\r\n      transformRequest: [function (data, headers) {\r\n        return data;\r\n      }],\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=utf-8'\r\n      },\r\n      data: JSON.stringify(data)\r\n    }).then(res => {\r\n      LoadingModal({bl:false})\r\n      const {data, status, message} = res.data\r\n      if (status === '10000') {\r\n        Msg.success(message)\r\n        this.handleClearForm()\r\n      } else {\r\n        Msg.error(message)\r\n      }\r\n    }).catch(err => {\r\n      LoadingModal({bl:false})\r\n      Msg.error('网络繁忙，请稍后再试！')\r\n    })\r\n  }\r\n  handleSelectBeforeChange = (index, value) => {\r\n    const { addActivityProductList } = this.state\r\n    const list = addActivityProductList.slice()\r\n    // list[index].selectHttp = value\r\n    this.setState({\r\n      addActivityProductList: list\r\n    })\r\n  }\r\n  // 清空表单\r\n  handleClearForm = () => {\r\n    this.setState({\r\n      shop_id: '',              // 店铺编号\r\n      campaign_name: '',        // 活动主题\r\n      start_time: Date.now(),           // 开始时间\r\n      end_time: Date.now(),             // 结束时间\r\n      campaign_desc: '', \r\n      addActivityProductList: [{\r\n        product_id: '',\r\n        product_url: '',\r\n        apply_price: '',\r\n        actual_price: '',\r\n        campaign_type: '',\r\n        gift_situation: '',\r\n        play_content: '',\r\n        prices_map: '',\r\n      }]\r\n    })\r\n  }\r\n  // 删除产品\r\n  handleDeleteProduct = index => {console.log(index)\r\n    const { addActivityProductList } = this.state\r\n    let list = [...addActivityProductList]\r\n    list.splice(index, 1)\r\n    this.setState({\r\n      addActivityProductList: list\r\n    })\r\n  }\r\n  // 选择活动日期\r\n  handleSwitchDateChange = dates => {console.log(dates)\r\n    this.setState({\r\n      start_time: dates.length === 0 ? Date.now() : dates[0].valueOf(),\r\n      end_time: dates.length === 0 ? Date.now() : dates[1].valueOf()\r\n    })\r\n  }\r\n  // 选择店铺\r\n  handleSwitchShopChange = (value) => {\r\n      console.log(value)\r\n      const { dispatch } = this.props\r\n    dispatch(getProductList(value))\r\n    this.setState({\r\n      shop_id: value\r\n    })\r\n  }\r\n  // 选择产品\r\n  handleSwitchProductChange = (index, value, selectOption) => {\r\n    // console.log(value)\r\n    const { addActivityProductList } = this.state\r\n    const list = addActivityProductList.slice()\r\n    list[index].product_id = value\r\n    this.setState({\r\n      addActivityProductList: list\r\n    })\r\n    value.length === 2 && this.getProductPrices(value[1], index)\r\n  }\r\n  // inputchange事件回调（params: {flag: false(产品信息)true(活动信息)，key: 更改的字段, event: 事件对象)}）\r\n  handleInputChange = (params) => {\r\n    const {flag, key, event, index = 0} = params\r\n    if (!flag) {\r\n      // 修改产品信息\r\n      const list = [...this.state.addActivityProductList]\r\n      const obj = {...list[index]}\r\n      obj[key] = typeof event === 'object' ? event.target.value : event\r\n      list[index] = obj\r\n      this.setState({\r\n        addActivityProductList: list\r\n      })\r\n    } else {\r\n      // 修改活动信息\r\n      this.setState({\r\n        [key]: event.target.value\r\n      })\r\n    }\r\n  }\r\n  // 获取产品价格\r\n  getProductPrices = (id, index) => {\r\n    axios({\r\n      method: 'post',\r\n      url: '/hcm/campgign/productPrice',\r\n      data: {\r\n        product_id: id\r\n      }\r\n    }).then(res => {\r\n      const { data, status, message } = res.data\r\n      const { addActivityProductList } = this.state\r\n      const list = addActivityProductList.slice()\r\n      list[index].prices_map = data\r\n      if (status === '10000') {\r\n        this.setState({\r\n          addActivityProductList: list\r\n        })\r\n      }\r\n    }).catch()\r\n  }\r\n  // 验证产品信息是否完整\r\n  checkInputValue = list => {\r\n    const arr = list.map(v => Object.keys(v).every(val => v[val] !== '' && !!v.apply_price && !!v.actual_price))\r\n    return arr.every(v => v === true)\r\n  }\r\n  // 添加产品\r\n  handleAddClick = index => {\r\n    const { addActivityProductList, shop_id, campaign_name, start_time, end_time } = this.state\r\n    addActivityProductList.push({\r\n      product_id: '',\r\n      product_url: '',\r\n      apply_price: '',\r\n      actual_price: '',\r\n      campaign_type: '',\r\n      gift_situation: '',\r\n      play_content: '',\r\n      prices_map: '',\r\n      // selectHttp: 'Http://'\r\n    })\r\n    this.setState({\r\n      addActivityProductList\r\n    })\r\n  }\r\n  render() {\r\n    return <Tpl that={this} />\r\n  }\r\n}\r\n\r\nexport default ActivityDeclaration"],"sourceRoot":""}