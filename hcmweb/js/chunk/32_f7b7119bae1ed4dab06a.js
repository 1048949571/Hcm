(window.webpackJsonp=window.webpackJsonp||[]).push([[32,68],{1157:function(e,t){},1158:function(e,t){},1159:function(e,t){},1160:function(e,t){},1161:function(e,t){},1162:function(e,t){},1163:function(e,t){},1172:function(e,t){},1175:function(e,t){},25:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(54));n(53);var r=a(n(28));function a(e){return e&&e.__esModule?e:{default:e}}n(1157);var o=function(t){return e.createElement("div",{className:"layout-wrapper "+(t.className||"")},e.createElement("div",{className:"header-wrapper"},e.createElement(i.default,{className:"breadcrumb"},t.breadcrumbList.map(function(n,r){return""===t.linkList[r]?e.createElement(i.default.Item,{key:n},n):e.createElement(i.default.Item,{href:"javascript:;",key:n},e.createElement("span",{onClick:function(){t.history.go(-t.linkList[r])}},n))}))),e.createElement("div",{className:"layout-content"},t.children),e.createElement("div",{className:"copyright"},e.createElement(r.default,null)))};o.defaultProps={title:"标题",breadcrumbList:[],linkList:[]},t.default=o}).call(this,n(1))},28:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var i=function(t){function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,e.Component),n(i,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return e.createElement("div",{className:this.props.clazzName?this.props.clazzName:"Copyright"},"Copyright © 杭州久点网络技术有限公司")}}]),i}();t.default=i}).call(this,n(1))},433:function(e,t){},595:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=g(n(236)),r=g(n(33)),a=g(n(32)),o=g(n(35)),l=g(n(45)),u=g(n(37)),c=g(n(14)),s=g(n(30)),d=g(n(27)),f=g(n(134)),m=g(n(24));n(235),n(41),n(42),n(34),n(46),n(36),n(18),n(31),n(26),n(133),n(23);var h=g(n(17)),p=g(n(25));function g(e){return e&&e.__esModule?e:{default:e}}m.default.Item;var b=f.default.TreeNode,y=d.default.TextArea,v=(s.default.Option,(0,h.default)(function(t){var n=t.state,i=n.pageNo,r=n.pageSize,a=n.totalNum,o=n.list;return e.createElement(p.default,{breadcrumbList:["角色管理"],linkList:[""]},e.createElement("div",{className:"role"},e.createElement("div",{className:"but-box"},e.createElement(c.default,{onClick:function(){return t.onVisible(!0)}},"新增角色")),e.createElement("div",{className:"content"},e.createElement(u.default,{rowKey:"id",pagination:!1,dataSource:o,columns:t.columns()}),e.createElement("div",{className:"footer"},e.createElement("div",{className:"info"},"共 "+a+" 条记录 ","  ","第  "+i+"  / "+Math.ceil(a/r)+" 页"),e.createElement(l.default,{pageSize:r,current:i,total:a,onChange:t.changePagination,onShowSizeChange:t.onPaginationSize,showSizeChanger:!0,showQuickJumper:!0}))),e.createElement(w,{that:t}),e.createElement(E,{that:t})))})),E=(0,h.default)(function(t){var n=t.state,i=n.menuList,r=n.checkedKeys,a=n.AuthorizationVisible;return e.createElement(o.default,{title:"授权",maskClosable:!1,visible:a,onCancel:function(){return t.AuthorizationVisible(!1,null,null,[])},onOk:t.SubmitAuthorization},e.createElement(f.default,{checkedKeys:r,onCheck:function(e,n){return t.onCheckBox(e,n)},checkStrictly:!0,checkable:!0},function t(n){return n.map(function(n){return n.children?e.createElement(b,{title:e.createElement("span",null,n.menuAlias),key:n.id},t(n.children)):e.createElement(b,{title:e.createElement("span",null,n.menuAlias),key:n.id})})}(i)))}),w=(0,h.default)(function(t){var n=t.state,l=n.roleName,u=n.sortNumber,c=n.roleDescription,s=n.visible;return e.createElement(o.default,{title:"角色操作",maskClosable:!1,visible:s,onOk:t.handleOk,onCancel:function(){return t.onVisible(!1)}},e.createElement(r.default,{style:{marginBottom:10},align:"middle",type:"flex"},e.createElement(a.default,{pull:1,className:"text-right required",span:6},"角色名称:"),e.createElement(a.default,{span:18},e.createElement(d.default,{onChange:function(e){return t.onChange(e,"roleName")},value:l,placeholder:"请输入角色名称"}))),e.createElement(r.default,{style:{marginBottom:10},align:"middle",type:"flex"},e.createElement(a.default,{pull:1,className:"text-right required",span:6},"排序:"),e.createElement(a.default,{span:18},e.createElement(i.default,{onChange:function(e){return t.onChange(e,"sortNumber")},value:u,placeholder:"请输入角色排序",style:{width:"100%"}}))),e.createElement(r.default,{style:{marginBottom:10},align:"top",type:"flex"},e.createElement(a.default,{pull:1,className:"text-right",span:6},"角色描述:"),e.createElement(a.default,{span:18},e.createElement(y,{onChange:function(e){return t.onChange(e,"roleDescription")},value:c,placeholder:"请输入角色描述",rows:4}))))});t.default=v}).call(this,n(1))},62:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={onVisibilityChange:function(e,t){var n="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,i=n.replace(/hidden/i,"visibilitychange"),r=function(){document[n]||console.log("页面非激活"+new Date),document[n]&&console.log("页面激活"+new Date)};document.addEventListener(i,r)},formatAccount:function(e){return e=e.replace(/[\s]/g,"").replace(/(\d{4})(?=\d)/g,"$1 ")},formatThousandMoney:function(t,n){return isNaN(t)?"":(n=n||"",!1===e.isNumeric(t)||0==t?"0.00":0==(t=(t=+t).toFixed(2))?"0.00":n+" "+(t+"").replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,"))},encryption:function(){return(""+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")).replace(/(\d{3})\d*([0-9a-zA-Z]{4})/,"$1****$2")},browser:{versions:function(){var e=navigator.userAgent,t=(navigator.appVersion,"");if(e.indexOf("Ourydc.Yuebaobao")>-1){var n=e.match(/Ourydc.Yuebaobao.*/);if(n.length>0){var i=n[0];t=i.substr(i.indexOf("/")+1)}}return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,weibo:"WeiBo"==e.match(/WeiBo/i)||"Weibo"==e.match(/Weibo/i)||"weibo"==e.match(/weibo/i),qq:"qq"==e.match(/qq/i)||"QQ"==e.match(/QQ/i),qqBrower:-1==e.indexOf("Mobile MQQBrowser")&&-1!=e.indexOf("MQQBrowser"),isInApp:e.indexOf("Ourydc.Yuebaobao")>-1,locAppVersion:t}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},checkAccount:function(e){return/^[a-zA-Z](\w|\s+){5,15}$/.test(this.trim(e||""))},checkUrl:function(e){return/^((ht|f)tps?):\/\/([\w\-]+(\.[\w\-]+)*\/)*[\w\-]+(\.[\w\-]+)*\/?(\?([\w\-\.,@?^=%&:\/~\+#]*)+)?/.test(this.trim(e||""))},Reg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^[^\u4e00-\u9fa5]{5,31}$/.test(this.trim(e||""))},checkPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^.{6,16}$/.test(this.trim(e||""))},trim:function(e){return(e=""+e).replace(/(^\s*)|(\s*$)/g,"")},getCookie:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null},required:function(e){var t=this.trim(e||"");return!(!t||!t.length)},legnthCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INPUT";return this.trim(e||"").length<this.LENGTH[t]},LENGTH:{URL:500,TEXTAREA:200,INPUT:50},getQueryString:function(e){var t=new RegExp("(^|&|[?])"+e+"=([^&]*)(&|$)"),n=window.location.href.substr(1).match(t);return null!=n?n[2]:""},getParamString:function(e,t){var n=new RegExp("(^|&|[?])"+t+"=([^&]*)(&|$)"),i=e.substr(1).match(n);return null!=i?i[2]:""},Trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},deviceCheck:function(){return browser.versions.mobile?browser.versions.android?"android":browser.versions.ios?"ios":"mobile":"web"}}}).call(this,n(112))},765:function(e,t){},766:function(e,t){},915:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i,r,a=m(n(24)),o=m(n(15)),l=m(n(35)),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(23),n(16),n(34);var s=m(n(595)),d=m(n(12)),f=m(n(62));function m(e){return e&&e.__esModule?e:{default:e}}var h=l.default.confirm,p=(i=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return r.call(t),t.state={columnsList:[],version:null,list:[],visible:!1,id:null,roleName:null,sortNumber:null,roleDescription:null,rolename:null,pageNo:1,pageSize:10,totalNum:0,menuList:[],checkedKeys:[],AuthorizationVisible:!1,targetId:null},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),c(n,[{key:"componentDidMount",value:function(){this.getList(),this.getMenuList(),this.getColumnsList()}},{key:"render",value:function(){return e.createElement(s.default,{that:this})}}]),n}(),r=function(){var t=this;this.AuthorizationVisible=function(e,n,i,r){t.setState({version:i,AuthorizationVisible:e,targetId:n,checkedKeys:r})},this.SubmitAuthorization=function(){var e=t.state,n=e.targetId,i=e.version,r=e.checkedKeys;d.default.post("/hcm/saveMenuqx",{roleId:n,version:i,menuIds:r.join(",")}).then(function(e){t.AuthorizationVisible(!1,null,null,[]),t.getList(),o.default.success(e.data.message)})},this.onVisible=function(e){e?t.setState({visible:e}):t.setState({visible:e,id:null,roleName:null,sortNumber:null,roleDescription:null})},this.onCheckBox=function(e,n){var i=n.node.props,r=new Set(t.state.checkedKeys);console.log(i),i.children?i.checked?(r.delete(i.eventKey),i.children.forEach(function(e,t){r.delete(e.key)})):(r.add(i.eventKey),i.children.forEach(function(e,t){r.add(e.key)})):i.checked?r.delete(i.eventKey):r.add(i.eventKey),t.setState({checkedKeys:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r))})},this.getMenuList=function(){d.default.get("/hcm/menu/getList",{params:{type:"ALL"}}).then(function(e){t.setState({menuList:e.data.data})})},this.handleOk=function(){var e=t.state,n=e.roleName,i=e.sortNumber,r=e.roleDescription,a=e.id;f.default.required(n)?f.default.required(i)?f.default.legnthCheck(n,"INPUT")?f.default.legnthCheck(i,"INPUT")?f.default.legnthCheck(r,"URL")?d.default.post("/hcm/role/save",{roleName:n,sortNumber:i,roleDescription:r,id:a}).then(function(e){t.getList()}):o.default.warning("备注字符不允许超过500"):o.default.warning("排序号码字符不允许超过50"):o.default.warning("角色名称字符不允许超过50"):o.default.warning("请输入排序号码"):o.default.warning("请输入角色名称")},this.onChange=function(e,n){t.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,"object"===(void 0===e?"undefined":u(e))?e.target.value:e))},this.getList=function(){var e=t.state,n=e.pageNo,i=e.pageSize,r=e.rolename;d.default.get("/hcm/role/getRolePage",{params:{pageNo:n,pageSize:i,rolename:r}}).then(function(e){t.setState({list:e.data.data.content,pageNo:e.data.data.pageNumber,pageSize:e.data.data.pageSize,totalNum:e.data.data.totalElements}),t.onVisible(!1)})},this.columns=function(){var n=[{title:"排序",dataIndex:"sort_number",key:"sort_number"},{title:"ID",dataIndex:"id",key:"id"},{title:"角色名称",dataIndex:"role_name",key:"role_name"},{title:"备注",dataIndex:"role_description",key:"role_description"}];return t.state.columnsList.forEach(function(i,r){n.push({title:i.dictName,dataIndex:i.id,key:i.id,render:function(n,r,a){return e.createElement("a",{onClick:function(){return t.AuthorizationVisible(!0,r.id,i.id,r[""+i.id]?r[""+i.id].split(","):[])}},"授权")}})}),n.push({title:"操作",dataIndex:"action",key:"action",align:"right",render:function(n,i,r){return e.createElement(e.Fragment,null,e.createElement("a",{onClick:function(){return t.itemEdit(i)},style:{marginLeft:20}},"编辑"),+i.id<50?null:e.createElement("a",{onClick:function(){return t.rmEdit(i)},style:{marginLeft:20}},"删除"))}}),n},this.getColumnsList=function(){d.default.get("/hcm/sys/GetList",{params:{dictcode:"version"}}).then(function(e){t.setState({columnsList:e.data.data})})},this.rmEdit=function(n){var i=t;h({title:null,content:e.createElement("div",null,e.createElement("div",{className:"tips"},"提示"),e.createElement("div",{className:"pline"}),e.createElement("p",{className:"Dtitle"},"你确定要删除该角色吗?"),e.createElement("p",null,"删除后",e.createElement("span",{className:"red"},"无法恢复！"))),okText:"删除",cancelText:"取消",className:"alert-item-confirm",onOk:function(){d.default.post("/hcm/role/delete",{roleId:n.id}).then(function(e){i.getList(),"10000"===e.data.status?o.default.success(e.data.message):o.default.error(e.data.message)})}})},this.itemEdit=function(e){t.setState({id:e.id,roleName:e.role_name,sortNumber:e.sort_number,roleDescription:e.role_description},t.onVisible(!0))},this.changePagination=function(e,n){t.setState({pageNo:e,pageSize:n},function(){t.getList()})},this.onPaginationSize=function(e,n){t.setState({pageNo:1,pageSize:n},function(){t.getList()})}},i);t.default=a.default.create()(p)}).call(this,n(1))}}]);