(window.webpackJsonp=window.webpackJsonp||[]).push([[251],{897:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n,o=m(a(24)),s=m(a(15)),l=m(a(30)),r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(23),a(16),a(31);var i=m(a(642)),p=m(a(12)),u=a(123),c=a(161),d=a(628),f=a(398);function m(e){return e&&e.__esModule?e:{default:e}}var h=l.default.Option,g=(0,u.connect)(function(e,t){return{collapsed:e.collapsed,brandList:e.dealer.brandList}},function(e,t){return(0,c.bindActionCreators)({toggleCollapsed:d.toggleCollapsed,getBrandList:f.getBrandList,setCurrentBrand:f.setCurrentBrand},e)})(n=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.ForgetSubmit=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(console.log(a),!e)if(1==t.state.XZ){if(null!=a.shop_type)if(null!=a.mcids&&""!=a.mcids){if(""!=t.state.codeValue&&null!=t.state.codeValue&&""!=a.FieldName.label)if(""!=a.shop_name&&null!=a.shop_name)if(""!=a.shop_url&&null!=a.shop_url)if(""!=a.shop_type&&null!=a.shop_type)if(0!=t.state.WangWAN)""!=a.wangwang&&null!=a.wangwang?(console.log(1),t.setState({XZ:!1,BJ:!1},function(){p.default.post("/hcm/dealerShop/Create",{platform_code:t.state.codeValue,shop_name:a.shop_name,wangwang:a.wangwang,shop_url:a.shop_url.replace(/\+/g,"%2B").replace(/\&/g,"%26").replace(/\=/g,"%27"),shop_type:a.shop_type,status:0,bmcids:a.mcids.join(",")}).then(function(e){if(console.log(e),1e4==e.data.status){t.setState({visible:!1,confirmLoading:!1,XZ:!1,BJ:!1,WangWAN:!1}),t.StoreManagement_list();var a=t.props.form,n=a.resetFields;a.getFieldsValue;n()}else t.setState({XZ:!0,BJ:!1}),s.default.error(e.data.message)})})):s.default.error("请输入旺旺！");else{p.default.post("/hcm/dealerShop/Create",{platform_code:t.state.codeValue,shop_name:a.shop_name,wangwang:"",shop_url:a.shop_url.replace(/\+/g,"%2B").replace(/\&/g,"%26").replace(/\=/g,"%27"),shop_type:a.shop_type,status:0,bmcids:a.mcids.join(",")}).then(function(e){if(console.log(e),1e4==e.data.status){t.setState({visible:!1,confirmLoading:!1,XZ:!1,BJ:!1,WangWAN:!1});var a=t.props.form,n=a.resetFields;a.getFieldsValue;n(),t.StoreManagement_list()}else s.default.error(e.data.message)})}else s.default.error("请输入店铺类型名称！");else s.default.error("请输入店铺首页地址名称！");else s.default.error("请输入店铺名称！");else s.default.error("请选择平台！")}else s.default.error("请选择要新增的授权品牌方！")}else if(1==t.state.BJ&&null!=a.shop_type)if(null!=a.mcids&&""!=a.mcids){""!=t.state.codeValue&&null!=t.state.codeValue||""!=a.FieldName.key||null!=a.FieldName.key?""!=a.shop_name&&null!=a.shop_name?""!=a.shop_url&&null!=a.shop_url?""!=a.shop_type?0!=t.state.WangWAN?""!=a.wangwang&&null!=a.wangwang?p.default.post("/hcm/dealerShop/Update",{platform_code:a.FieldName.key,shop_name:a.shop_name,wangwang:a.wangwang,shop_url:a.shop_url.replace(/\+/g,"%2B").replace(/\&/g,"%26").replace(/\=/g,"%27"),shop_type:a.shop_type,id:t.state.id,status:0,bmcids:a.mcids.join(",")}).then(function(e){if(1e4==e.data.status){t.StoreManagement_list(),t.setState({visible:!1,confirmLoading:!1,XZ:!1,BJ:!1,WangWAN:!1});var a=t.props.form,n=a.resetFields;a.getFieldsValue;n()}else s.default.error(e.data.message)}):s.default.error("请输入旺旺！"):p.default.post("/hcm/dealerShop/Update",{platform_code:a.FieldName.key,shop_name:a.shop_name,wangwang:"",shop_url:a.shop_url.replace(/\+/g,"%2B").replace(/\&/g,"%26").replace(/\=/g,"%27"),shop_type:a.shop_type,id:t.state.id,status:0,bmcids:a.mcids.join(",")}).then(function(e){if(1e4==e.data.status){t.StoreManagement_list(),t.setState({visible:!1,confirmLoading:!1,XZ:!1,BJ:!1,WangWAN:!1});var a=t.props.form,n=a.resetFields;a.getFieldsValue;n()}else s.default.error(e.data.message)}):s.default.error("请输入店铺类型名称！"):s.default.error("请输入店铺首页地址名称！"):s.default.error("请输入店铺名称！"):s.default.error("请选择平台！")}else s.default.error("请选择要编辑的授权品牌方！")})},t.addStore=function(){var e=t.props.form,a=e.resetFields;e.getFieldsValue;a(),console.log(t.state.FieldName),t.setState({visible:!0,confirmLoading:!0,type:"新增",XZ:!0,FieldName:"",FieldID:"",shop_name:"",wangwang:"",shop_url:"",shop_type:"",mcids:[],bmcShopList:[]})},t.BJStore=function(e){var a=[];e.bmcShopList.forEach(function(e,t){a.push({key:e.bmcid,value:e.bmcname})}),t.setState({visible:!0,confirmLoading:!0,type:"编辑",BJ:!0,FieldName:e.platform_name,FieldID:e.platform_code,shop_name:e.shop_name,wangwang:e.wangwang,shop_url:e.shop_url.replace(/\%2B/g,"+").replace(/\%26/g,"&").replace(/\%27/g,"="),shop_type:e.shop_type,bmcShopList:e.bmcShopList,mcidsx:e.bmcShopList[0].bmcname,mcidsID:e.bmcShopList[0].bmcid,id:e.id}),"淘宝网"==e.platform_name||"天猫商城"==e.platform_name||"1688"==e.platform_name||"速卖通"==e.platform_name?t.setState({WangWAN:!0}):t.setState({WangWAN:!1})},t.handleChange=function(e){"淘宝网"==e.label||"天猫商城"==e.label||"1688"==e.label||"速卖通"==e.label?t.setState({WangWAN:!0,codeValue:e.key}):t.setState({WangWAN:!1,codeValue:e.key})},t.handleChangesx=function(e){t.setState({mcids:e.join(",")})},t.StoreManagement_list=function(){p.default.get("/hcm/hcmShop/findShopsByDealer").then(function(e){1e4==e.data.status&&(t.setState({StoreManagement_list:e.data.data}),console.log(t.state.StoreManagement_list))})},t.BtnFun=function(){t.setState({userName:""})},t.SearchFun=function(e){p.default.get("/hcm/hcmShop/findShopsByDealer",{params:{shop_name:e}}).then(function(e){1e4==e.data.status&&t.setState({StoreManagement_list:e.data.data})})},t.DeleList=function(e){p.default.post("/hcm/dealerShop/Delete",{id:e.target.getAttribute("id")}).then(function(e){1e4==e.data.status&&t.StoreManagement_list()})},t.handleCancel=function(){var e=t.props.form,a=e.resetFields;e.getFieldsValue;a(),t.setState({visible:!1,confirmLoading:!1,XZ:!1,BJ:!1,WangWAN:!1})},t.state={type:"新增",codeValue:"",userName:"1",onChangeSele:"",visible:!1,Editvisible:!1,confirmLoading:!1,StoreManagement_list:[],FieldName:"",FieldID:"",shop_name:"",wangwang:"",shop_url:"",shop_type:"",children:[],mcids:[],mcidx:[],mcidsID:"",childrenx:[],bmcShopList:[],BJ:!1,XZ:!1,id:"",StoreManagement:"",WangWAN:!1},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e.Component),r(a,[{key:"componentDidMount",value:function(){var t=this;this.StoreManagement_list();for(var a=10;a<36;a++)this.state.children.push(e.createElement(h,{key:a.toString(36)+a},a.toString(36)+a));this.setState({StoreManagement:can.platform||[]},function(){t.state.StoreManagement.forEach(function(a,n){t.state.childrenx.push(e.createElement(h,{key:a.id},a.dictName))})})}},{key:"render",value:function(){return e.createElement(i.default,{that:this})}}]),a}())||n;t.default=o.default.create()(g)}).call(this,a(1))}}]);