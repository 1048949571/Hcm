{"version":3,"sources":["webpack:///./app/widget/components/ImgModal/ImgModal.js","webpack:///./app/widget/components/ImgModal/ImgModal.less","webpack:///./app/widget/index/Dealers/ActivityInspectionPublicity/main.js"],"names":["App","props","state","index","rotate","size","bl","urls","length","setState","ReactDom","unmountComponentAtNode","document","getElementById","getElementsByTagName","removeChild","close","oImg","createElement","src","naturalWidth","naturalHeight","console","log","colse","width","transform","onSwitch","onSize","onRotate","textAlign","fontSize","React","Component","ImgModal","page","div","setAttribute","body","appendChild","render","ActivityInspectionPublicity","formatTime","timestamp","showTime","date","Date","str","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes","getInspectPublicList","params","ser_date","method","url","data","pageSize","pageNum","shop_ids","shop_id","then","res","status","inspectInfoList","list","pagination","Object","assign","count","catch","getShopNum","shopBtnList","switchShopBtn","currentShopBtn","id","currentDate","switchActivity","type","selectedIndex","getInspectPublicSeven","sort","a","b","my_date","sevenData","handleLoadMoreClick","now","handleImgClick","moreButton","subtract","format"],"mappings":"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","file":"js/chunk/293_b9ba45078471c9875c38.js","sourcesContent":["// 图片弹层\r\n// ImgModal({bl:true,urls:urls,index:index,close:true})\r\n// bl:true||false  展示隐藏  默认false \r\n// urls:arr 图片集合\r\n// index： 默认展示数组中的第几张图片 默认值0\r\n// close: 是否展示关闭按钮\r\nimport './ImgModal.less';\r\nimport {Icon,message} from 'antd'\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            index:this.props.index,\r\n            rotate:0,\r\n            size:1\r\n        }\r\n    }\r\n    componentDidMount(){\r\n    }\r\n    onSwitch(bl){\r\n        let {index,rotate,size} = this.state;\r\n        let {urls} = this.props;\r\n        if(bl){\r\n            if(index == urls.length-1){\r\n                index = 0\r\n            }else{\r\n                index++\r\n            }\r\n        }else{\r\n            if(index<=0){\r\n                index = urls.length-1\r\n            }else{\r\n                index--\r\n            }\r\n        }\r\n        this.setState({\r\n            index,\r\n            rotate:0,\r\n            size:1\r\n        })\r\n    }\r\n    onSize(bl){\r\n        let {size} = this.state;\r\n        if(bl){\r\n            size+=0.5\r\n        }else{\r\n            size = size <= 0.5 ? 0.5 : size-0.5\r\n        }\r\n        this.setState({\r\n            size\r\n        })\r\n    }\r\n    onRotate(bl){\r\n        let {rotate} = this.state;\r\n        if(bl){\r\n            rotate+=90\r\n        }else{\r\n            rotate-=90\r\n            \r\n        }\r\n        this.setState({\r\n            rotate\r\n        })\r\n    }\r\n    colse(){\r\n        ReactDom.unmountComponentAtNode(document.getElementById('ImgModal'))\r\n        document.getElementsByTagName(\"body\")[0].removeChild(document.getElementById('ImgModal'));\r\n    }\r\n    render() {\r\n        let {urls=[],close=false} = this.props;\r\n        let {index=0,rotate,size} = this.state;\r\n        let oImg = document.createElement('img');\r\n        oImg.src = urls[index];\r\n        let naturalWidth = oImg.naturalWidth ? oImg.naturalWidth :400;\r\n        let naturalHeight = oImg.naturalHeight ? oImg.naturalHeight :400;\r\n        console.log(naturalWidth)\r\n        return (\r\n            <div  className='flexbox'>\r\n                <div className='imgbox'>\r\n                    {\r\n                        close ? \r\n                        <Icon className='close' onClick={()=>this.colse()} type=\"close-circle\" />\r\n                        :null\r\n                    }\r\n                    <div className='box'>\r\n                        <img style={{width:`${size*(naturalWidth>500?naturalWidth*0.7:naturalWidth)}px`,transform:`rotate(${rotate}deg)`}}  \r\n                        src={urls[index]} \r\n                        />\r\n                    </div>\r\n                    <div className='buts'>\r\n                        <Icon onClick={()=>this.onSwitch(false)} type=\"left\" />\r\n                        <Icon onClick={()=>this.onSwitch(true)} type=\"right\" />\r\n                        <Icon onClick={()=>this.onSize(true)} type=\"plus\" />\r\n                        <Icon onClick={()=>this.onSize(false)} type=\"minus\" />\r\n                        <Icon onClick={()=>this.onRotate(false)} className='left' type=\"reload\" />\r\n                        <Icon onClick={()=>this.onRotate(true)} className='right' type=\"reload\" />\r\n                    </div>\r\n                    <div style={{textAlign:'center',fontSize:'12px'}}>\r\n                        <a target='_blank' href={urls[index]}>查看原图</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport let ImgModal = function (page) {\r\n    let {bl=false,urls} =  page;\r\n    var div = document.createElement('div');\r\n    div.setAttribute(\"id\", \"ImgModal\");\r\n    if(bl){\r\n        document.body.appendChild(div);\r\n        ReactDom.render(React.createElement(App,page), document.getElementById('ImgModal'));\r\n    }else{\r\n        ReactDom.unmountComponentAtNode(document.getElementById('ImgModal'));\r\n        document.getElementsByTagName(\"body\")[0].removeChild(document.getElementById('ImgModal'));\r\n    }\r\n}\r\n\r\n","// removed by extract-text-webpack-plugin","import Tpl from './tpl'\r\nimport { ImgModal } from '../../../components/ImgModal/ImgModal'\r\nimport axios from '../../../../js/common/ajax'\r\nimport moment from 'moment'\r\n\r\nclass ActivityInspectionPublicity extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      selectedIndex: 6,\r\n      moreButton: false,\r\n      sevenData: [],\r\n      currentShopBtn: 'all',\r\n      shopBtnList: [],\r\n      inspectInfoList: [],\r\n      pagination: {\r\n        pageNum:1,\r\n        pageSize:10\r\n      },\r\n      ser_date:'',\r\n      // sevenActivity: {},  // 缓存每日活动店铺对象信息\r\n      // sevenProductInfo: {}, // 缓存每日活动产品对象信息\r\n      // productInfoList: [],    // 当前产品信息对象列表\r\n      currentDate: '',    // 当前选中日期\r\n      // priceImgModal: false,       // 标价截图模态框\r\n      // dealPriceImgModal: false,   // 成交价截图模态框\r\n      // otherPriceImgModal: false   // 其他截图模态框\r\n    }\r\n  }\r\n  componentWillMount() {\r\n    // 先拿日期\r\n    this.getInspectPublicSeven()\r\n    // 再获取店铺\r\n    this.getShopNum(moment().subtract(1, 'd').format('YYYY-MM-DD'))\r\n    // 最后查产品列表\r\n    this.getInspectPublicList({\r\n      date: this.formatTime(moment().subtract(1, 'd').format('YYYY-MM-DD')),\r\n      shop_id: this.state.currentShopBtn,\r\n      ...this.state.pagination\r\n    })\r\n  }\r\n  formatTime = (timestamp, showTime = false) => {\r\n    const date = new Date(timestamp)\r\n    let str = `${date.getFullYear()}-${String(date.getMonth()+1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`\r\n    if (showTime) {\r\n        str += ` ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`\r\n    }\r\n    return str;\r\n  }\r\n  // 获取稽查公示列表\r\n  getInspectPublicList = params => {\r\n      console.log(params.date)\r\n     let ser_date = params.date\r\n    axios({\r\n      method: 'post',\r\n      url: '/hcm/campgign/PublicInspectList',\r\n      data: {\r\n          pageSize: params.pageSize,\r\n          pageNum: params.pageNum,\r\n          ser_date: params.date,\r\n          shop_ids: params.shop_id === 'all' ? '' : params.shop_id\r\n        }\r\n    }).then(res => {\r\n      const { data, status } = res.data\r\n      this.setState({\r\n        inspectInfoList: data.list,\r\n        pagination: Object.assign({}, this.state.pagination, {count: data.count}),\r\n        ser_date\r\n      })\r\n    }).catch(err => {\r\n\r\n    })\r\n  }\r\n  // 获取不合格店铺数量\r\n  getShopNum = (date) => {\r\n    axios({\r\n      method: 'post',\r\n      url: '/hcm/campgign/PublicInspectShops',\r\n      data: {\r\n        ser_date: date\r\n      }\r\n    }).then(res => {\r\n      const { data, status } = res.data\r\n      this.setState({\r\n        // sevenActivity: Object.assign({}, this.state.sevenActivity, {\r\n        //   [date]: data\r\n        // })\r\n        shopBtnList: data\r\n      })\r\n    }).catch(err => {\r\n\r\n    })\r\n  }\r\n  // 切换店铺\r\n  switchShopBtn = id => {\r\n      let {ser_date} = this.state;\r\n    this.setState({\r\n      currentShopBtn: id\r\n    })\r\n    this.getInspectPublicList({\r\n      ...this.state.pagination,\r\n      date: this.state.currentDate === '' ? ser_date : this.state.currentDate,\r\n      shop_id: id === 'all' ? 'all' : `'${id}'`\r\n    })\r\n  }\r\n  // 切换日期对应的数据\r\n  switchActivity = (date, index, type) => {\r\n    this.setState({\r\n        selectedIndex: index,\r\n        currentDate: date\r\n    })\r\n    this.getShopNum(date)\r\n    this.getInspectPublicList({\r\n      date,\r\n      shop_ids: this.state.currentShopBtn,\r\n      ...this.state.pagination\r\n    })\r\n  }\r\n  // 获取稽查公示7日不合格数量\r\n  getInspectPublicSeven = () => {\r\n    axios({\r\n      method: 'post',\r\n      url: '/hcm/campgign/InspectPublicSeven',\r\n    }).then(res => {\r\n      const { data, status } = res.data\r\n      const list = data.sort((a, b) => a.my_date - b.my_date)\r\n      this.setState({\r\n        sevenData: list\r\n      })\r\n    }).catch(err => {\r\n\r\n    })\r\n  }\r\n  handleLoadMoreClick = () => {\r\n    const { pagination, currentDate, currentShopBtn } = this.state\r\n    this.setState({\r\n      pagination: Object.assign({}, pagination, {\r\n        pageNum: pagination.pageNum + 1\r\n      })\r\n    }, () => {\r\n      this.getInspectPublicList({\r\n        date: currentDate === '' ? this.formatTime(Date.now()) : currentDate,\r\n        shop_id: currentShopBtn === 'all' ? 'all' : `'${currentShopBtn}'`,\r\n        ...this.state.pagination\r\n      })\r\n    })\r\n  }\r\n  handleImgClick = params => {\r\n    ImgModal(params)\r\n  }\r\n  moreButton = () => {\r\n    this.setState({\r\n      moreButton: !this.state.moreButton\r\n    })\r\n  }\r\n  render() {\r\n    return <Tpl that={this} />\r\n  }\r\n}\r\n\r\nexport default ActivityInspectionPublicity"],"sourceRoot":""}