(window.webpackJsonp=window.webpackJsonp||[]).push([[116,129],{1157:function(e,t){},1158:function(e,t){},1159:function(e,t){},1160:function(e,t){},1167:function(e,t){},1173:function(e,t){},25:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(54));a(53);var r=i(a(28));function i(e){return e&&e.__esModule?e:{default:e}}a(1157);var l=function(t){return e.createElement("div",{className:"layout-wrapper "+(t.className||"")},e.createElement("div",{className:"header-wrapper"},e.createElement(n.default,{className:"breadcrumb"},t.breadcrumbList.map(function(a,r){return""===t.linkList[r]?e.createElement(n.default.Item,{key:a},a):e.createElement(n.default.Item,{href:"javascript:;",key:a},e.createElement("span",{onClick:function(){t.history.go(-t.linkList[r])}},a))}))),e.createElement("div",{className:"layout-content"},t.children),e.createElement("div",{className:"copyright"},e.createElement(r.default,null)))};l.defaultProps={title:"标题",breadcrumbList:[],linkList:[]},t.default=l}).call(this,a(1))},28:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var n=function(t){function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),a(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return e.createElement("div",{className:this.props.clazzName?this.props.clazzName:"Copyright"},"Copyright © 杭州久点网络技术有限公司")}}]),n}();t.default=n}).call(this,a(1))},433:function(e,t){},602:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(202)),r=p(a(11)),i=p(a(201)),l=p(a(114)),o=p(a(33)),s=p(a(32)),c=p(a(99));a(199),a(22),a(200),a(146),a(41),a(42),a(106);var u=p(a(17)),d=p(a(25));function p(e){return e&&e.__esModule?e:{default:e}}var f=c.default.TabPane,m="0",h="1",_="2",g="3",b=(0,u.default)(function(t){var a=t.state,u=a.type,p=a.pagination,b=a.dataList,y=a.classifyList,v=a.dataCounts,E=function(a){return e.createElement(n.default,{header:e.createElement(o.default,null,e.createElement(s.default,{span:3},"序号"),e.createElement(s.default,{span:6},"商品ID"),e.createElement(s.default,{span:12},"商品标题"),e.createElement(s.default,{span:3},"操作")),bordered:!0,pagination:{showQuickJumper:!0,current:p.pageNo,pageSize:p.pageSize,total:p.totalElements,showTotal:function(e){return"共 "+e+" 条记录"},onChange:t.handlePageChange},dataSource:a,renderItem:function(a,n){return e.createElement(o.default,{className:"list-item"},e.createElement(s.default,{span:3},p.pageSize*(p.pageNo-1)+n+1),e.createElement(s.default,{span:6},a.item_id),e.createElement(s.default,{span:12},e.createElement("div",{className:"overflow-ellipsis"},e.createElement("a",{href:a.item_link,target:"_blank"},a.item_title))),e.createElement(s.default,{span:3},e.createElement("span",{onClick:t.toggleFn.bind(t,n,!0),className:"mark-btn "+(a.type==h||a.type==_?"active":"")},e.createElement("i",null),"标记")),e.createElement(s.default,{span:15,offset:9},a.type!=h||a._isShowEdit?null:e.createElement("div",{style:{marginTop:5}},a.product_class_name+" / "+a.product_name),a.type!=_||a._isShowEdit?null:e.createElement("div",{style:{marginTop:5}},e.createElement(l.default,{checked:!0},"非本品牌商品")),a._isShowEdit?e.createElement("div",null,e.createElement(l.default,{checked:a._isCheckboxStatus,onChange:t.handleCheckboxChange.bind(t,n)},"非本品牌商品"),e.createElement(i.default,{value:[a._selected[0]&&a._selected[0].id?a._selected[0].id:a._selected[0],a._selected[1]&&a._selected[1].id?a._selected[1].id:a._selected[1]],className:"cascader-wrapper",disabled:!!a._isCheckboxStatus&&a._isCheckboxStatus,getPopupContainer:function(e){return e.parentNode},options:y,loadData:t.handleLoadData,onChange:t.handleCascaderChange.bind(t,n),showSearch:!0}),e.createElement("span",{className:"options-btn"},e.createElement(r.default,{type:"close",onClick:t.toggleFn.bind(t,n,!1)}),e.createElement(r.default,{type:"check",onClick:t.submitMark.bind(t,n)}))):null))}})};return e.createElement(d.default,{breadcrumbList:["系统设置","商品链接标记","店铺链接标记"],linkList:["","1",""],history:t.props.history},e.createElement("div",{className:"link-marking-detail-wrapper"},e.createElement(c.default,{defaultActiveKey:u,className:"main-tab",onChange:t.handleTabChange},e.createElement(f,{tab:"全部("+(!!v&&v.link_num||0)+")",key:m,className:"tab-item"},E(b)),e.createElement(f,{tab:"待标记("+(!!v&&v.unmark_num||0)+")",key:g,className:"tab-item"},E(b)),e.createElement(f,{tab:"已标记("+(!!v&&v.mark_num||0)+")",key:h,className:"tab-item"},E(b)),e.createElement(f,{tab:"非本品牌商品("+(!!v&&v.mark_no_num||0)+")",key:_,className:"tab-item"},E(b)))))});t.default=b}).call(this,a(1))},768:function(e,t){},922:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(15)),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(16);var l=s(a(602)),o=s(a(12));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var u={pageNo:1,pageSize:10},d={all:"0",marked:"1",nobrand:"2",unmarked:"3"},p=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.getNum=function(){var e={shop_nick:t.state.shopName};o.default.get("/hcm/ItemMark/tyepCount",{params:e}).then(function(e){var a=t.handleResponseSucc(e);a&&t.setState({dataCounts:Object.assign({},r({},a))})}).catch(t.handleResponseErr)},t.handlePageChange=function(e,a){t.setState({pagination:r({},t.state.pagination,{pageNo:e})},function(){t.getDataList()})},t.submitMark=function(e){var a=t.state,r=a.dataList,i=a.shopName,l=r[e],s=l.item_id,c=l.item_link,u=l.item_title,p=l._isCheckboxStatus,f=l._selected,m=l.product_class_id,h=l.product_class_name,_=l.product_id,g=l.product_name,b=l.type,y={item_id:s,item_link:c,item_title:u,shopmainid:l.shopmainid,shop_nick:i};p?(y.type=parseInt(d.nobrand,10),y.product_class_id=null,y.product_class_name=null,y.product_id=null,y.product_name=null):f.length&&f.every(function(e){return null!==e&&void 0!==e.id})?(y.type=parseInt(d.marked,10),y.product_class_id=f[0].id,y.product_class_name=f[0].productClassifyName,y.product_id=f[1].id,y.product_name=f[1].productName):f.length&&f.every(function(e){return null===e})?y.type=null:(y.type=f.length?b:null,y.product_class_id=f.length?m:null,y.product_class_name=f.length?h:null,y.product_id=f.length?_:null,y.product_name=f.length?g:null),LoadingModal({bl:!0}),o.default.post("/hcm/ItemMark/save",y).then(function(e){LoadingModal({bl:!1});var a=e.data,r=(a.data,a.status),i=a.message;"10000"===r?(n.default.success(i),t.getNum(),t.getDataList()):n.default.error(i)}).catch(function(e){LoadingModal({bl:!1}),t.handleResponseErr(e)})},t.handleCheckboxChange=function(e,a){var n=[].concat(c(t.state.dataList)),i=r({},n[e]);i._isCheckboxStatus=a.target.checked,i._selected=[null,null],n[e]=i,t.setState({dataList:n})},t.getDataList=function(){var e=t.state,a=e.shopName,n=e.type,r=e.pagination,i={type:n,shop_nick:a,pageNo:r.pageNo,pageSize:r.pageSize};LoadingModal({bl:!0}),o.default.get("/hcm/ItemMark/List",{params:i}).then(function(e){LoadingModal({bl:!1});var a=t.handleResponseSucc(e);a&&t.setState({dataList:a.content.map(function(e){return Object.assign({},e,{_isCheckboxStatus:e.type==d.nobrand,_selected:[e.product_class_id,e.product_id]})}),pagination:Object.assign({},t.state.pagination,{pageNo:a.pageNumber,pageSize:a.pageSize,totalElements:a.totalElements})})}).catch(function(e){LoadingModal({bl:!1}),t.handleResponseErr(e)})},t.getClassifyList=function(){o.default.get("/hcm/ProductClassify/list").then(function(e){var a=t.handleResponseSucc(e);a&&t.setState({classifyList:a.map(function(e){return Object.assign({},e,{value:e.id,label:e.productClassifyName,isLeaf:!1})})})}).catch(t.handleResponseErr)},t.handleLoadData=function(e){var a=e[e.length-1];a.loading=!0;var n={product_classify_id:a.id};o.default.get("/hcm/hcmProduct/listByClass",{params:n}).then(function(e){a.loading=!1;var n=t.handleResponseSucc(e);n&&(n.length?a.children=n.map(function(e){return Object.assign({},e,{value:e.id,label:e.productName})}):(a.disabled=!0,a.isLeaf=!0),t.setState({classifyList:[].concat(c(t.state.classifyList))}))}).catch(function(e){a.loading=!1,t.handleResponseErr(e)})},t.handleTabChange=function(e){t.setState({type:e,pagination:r({},u)},function(){t.getDataList()})},t.handleCascaderChange=function(e,a,n){var r=[].concat(c(t.state.dataList)),i=r[e];i._selected=n,r[e]=i,t.setState({dataList:r})},t.toggleFn=function(e,a){if(a&&t.state.dataList.some(function(e){return e._isShowEdit}))n.default.warning("请先取消或保存编辑状态的条目！");else{var i=[].concat(c(t.state.dataList)),l=r({},i[e]);l._isShowEdit=a,a||(l._isCheckboxStatus=l.type==d.nobrand,l._selected=[l.product_class_id,l.product_id]),i[e]=l,t.setState({dataList:i})}},t.handleResponseSucc=function(e){var t=e.data,a=t.data,r=t.status,i=t.message;if("10000"===r)return a;n.default.error(i)},t.handleResponseErr=function(e){n.default.error(e.statusText)},t.state={shopName:e.match.params.shopName,pagination:r({},u),type:d.all,dataList:[],dataCounts:null,classifyList:[]},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e.Component),i(a,[{key:"componentWillMount",value:function(){this.getDataList(),this.getNum(),this.getClassifyList()}},{key:"render",value:function(){return e.createElement(l.default,{that:this})}}]),a}();t.default=p}).call(this,a(1))}}]);