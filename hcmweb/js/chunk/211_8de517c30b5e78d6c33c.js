(window.webpackJsonp=window.webpackJsonp||[]).push([[211],{1171:function(e,t){},120:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:"20px",height:"20px"};return{TB:e.createElement("img",{style:n,src:"../../../../img/platform/1_taobao.svg"}),TM:e.createElement("img",{style:n,src:"../../../../img/platform/2_tall.svg"}),JD:e.createElement("img",{style:n,src:"../../../../img/platform/3_jd.svg"}),SN:e.createElement("img",{style:n,src:"../../../../img/platform/4_suning.svg"}),GM:e.createElement("img",{style:n,src:"../../../../img/platform/5_gome.svg"}),PDD:e.createElement("img",{style:n,src:"../../../../img/platform/6_pinduoduo.svg"}),AMAZON:e.createElement("img",{style:n,src:"../../../../img/platform/7_a.svg"}),WPH:e.createElement("img",{style:n,src:"../../../../img/platform/8_weipinhui.svg"}),1688:e.createElement("img",{style:n,src:"../../../../img/platform/9_1688.svg"}),SMT:e.createElement("img",{style:n,src:"../../../../img/platform/10_sumaitong.svg"}),DD:e.createElement("img",{style:n,src:"../../../../img/platform/11_dangdang.svg"}),ALST:e.createElement("img",{style:n,src:"../../../../img/platform/12_lingshoutong.svg"}),"1HD":e.createElement("img",{style:n,src:"../../../../img/platform/13_1haodian.svg"}),YJWD:e.createElement("img",{style:n,src:"../../../../img/platform/14_yunji.svg"}),YLW:e.createElement("img",{style:n,src:"../../../../img/platform/15_youle.svg"}),XY:e.createElement("img",{style:n,src:"../../../../img/platform/16_xainyu.svg"}),WECD:e.createElement("img",{style:n,src:"../../../../img/platform/17_weixin.svg"}),MGJ:e.createElement("img",{style:n,src:"../../../../img/platform/18_mogujie.svg"}),JMYP:e.createElement("img",{style:n,src:"../../../../img/platform/19_jumei.svg"}),CCJ:e.createElement("img",{style:n,src:"../../../../img/platform/20_chuchujie.svg"}),BBWG:e.createElement("img",{style:n,src:"../../../../img/platform/21_beibeiwang.svg"}),platform_OTHER:e.createElement("img",{style:n,src:"../../../../img/platform/22_qita.svg"})}[t]}}).call(this,n(1))},1207:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:"16px",height:"16px"},a={TB:e.createElement("img",{style:n,src:"../../../../img/icon1.1/tao_mes.png"}),TM:e.createElement("img",{style:n,src:"../../../../img/icon1.1/tao_mes.png"}),1688:e.createElement("img",{style:n,src:"../../../../img/icon1.1/tao_mes.png"}),JD:e.createElement("img",{style:n,src:"../../../../img/icon1.1/jd_mes.png"})};if("TB"==t||"TM"==t||"1688"==t||"JD"==t)return a[t]}}).call(this,n(1))},132:function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.ImgModal=void 0;var l,i=n(11),o=(l=i)&&l.__esModule?l:{default:l},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(22),n(1171);var s=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={index:t.props.index,rotate:0,size:1},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),r(n,[{key:"componentDidMount",value:function(){}},{key:"onSwitch",value:function(e){var t=this.state,n=t.index,a=(t.rotate,t.size,this.props.urls);e?n==a.length-1?n=0:n++:n<=0?n=a.length-1:n--,this.setState({index:n,rotate:0,size:1})}},{key:"onSize",value:function(e){var t=this.state.size;e?t+=.5:t=t<=.5?.5:t-.5,this.setState({size:t})}},{key:"onRotate",value:function(e){var t=this.state.rotate;e?t+=90:t-=90,this.setState({rotate:t})}},{key:"colse",value:function(){a.unmountComponentAtNode(document.getElementById("ImgModal")),document.getElementsByTagName("body")[0].removeChild(document.getElementById("ImgModal"))}},{key:"render",value:function(){var t=this,n=this.props,a=n.urls,l=void 0===a?[]:a,i=n.close,r=void 0!==i&&i,s=this.state,c=s.index,u=void 0===c?0:c,m=s.rotate,d=s.size,f=document.createElement("img");f.src=l[u];var p=f.naturalWidth?f.naturalWidth:400;f.naturalHeight&&f.naturalHeight;return console.log(p),e.createElement("div",{className:"flexbox"},e.createElement("div",{className:"imgbox"},r?e.createElement(o.default,{className:"close",onClick:function(){return t.colse()},type:"close-circle"}):null,e.createElement("div",{className:"box"},e.createElement("img",{style:{width:d*(p>500?.7*p:p)+"px",transform:"rotate("+m+"deg)"},src:l[u]})),e.createElement("div",{className:"buts"},e.createElement(o.default,{onClick:function(){return t.onSwitch(!1)},type:"left"}),e.createElement(o.default,{onClick:function(){return t.onSwitch(!0)},type:"right"}),e.createElement(o.default,{onClick:function(){return t.onSize(!0)},type:"plus"}),e.createElement(o.default,{onClick:function(){return t.onSize(!1)},type:"minus"}),e.createElement(o.default,{onClick:function(){return t.onRotate(!1)},className:"left",type:"reload"}),e.createElement(o.default,{onClick:function(){return t.onRotate(!0)},className:"right",type:"reload"})),e.createElement("div",{style:{textAlign:"center",fontSize:"12px"}},e.createElement("a",{target:"_blank",href:l[u]},"查看原图"))))}}]),n}();t.ImgModal=function(t){var n=t.bl,l=void 0!==n&&n,i=(t.urls,document.createElement("div"));i.setAttribute("id","ImgModal"),l?(document.body.appendChild(i),a.render(e.createElement(s,t),document.getElementById("ImgModal"))):(a.unmountComponentAtNode(document.getElementById("ImgModal")),document.getElementsByTagName("body")[0].removeChild(document.getElementById("ImgModal")))}}).call(this,n(1),n(13))},938:function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0});var l=d(n(15)),i=d(n(35)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(16),n(34);var r=d(n(644)),s=d(n(12)),c=d(n(120)),u=d(n(1207)),m=n(132);function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(l,i){try{var o=t[l](i),r=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(r).then(function(e){a("next",e)},function(e){a("throw",e)});e(r)}("next")})}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=i.default.confirm,y=function(t){function n(t){var i,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r,d=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return d.tabsKey=function(e){var t;d.state.tabskey;d.setState((p(t={tabskey:e,querySJ:"",queryPT:"",queryZT:"",queryTIMEp:"",queryTIMEn:"",querybtnSJ:"",querybtnPT:"",querybtnZT:"",querybtnTIMEp:"",querybtnTIMEn:"",pageSize:10,pageNo:1,checkAll:!1,selectedRowKeys:[]},"queryTIMEp",""),p(t,"queryTIMEn",""),t),function(){d.querycontent()})},d.getinfo=function(){var e=d.state.Identity;e=localStorage.getItem("logintype"),d.setState({Identity:e})},d.platform=f(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=d.state,t.platform,t.platformData,d.setState({platformData:can.platform||[]});case 2:case"end":return e.stop()}},e,o)})),d.querysj=function(e){var t=d.state.querySJ;t=e.target.value,d.setState({querySJ:t})},d.queryzt=function(e){var t=d.state.queryZT;t="请选择"==e.key?"":e.key,d.setState({queryZT:t})},d.selecttime=function(e,t){var n=d.state,a=n.queryTIMEp,l=n.queryTIMEn;t[0]?(a=t[0]+" 00:00:00",l=t[1]+" 23:59:59"):(a="",l=""),d.setState({queryTIMEp:a,queryTIMEn:l})},d.querypt=function(e){var t=d.state.queryPT;t="请选择"==e.key?"":e.key,d.setState({queryPT:t})},d.querycontent=(r=f(regeneratorRuntime.mark(function t(n){var i,r,m,f,p,g,y,h,b,v,w,S,E,M,q,T,k,x,_,N,I,O,L;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=d.state,r=i.selectedRowKeys,m=i.checkAll,f=i.totalArr,p=i.tabskey,g=i.querySJ,y=i.queryPT,h=i.queryZT,b=i.queryTIMEp,v=i.queryTIMEn,w=i.querybtnSJ,S=i.querybtnPT,E=i.querybtnZT,M=i.querybtnTIMEp,q=i.querybtnTIMEn,T=i.pageSize,k=i.SCdata,x=i.pageNo,_=i.totalElements,N=i.statusAll1,I=i.statusAll2,O=i.statusAll3,L=i.statusAll4,g=g.replace(/(^\s*)|(\s*$)/g,""),"query"==n&&(r=[]),""!=v&&""!=b?(LoadingModal({bl:!0}),s.default.get("/hcm/hcmComplaintHandling/getList",{params:{shopName:"query"==n?g:""==w?null:w,platform:"query"==n?y:""==S?null:S,status:"query"==n?h:""==E?null:E,pageNo:"query"==n?"1":x,pageSize:T,begintime:"query"==n?b:""==M?b:M,endtime:"query"==n?v:""==q?v:q,processingtype:p}}).then(function(t){if(LoadingModal({bl:!1}),1e4==t.data.status){var l=t.data.data.content;_=t.data.data.totalElements,(f=t.data.data.obj).splice(p-1,1,_),k=l.map(function(t,l){return{key:"query"==n?l+1:T*(x-1)+(l+1),onumber:"query"==n?l+1:T*(x-1)+(l+1),pticon:(0,c.default)(t.platform),ptchat:(0,u.default)(t.platform),shopname:t.shop_name,shoplink:t.shoplink,shopid:t.shopid,bmcid:t.bmcid,clockstatus:"1"==t.clockstatus?e.createElement("img",{style:{cursor:"pointer"},src:"../../../img/icon1.1/Alarm_clock.png",alt:""}):null,send_number:t.send_number,againtime:t.againtime,status:t.status,tableStatus:"1"==p?N[t.status]:"2"==p?I[t.status]:"3"==p?O[t.status]:L[t.status],updatetime:a(t.updatetime).format("YYYY-MM-DD HH:mm:ss"),id:t.id,processing_times:t.processing_times,platform:t.platform}}),"query"==n?d.setState({totalArr:f,SCdata:k,totalElements:_,querybtnSJ:g,querybtnPT:y,querybtnZT:h,querybtnTIMEp:b,querybtnTIMEn:v,pageNo:1,checkAll:!1,selectedRowKeys:r}):d.setState({totalArr:f,SCdata:k,totalElements:_,queryTIMEp:b,queryTIMEn:v},function(){m&&(d.DelecheckAll(),d.setState({checkAll:!0}))})}}).catch(function(){LoadingModal({bl:!1}),l.default.error("获取信息失败")})):(b=a().subtract(3,"months").format("YYYY-MM-DD ")+"00:00:00",v=a().format("YYYY-MM-DD ")+"23:59:59",LoadingModal({bl:!0}),s.default.get("/hcm/hcmComplaintHandling/getList",{params:{shopName:"query"==n?g:""==w?null:w,platform:"query"==n?y:""==S?null:S,status:"query"==n?h:""==E?null:E,pageNo:"query"==n?"1":x,pageSize:T,begintime:"query"==n?b:""==M?b:M,endtime:"query"==n?v:""==q?v:q,processingtype:p}}).then(function(t){if(LoadingModal({bl:!1}),1e4==t.data.status){var l=t.data.data.content;_=t.data.data.totalElements,(f=t.data.data.obj).splice(p-1,1,_),k=l.map(function(t,l){return{key:"query"==n?l+1:T*(x-1)+(l+1),onumber:"query"==n?l+1:T*(x-1)+(l+1),pticon:(0,c.default)(t.platform),ptchat:(0,u.default)(t.platform),shopname:t.shop_name,shoplink:t.shoplink,shopid:t.shopid,bmcid:t.bmcid,clockstatus:"1"==t.clockstatus?e.createElement("img",{style:{cursor:"pointer"},src:"../../../img/icon1.1/Alarm_clock.png",alt:""}):null,send_number:t.send_number,againtime:t.againtime,tableStatus:"1"==p?N[t.status]:"2"==p?I[t.status]:"3"==p?O[t.status]:L[t.status],status:t.status,updatetime:a(t.updatetime).format("YYYY-MM-DD HH:mm:ss"),id:t.id,processing_times:t.processing_times,platform:t.platform}}),"query"==n?d.setState({totalArr:f,SCdata:k,totalElements:_,querybtnSJ:g,querybtnPT:y,querybtnZT:h,querybtnTIMEp:b,querybtnTIMEn:v,pageNo:1,checkAll:!1,selectedRowKeys:r}):d.setState({totalArr:f,SCdata:k,totalElements:_,queryTIMEp:b,queryTIMEn:v},function(){m&&(d.DelecheckAll(),d.setState({checkAll:!0}))})}}).catch(function(){LoadingModal({bl:!1}),l.default.error("获取信息失败")}));case 4:case"end":return t.stop()}},t,o)})),function(e){return r.apply(this,arguments)}),d.onTableCheckChange=function(e){var t=d.state,n=t.SCdata,a=(t.pageSize,[]);e.forEach(function(t,l){a.push(n[(e[l]%10?e[l]%10:10)-1].id)}),d.setState({selectedRowKeys:e,checkAll:!1,idAll:a})},d.cancelcheckAll=function(e){var t=d.state.selectedRowKeys;t.length=0,d.setState({checkAll:e,selectedRowKeys:t})},d.DelecheckAll=function(e){var t=d.state,n=t.selectedRowKeys,a=t.SCdata,l=t.pageNo,i=t.pageSize;n=[];for(var o=i*(l-1);o<i*(l-1)+a.length;o++)n.push(o+1);d.setState({selectedRowKeys:n,checkAll:e})},d.DeleteComplaint=function(t){var n=d.state,a=n.tabskey,i=n.querybtnSJ,o=n.querybtnPT,r=n.querybtnZT,c=n.querybtnTIMEp,u=n.querybtnTIMEn,m=n.selectedRowKeys,f=n.totalElements,p=n.checkAll,y=n.idAll,h=(n.querySJ,n.queryPT,n.queryZT,n.queryTIMEp),b=n.queryTIMEn,v=d;y=1==p?"checkAll":y.join(","),0!=m.length?g({title:null,className:"alert-item-confirm YellowWhite",content:e.createElement("div",null,e.createElement("div",{className:"tips"},"提示"),e.createElement("div",{className:"pline"}),e.createElement("p",{className:"Dtitle"},"你确认要删除这",0==m.length?0:1==p?f:m.length,"项吗?"),e.createElement("p",null,"删除后",e.createElement("span",{className:"red"},"将无法恢复!"))),okText:"确定",cancelText:"取消",onOk:function(){LoadingModal({bl:!0}),s.default.post("/hcm/hcmComplaintHandling/delectHcmComplaintHandling",{ids:y,shopName:1==p?""==i?null:i:null,platform:1==p?""==o?null:o:null,status:1==p?""==r?null:r:null,begintime:1==p?""==c?h:c:null,endtime:1==p?""==u?b:u:null,processingtype:1==p?a:null}).then(function(e){LoadingModal({bl:!1}),"10000"==e.data.status?(v.querycontent(),v.setState({selectedRowKeys:[]}),l.default.success(e.data.message)):l.default.error(e.data.message)}).catch(function(e){LoadingModal({bl:!1}),l.default.error("删除失败")})}}):l.default.error("请选择删除的数据")},d.bubblehidden=function(e){e.target.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className="ant-popover  ant-popover-placement-top  ant-popover-hidden"},d.showDrawer=function(e,t,n,a,i,o){document.querySelector(".remind");var r=d.state.historyList,u=(0,c.default)(o,{width:"15px",height:"15px",marginLeft:"5px",marginTop:"4px"});LoadingModal({bl:!0}),s.default.get("/hcm/hcmComplaintHandling/selectHistoryList",{params:{handlingid:e}}).then(function(e){LoadingModal({bl:!1}),1e4==e.data.status&&(r=e.data.data.list,d.setState({historyList:r}))}).catch(function(){LoadingModal({bl:!1}),l.default.error("获取信息失败")}),d.setState({Draweroff:!0,shopname:t,status:n,shoplink:a,processing_times:i,id:e,Shopicon:u,platform:o})},d.newState=function(e){d.state.newZT;d.setState({newZT:e.key})},d.upfilechange=function(e){var t=d.state.upfileList;t=e.fileList,d.upfile(e.file,!1)&&d.setState({upfileList:t})},d.upfile=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.name,a=n.lastIndexOf("."),i=n.substr(a+1);return e.size/1024/1024<20?-1!==".rar .zip .doc .docx .xls .xlsx .ppt .pptx .pdf".indexOf(i)||(t&&l.default.error("暂不支持"+n+"文件格式"),!1):(l.default.error("文件不能大于20MB!"),!1)},d.remark=function(e){var t=d.state.Remark;t=e.target.value.replace(/(^\s*)|(\s*$)/g,""),d.setState({Remark:t})},d.newHistory=function(){var e=d.state,t=e.newlogisticsNum,n=e.newcomplainNum,i=e.tabskey,o=e.newZT,r=e.status,c=e.id,u=e.Remark,m=e.nextTIME,f=e.fileList,p=e.upfileList,g=e.processing_times;"4"==r&&"1"==i||"9"==r&&"2"==i||"4"==r&&"3"==i||"4"==r&&"4"==i?l.default.warning("流程已完结"):"2"!=o||"2"!=i||""!=t?"8"!=o||"2"!=i||""!=n?a(m).isBefore(a().format("YYYY-MM-DD HH:mm:ss"))?l.default.warning("下次跟进时间已过,请重新选择时间"):o!=r&&""!=o?(LoadingModal({bl:!0}),s.default.post("/hcm/hcmComplaintHandling/saveHistory",{handlingid:c,status:o,againtime:m||null,image:f.length?f.map(function(e,t){return e.response.data.data}).join(","):null,file:p.length?p.map(function(e,t){return e.response.data.data+"/////"+e.name}).join(","):null,remark:u||null,processingTimes:g,processingtype:i,logisticsNumber:t||null,complaintsId:n||null}).then(function(e){LoadingModal({bl:!1}),"10000"==e.data.status?(l.default.success(e.data.message),d.querycontent(),d.setState({Draweroff:!1,newZT:"",nextTIME:"",fileList:[],upfileList:[],Remark:"",newlogisticsNum:"",newcomplainNum:""})):l.default.error(e.data.message)}).catch(function(e){LoadingModal({bl:!1}),l.default.error(e.statusText)})):l.default.error("状态不能与当前状态一致"):l.default.warning("请输入投诉单号"):l.default.warning("请输入物流单号")},d.newLogisticsNum=function(e){var t=d.state.newlogisticsNum;t=e.target.value.replace(/(^\s*)|(\s*$)/g,"").replace(/[^\w\.\/]/gi,""),d.setState({newlogisticsNum:t})},d.newComplainNum=function(e){var t=d.state.newcomplainNum;t=e.target.value.replace(/(^\s*)|(\s*$)/g,"").replace(/[^\w\.\/]/gi,""),d.setState({newcomplainNum:t})},d.deleNewesthistory=function(e){d.state.id;LoadingModal({bl:!0}),s.default.post("/hcm/hcmComplaintHandling/delectHandlingHistory",{id:e}).then(function(e){LoadingModal({bl:!1}),1e4==e.data.status?(l.default.success(e.data.message),d.querycontent(),d.setState({Draweroff:!1})):l.default.error(e.data.message)}).catch(function(){LoadingModal({bl:!1}),l.default.error("删除失败")})},d.onClose=function(){d.setState({Draweroff:!1,newZT:"",nextTIME:"",fileList:[],upfileList:[],Remark:"",newlogisticsNum:"",newcomplainNum:""})},d.newAchange=function(e){var t=d.state;t.newPT,t.op;d.setState({newPT:e.key})},d.newsj=function(e){var t=e.target.value;d.setState({newSJ:t})},d.newsp=function(e){var t=d.state,n=(t.shopid,t.newSPD,e.target.value.replace(/\s+/g,""));d.setState({newSP:n,newSPD:n})},d.showModal=function(){d.setState({NewComplaint:!0})},d.Newcomplaints=function(){var e=d.state,t=e.tabskey,n=e.newPT,a=e.newSPD,i=e.newSJ,o=e.shopid;if("TB"!=n&&"TM"!=n&&"1688"!=n||(o="10009"),i=i.replace(/(^\s*)|(\s*$)/g,""),-1!=a.indexOf(".com")||-1!=a.indexOf(".cn")||-1!=a.indexOf(".net")||-1!=a.indexOf(".vip")||-1!=a.indexOf(".top")||-1!=a.indexOf(".hk")){if(-1!=a.indexOf("tmall.com")||-1!=a.indexOf("taobao.com")||-1!=a.indexOf("tmall.hk")){if(-1!=a.indexOf("?")){var r=a.split("?")[0];if(-1!=a.indexOf("?")&&-1!=a.indexOf("&")){var c=a.split("?")[1].split("&").map(function(e){return e.split("=")}),u="";c.forEach(function(e,t){"id"==e[0]&&(u=e[1])}),a=r+"?id="+u,o=u}else o="10009"}}else if(-1!=a.indexOf("jd.com"))o=a.replace(/[^0-9]/gi,""),a=a;else if(-1!=a.indexOf("1688.com"))a=-1!=a.indexOf("?")?a.split("?")[0]:a,o="1688";else if(-1!=a.indexOf("suning.com")||-1!=a.indexOf("gome.com")||-1!=a.indexOf("amazon")||-1!=a.indexOf("vip.com")||-1!=a.indexOf("aliexpress.com")||-1!=a.indexOf("ule.com")||-1!=a.indexOf("mogujie.com")||-1!=a.indexOf("jumeiglobal.com"))-1!=a.indexOf("?")&&(a=a.split("?")[0],d.setState({newSPD:a}));else if(-1!=a.indexOf("yangkeduo.com")&&-1!=a.indexOf("?")){var m=a.split("?")[0];if(-1!=a.indexOf("?")&&-1!=a.indexOf("&")){var f=a.split("?")[1].split("&").map(function(e){return e.split("=")}),p="";f.forEach(function(e,t){"goods_id"==e[0]&&(p=e[1])}),a=m+"?goods_id="+p,d.setState({newSPD:a})}}n&&a&&i?(LoadingModal({bl:!0}),s.default.post("/hcm/hcmComplaintHandling/save",{platform:n,shopName:i,shoplink:a,shopid:o,processingtype:t}).then(function(e){LoadingModal({bl:!1}),1e4==e.data.status?(l.default.success(e.data.message),d.setState({newSJ:"",newSP:"",newPT:""},function(){d.querycontent()})):(l.default.error(e.data.message),d.setState({newSJ:"",newSP:"",newPT:""}))}).catch(function(){LoadingModal({bl:!1}),l.default.error("新增失败")}),d.setState({NewComplaint:!1,selectedRowKeys:[],checkAll:!1})):l.default.error("至少有一项未填")}else l.default.error("链接格式不正确或者有空白项")},d.Closecomplaints=function(){var e=d.state;e.NewComplaint,e.newSJ,e.newSP;d.setState({NewComplaint:!1,newSJ:"",newSP:"",newPT:""})},d.onuploadVisible=function(e){d.setState({uploadVisible:e,fileList:[]})},d.propsUpload=function(){return{action:"/hcm/hcmComplaintHandling/readExcelFile",accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onRemove:function(e){d.setState(function(t){var n=t.fileList,a=n.indexOf(e),l=n.slice();return l.splice(a,1),{fileList:l}})},beforeUpload:function(e){return d.setState({fileList:[e]}),!1},fileList:d.state.fileList}},d.handleUpload=function(){var e=d.state,t=e.fileList,n=e.tabskey,a=(e.selectedRowKeys,new FormData);t.forEach(function(e){a.append("file",e),a.append("processingtype",n)}),LoadingModal({bl:!0}),(0,s.default)({method:"post",url:"/hcm/hcmComplaintHandling/readExcelFile",headers:{"Content-Type":"multipart/form-data"},data:a,onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);d.setState({percent:t})}}).then(function(e){LoadingModal({bl:!1}),"10000"==e.data.status?l.default.success(e.data.message):l.default.warning(e.data.message),d.setState({fileList:[],uploading:!1,uploadVisible:!1,selectedRowKeys:[],checkAll:!1},function(){d.querycontent()})}).catch(function(){LoadingModal({bl:!1}),d.setState({uploading:!1}),l.default.error("upload failed.")})},d.nexttime=function(e,t){d.state.nextTIME;d.setState({nextTIME:t})},d.onOk=function(e){},d.disabledDate=function(e){return e&&e<a().endOf("day")},d.range=function(e,t){for(var n=[],a=e;a<t;a++)n.push(a);return n},d.handleCancel=function(){return d.setState({previewVisible:!1})},d.handlePreview=function(e){d.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},d.handleChange=function(e){var t=!!e.file.type.length&&-1!="image/jpeg image/jpg image/png".indexOf(e.file.type);e.file.size/1024/1024<10&&t&&d.setState({fileList:e.fileList})},d.ImgUpload=function(e){var t=e.size/1024/1024<10,n=!!e.type.length&&-1!="image/jpeg image/jpg image/png".indexOf(e.type);return t||l.default.error("图片不能大于10MB!"),n||l.default.error("支持图片格式jpeg，jpg，png请重新选择"),t&&n},d.changePagination=function(e,t){var n=d.state,a=n.checkAll;n.selectedRowKeys;d.setState({pageNo:e,pageSize:t,selectedRowKeys:[]},function(){d.querycontent(),a&&(d.DelecheckAll(),d.setState({checkAll:!0}))})},d.onPaginationSize=function(e,t){var n=d.state;n.checkAll,n.selectedRowKeys;d.setState({pageNo:e,pageSize:t,selectedRowKeys:[]},function(){d.querycontent()})},d.handleComImageClick=function(e){(0,m.ImgModal)(e)},d.openLogistics=function(e){var t=e.target.parentNode.previousElementSibling,n=e.target;"ant-timeline logisticsContent loglist"==t.className?(t.className="ant-timeline logisticsContent loglist active",n.innerHTML="收起",n.nextElementSibling.children[0].className="",n.nextElementSibling.children[1].className="active"):(t.className="ant-timeline logisticsContent loglist",n.innerHTML="展开",n.nextElementSibling.children[0].className="active",n.nextElementSibling.children[1].className="")},d.state=(p(i={totalArr:[0,0,0,0],tabskey:"1",Identity:"",size:"large",checkAll:!1,selectedRowKeys:[],Draweroff:!1,NewComplaint:!1,uploadVisible:!1,platformData:[],endValue:null,endOpen:!1,startValue:null,newPT:"",newSJ:"",newSP:"",shopid:"10003",newSPD:"",querySJ:"",queryPT:"",queryZT:"",queryTIMEp:"",queryTIMEn:"",querybtnSJ:"",querybtnPT:"",querybtnZT:"",querybtnTIMEp:"",querybtnTIMEn:"",pageNumber:1,pageNo:1,pageSize:10,SCdata:[],shopname:"",status:"",tableStatus:"",Remark:"",statusAll1:["邮件待发送","邮件已发送","邮件已驳回","邮件已回复","完结"],statusAll2:["购买中","已购买，发货中","卖家已发货","未发货：申请退款中","未发货：举报中","退款完成","发错货：申请退/换货中","已到货，报告制作中","报告已提交平台处理","完结"],statusAll3:["通知进行中","已通知待整改","卖家拒绝整改","卖家已整改","完结"],statusAll4:["举报中","已举报","举报成功","举报失败","完结"],shoplink:"",processing_times:"",id:"",Shopicon:null,newZT:"",nextTIME:"",previewVisible:!1,previewImage:"",fileList:[],upfileList:[],totalElements:0,idAll:[],historyList:[],uploading:!1},"fileList",[]),p(i,"newlogisticsNum",""),p(i,"newcomplainNum",""),p(i,"platform",""),i),d}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),o(n,[{key:"componentDidMount",value:function(){this.platform(),this.querycontent(),this.getinfo()}},{key:"render",value:function(){return e.createElement(r.default,{that:this})}}]),n}();t.default=y}).call(this,n(1),n(10))}}]);