(window.webpackJsonp=window.webpackJsonp||[]).push([[232],{62:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={onVisibilityChange:function(e,t){var n="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,a=n.replace(/hidden/i,"visibilitychange"),i=function(){document[n]||console.log("页面非激活"+new Date),document[n]&&console.log("页面激活"+new Date)};document.addEventListener(a,i)},formatAccount:function(e){return e=e.replace(/[\s]/g,"").replace(/(\d{4})(?=\d)/g,"$1 ")},formatThousandMoney:function(t,n){return isNaN(t)?"":(n=n||"",!1===e.isNumeric(t)||0==t?"0.00":0==(t=(t=+t).toFixed(2))?"0.00":n+" "+(t+"").replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,"))},encryption:function(){return(""+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")).replace(/(\d{3})\d*([0-9a-zA-Z]{4})/,"$1****$2")},browser:{versions:function(){var e=navigator.userAgent,t=(navigator.appVersion,"");if(e.indexOf("Ourydc.Yuebaobao")>-1){var n=e.match(/Ourydc.Yuebaobao.*/);if(n.length>0){var a=n[0];t=a.substr(a.indexOf("/")+1)}}return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,weibo:"WeiBo"==e.match(/WeiBo/i)||"Weibo"==e.match(/Weibo/i)||"weibo"==e.match(/weibo/i),qq:"qq"==e.match(/qq/i)||"QQ"==e.match(/QQ/i),qqBrower:-1==e.indexOf("Mobile MQQBrowser")&&-1!=e.indexOf("MQQBrowser"),isInApp:e.indexOf("Ourydc.Yuebaobao")>-1,locAppVersion:t}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},checkAccount:function(e){return/^[a-zA-Z](\w|\s+){5,15}$/.test(this.trim(e||""))},checkUrl:function(e){return/^((ht|f)tps?):\/\/([\w\-]+(\.[\w\-]+)*\/)*[\w\-]+(\.[\w\-]+)*\/?(\?([\w\-\.,@?^=%&:\/~\+#]*)+)?/.test(this.trim(e||""))},Reg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^[^\u4e00-\u9fa5]{5,31}$/.test(this.trim(e||""))},checkPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^.{6,16}$/.test(this.trim(e||""))},trim:function(e){return(e=""+e).replace(/(^\s*)|(\s*$)/g,"")},getCookie:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null},required:function(e){var t=this.trim(e||"");return!(!t||!t.length)},legnthCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INPUT";return this.trim(e||"").length<this.LENGTH[t]},LENGTH:{URL:500,TEXTAREA:200,INPUT:50},getQueryString:function(e){var t=new RegExp("(^|&|[?])"+e+"=([^&]*)(&|$)"),n=window.location.href.substr(1).match(t);return null!=n?n[2]:""},getParamString:function(e,t){var n=new RegExp("(^|&|[?])"+t+"=([^&]*)(&|$)"),a=e.substr(1).match(n);return null!=a?a[2]:""},Trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},deviceCheck:function(){return browser.versions.mobile?browser.versions.android?"android":browser.versions.ios?"ios":"mobile":"web"}}}).call(this,n(112))},848:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=d(n(15)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(16);var o=d(n(632)),s=d(n(10)),c=d(n(12)),u=n(132),l=d(n(62));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p="YYYY-MM-DD HH:mm:ss",h=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.getActivityNums=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.shop_name,i=void 0===a?"":a,r=n.system_review,o=void 0===r?"":r;(0,c.default)({method:"post",url:"/hcm/campgign/InspectStaCount",data:{start_time:e,shop_name:i,system_review:o}}).then(function(e){var n=e.data,a=n.data,i=n.status;n.message;"10000"===i&&t.setState({activityNums:a})}).catch(function(e){})},t.getInspectDetail=function(e){LoadingModal({bl:!0}),(0,c.default)({method:"post",url:"/hcm/campgign/InspectDetail",data:e}).then(function(e){LoadingModal({bl:!1});var n=e.data,a=n.data,i=n.status;n.message;"10000"===i&&t.setState({detailList:0!==a.length?a.map(function(e){return Object.assign({},e,{_isShowInspectInput:!1})}):[]})}).catch(function(e){LoadingModal({bl:!1}),a.default.error("系统繁忙，请稍后再试！")})},t.handleSearchClick=function(){var e=t.state,n=e.shop_name,a=e.sys_result,i=e.start_time,r=(e.currentTab,e.pagination);t.getInspectDetail({shop_name:n,sys_result:a,start_time:""===i?(0,s.default)().format(p):i,type:"1",pageNum:r.pageNum,pageSize:r.pageSize}),t.getActivityNums(""===i?(0,s.default)().format(p):i,{shop_name:n,system_review:a}),t.setState({currentTab:"1"})},t.handleComSubmitResult=function(e,n){var r=t.state,o=r.brandInspectInfo,s=r.start_time;if(0!==Object.keys(o).length&&o[n]&&0!==Object.keys(o[n]).length&&o[n].brand_review){var u=t.state.brandInspectInfo[n],d=u.brand_review,f=void 0===d?"":d,p=u.brand_review_view,h=void 0===p?"":p;!h||l.default.legnthCheck(h,"TEXTAREA")?(LoadingModal({bl:!0}),(0,c.default)({method:"post",url:"/hcm/campgign/InspectCamPro",data:i({brand_review:f,brand_review_view:h,createtime:s},e)}).then(function(e){LoadingModal({bl:!1});var n=e.data,i=(n.data,n.status),r=n.message;"10000"===i&&(a.default.success(r),t.handleSearchClick())}).catch(function(e){LoadingModal({bl:!1}),a.default.error("网络繁忙，请稍后再试！")})):a.default.warning("请限制稽查意见在"+l.default.LENGTH.TEXTAREA+"字符内！")}else a.default.warning("请选择稽查结果！")},t.handleComInspectInfo=function(e,n,a){var i=t.state.inspectResultBtn.slice();i[n]="合格"===e?0:1,"input"===e?t.setState({brandInspectInfo:Object.assign({},t.state.brandInspectInfo,f({},n,Object.assign({},t.state.brandInspectInfo[n],{brand_review_view:a.target.value})))}):t.setState({brandInspectInfo:Object.assign({},t.state.brandInspectInfo,f({},n,Object.assign({},t.state.brandInspectInfo[n],{brand_review:e}))),inspectResultBtn:i})},t.handleComToggleClick=function(e,n){var a=t.state,i=a.detailList,r=a.inspectResultBtn,o=a.brandInspectInfo,s=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i));if(s[n]._isShowInspectInput=e,!e){var c=r.slice();c[n]=null;var u=Object.assign({},o,f({},n,{}));t.setState({inspectResultBtn:c,brandInspectInfo:u})}t.setState({detailList:s})},t.handleComImageClick=function(e){(0,u.ImgModal)(e)},t.handleTabChange=function(e){var n=t.state,a=n.start_time,i=n.pagination,r=n.shop_name,o=n.sys_result;t.setState({currentTab:e}),t.getInspectDetail({type:e,start_time:""===a?(0,s.default)().format(p):a,pageNum:i.pageNum,pageSize:i.pageSize,shop_name:r,sys_result:o})},t.handleChange=function(e,n){var a="start_time"===e?n?(0,s.default)(n).format(p):"":n;t.setState(f({},e,a))},t.handleClearIconClick=function(){t.setState({shop_name:""})},t.handleInputChange=function(e){t.setState({shop_name:e.target.value})},t.state={shop_name:"",sys_result:"",start_time:(0,s.default)().format(p),currentTab:"1",pagination:{pageNum:1,pageSize:10},activityNums:{},detailList:[],isShowInspectInput:!1,brandInspectInfo:{},inspectResultBtn:[]},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),r(n,[{key:"componentWillMount",value:function(){this.getActivityNums((0,s.default)().format(p),{shop_name:this.state.shop_name,system_review:this.state.sys_result}),this.getInspectDetail({type:1,start_time:(0,s.default)().format(p),pageNum:this.state.pagination.pageNum,pageSize:this.state.pagination.pageSize,shop_name:this.state.shop_name,sys_result:this.state.sys_result})}},{key:"render",value:function(){return e.createElement(o.default,{that:this})}}]),n}();t.default=h}).call(this,n(1))}}]);