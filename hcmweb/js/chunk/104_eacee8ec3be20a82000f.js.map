{"version":3,"sources":["webpack:///./app/widget/index/Dealers/ApprovalQuery/tpl.js"],"names":["Item","RangePicker","FormItem","TabPane","clearIconStyle","width","height","opacity","cursor","SearchBox","that","props","form","getFieldDecorator","getFieldValue","clearIcon","handleClearIconClick","bind","fieldName","handleSearchSubmit","initialValue","localStorage","getItem","subtract","trigger","parentNode","color","borderColor","SearchResult","state","statusNum","all_count","w_count","wt_count","ok_count","ing_count","ot_count","cacheListObj","currentStatus","currentList","icon","node","list","tabName","status","item","path","config","id","campaign_node","goTo","campaign_name","formatTime","start_time","end_time","shop_name","ping_name","createtime","pro_count","act_count","reject_count","handleTabChange","map","v","length","val","Tpl","pagination","totalElements","pageSize","pageNo","handlePageChange","total","range"],"mappings":"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","file":"js/chunk/104_eacee8ec3be20a82000f.js","sourcesContent":["import ThatMatin from '../../../HOC/That'\r\nimport ContentBox from '../../../components/Layout'\r\nimport Copyright from '../../../components/Copyright'\r\nimport { Breadcrumb, Row, Col, Button, Input, DatePicker, Form, Tabs, Pagination, Icon } from 'antd'\r\nimport moment from 'moment'\r\nimport BrandIcon from '../../../components/BrandIcon'\r\n\r\nconst Item = Breadcrumb.Item\r\nconst RangePicker = DatePicker.RangePicker\r\nconst FormItem = Form.Item\r\nconst TabPane = Tabs.TabPane\r\n\r\nconst clearIconStyle = {\r\n  width: '14px',\r\n  height: '14px',\r\n  opacity: 0.25,\r\n  cursor: 'pointer'\r\n}\r\n\r\nconst SearchBox = ThatMatin(that => {\r\n  const { getFieldDecorator, getFieldValue } = that.props.form\r\n  const clearIcon = fieldName => (\r\n    <Icon\r\n      onClick={that.handleClearIconClick.bind(that, fieldName)}\r\n      type=\"close-circle\"\r\n      style={clearIconStyle}\r\n    />\r\n  )\r\n  return (\r\n    <Form onSubmit={that.handleSearchSubmit}>\r\n      <Row>\r\n        <Col span={6} className=\"col\">\r\n          <FormItem\r\n            label=\"活动主题\"\r\n            colon\r\n            className=\"form-item\"\r\n          >\r\n            {\r\n              getFieldDecorator('campaign_name', {\r\n                initialValue: ''\r\n              })(\r\n                <Input \r\n                  placeholder=\"请输入\" \r\n                  suffix={\r\n                    !!getFieldValue('campaign_name')?\r\n                    clearIcon('campaign_name'):\r\n                    null\r\n                  } \r\n                />\r\n              )\r\n            }\r\n          </FormItem>\r\n        </Col>\r\n        {\r\n          localStorage.getItem('logintype')==='SHOP'?\r\n          null:\r\n          <Col span={6} className=\"col\">\r\n            <FormItem\r\n              label=\"店铺名称\"\r\n              colon\r\n              className=\"form-item\"\r\n            >\r\n              {\r\n                getFieldDecorator('shop_name', {\r\n                  initialValue: ''\r\n                })(\r\n                  <Input \r\n                    placeholder=\"请输入\" \r\n                    suffix={\r\n                      !!getFieldValue('shop_name')?\r\n                      clearIcon('shop_name'):\r\n                      null\r\n                    }\r\n                  />\r\n                )\r\n              }\r\n            </FormItem>\r\n          </Col>\r\n        }\r\n        <Col span={12} className=\"col\">\r\n          <FormItem\r\n            label=\"提交时间\"\r\n            colon\r\n            className=\"form-item\"\r\n          >\r\n            {\r\n              getFieldDecorator('time', {\r\n                initialValue: [moment().subtract(90, 'd'), moment()]\r\n              })(\r\n                <RangePicker getCalendarContainer={trigger => trigger.parentNode} format=\"YYYY-MM-DD\" showTime />\r\n              )\r\n            }\r\n          </FormItem>\r\n        </Col>\r\n        {\r\n          localStorage.getItem('logintype')==='SHOP'?\r\n          <Button htmlType=\"submit\" style={{color:'#1890ff',borderColor:'#1890ff'}}>查询</Button>:\r\n          null\r\n        }\r\n      </Row>\r\n      {\r\n        localStorage.getItem('logintype')==='SHOP'?\r\n        null:\r\n        <Row justify=\"end\" type=\"flex\">\r\n          <Button htmlType=\"submit\" style={{color:'#1890ff',borderColor:'#1890ff'}}>查询</Button>\r\n        </Row>\r\n      }\r\n    </Form>\r\n  )\r\n})\r\n\r\nconst SearchResult = ThatMatin(that => {\r\n  const {\r\n    all_count,  // 全部\r\n    w_count,    // 活动待审核\r\n    wt_count,   // 待审核已过期\r\n    ok_count,   // 活动已审核\r\n    ing_count,  // 活动进行中\r\n    ot_count    // 活动已完成\r\n  } = that.state.statusNum\r\n  const { cacheListObj, currentStatus } = that.state\r\n  const currentList = cacheListObj[currentStatus] || []\r\n  const icon = node => {\r\n    switch (node) {\r\n      case '活动待审核':\r\n        return <Icon type=\"clock-circle\" style={{color: '#FAAD14'}} />\r\n        break;\r\n      case '待审核已过期':\r\n        return <Icon type=\"minus-circle\" style={{color: '#FAAD14'}} />\r\n        break;\r\n      case '活动已审核':\r\n        return <Icon type=\"check-circle\" style={{color: '#1890ff'}} />\r\n        break;\r\n      case '活动进行中':\r\n        return <Icon type=\"clock-circle\" style={{color: '#1890ff'}} />\r\n        break;\r\n      default:\r\n        return <Icon type=\"check-circle\" style={{color: '#52C41A'}} />\r\n        break;\r\n    }\r\n  }\r\n  const list = [\r\n    {\r\n      tabName: `全部（${all_count || 0}）`,\r\n      status: '1'\r\n    },\r\n    {\r\n      tabName: `活动待审核（${w_count || 0}）`,\r\n      status: '2'\r\n    },\r\n    {\r\n      tabName: `待审核已过期（${wt_count || 0}）`,\r\n      status: '3'\r\n    },\r\n    {\r\n      tabName: `活动已审核（${ok_count || 0}）`,\r\n      status: '4'\r\n    },\r\n    {\r\n      tabName: `活动进行中（${ing_count || 0}）`,\r\n      status: '5'\r\n    },\r\n    {\r\n      tabName: `活动已完成（${ot_count || 0}）`,\r\n      status: '6'\r\n    }\r\n  ]\r\n  const item = config => (\r\n    <div \r\n      className=\"result-item\" \r\n      onClick={\r\n        () => {\r\n          const path = localStorage.getItem('logintype')==='SHOP'?\r\n                        `/MyActivityDetail/myActivity/review/${config.id}/${config.campaign_node}`:\r\n                        `/ActivityDetails/${config.id}/${config.campaign_node}`\r\n          that.goTo(path)\r\n        }\r\n      } \r\n      key={config.id}>\r\n      <Row className=\"row\">\r\n        <Col span={24}><span>{config.campaign_name}</span></Col>\r\n      </Row>\r\n      <Row className=\"row\">\r\n        <Col span={12}>活动时间：{that.formatTime(config.start_time, true)}~{that.formatTime(config.end_time, true)}</Col>\r\n        <Col span={12} className=\"status\">{icon(config.campaign_node)}&nbsp;&nbsp;{config.campaign_node}</Col>\r\n      </Row>\r\n      <Row className=\"row\">\r\n        {\r\n          localStorage.getItem('logintype')==='SHOP'?\r\n          null:\r\n          <Col span={4}>{config.shop_name}<BrandIcon pingName={config.ping_name} /></Col>\r\n        }\r\n        {/* <Col span={1}></Col> */}\r\n        <Col span={4}>{that.formatTime(config.createtime, true)}</Col>\r\n        <Col span={2} offset={localStorage.getItem('logintype')==='SHOP'?14:10}>合计：{config.pro_count}条</Col>\r\n        <Col span={2}>通过：{config.act_count}条</Col>\r\n        <Col span={2}>驳回：{config.reject_count}条</Col>\r\n      </Row>\r\n    </div>\r\n  )\r\n  return (\r\n    <Tabs activeKey={`${currentStatus}`} onChange={that.handleTabChange} className=\"result-list\">\r\n      {\r\n        list.map(v => (\r\n          <TabPane tab={v.tabName} key={v.status}>\r\n            {\r\n              !!currentList.length ?\r\n              currentList.map(val => item({...val})) :\r\n              <div className=\"empty-style\">暂无数据</div>\r\n            }\r\n          </TabPane>\r\n        ))\r\n      }\r\n    </Tabs>\r\n  )\r\n})\r\n\r\nconst Tpl = ThatMatin(that => {\r\n  const { cacheListObj, currentStatus } = that.state\r\n  const { totalElements, pageSize, pageNo } = that.state.pagination\r\n  return (\r\n    <ContentBox\r\n      breadcrumbList={['活动信息', localStorage.getItem('logintype')==='SHOP'?'我的活动':'审批查询']}\r\n      linkList={['', '']}\r\n    >\r\n    <div className=\"approval-query-wrapper\">\r\n      {/* <section className=\"top-header\">\r\n        <Breadcrumb>\r\n          <Item>活动信息</Item>\r\n          <Item>审批查询</Item>\r\n        </Breadcrumb>\r\n      </section> */}\r\n      <section className=\"content\">\r\n        <div className=\"condition-search\">\r\n          <SearchBox that={that} />\r\n        </div>\r\n        <div className=\"search-result\">\r\n          <SearchResult that={that} />\r\n          <Pagination \r\n            className=\"pagination\"\r\n            total={totalElements} \r\n            defaultPageSize={pageSize} \r\n            current={pageNo}\r\n            showQuickJumper \r\n            onChange={that.handlePageChange}\r\n            showTotal={(total, range) => {\r\n              return `共 ${total} 条记录`\r\n            }}\r\n          />\r\n        </div>\r\n      </section>\r\n      {/* <div className=\"copyright\">\r\n        <Copyright />\r\n      </div> */}\r\n    </div>\r\n    </ContentBox>\r\n  )\r\n})\r\n\r\nexport default Tpl;"],"sourceRoot":""}