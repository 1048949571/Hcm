(window.webpackJsonp=window.webpackJsonp||[]).push([[214],{1158:function(e,t){},28:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(t){function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e.Component),n(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return e.createElement("div",{className:this.props.clazzName?this.props.clazzName:"Copyright"},"Copyright © 杭州久点网络技术有限公司")}}]),r}();t.default=r}).call(this,n(1))},62:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={onVisibilityChange:function(e,t){var n="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,r=n.replace(/hidden/i,"visibilitychange"),a=function(){document[n]||console.log("页面非激活"+new Date),document[n]&&console.log("页面激活"+new Date)};document.addEventListener(r,a)},formatAccount:function(e){return e=e.replace(/[\s]/g,"").replace(/(\d{4})(?=\d)/g,"$1 ")},formatThousandMoney:function(t,n){return isNaN(t)?"":(n=n||"",!1===e.isNumeric(t)||0==t?"0.00":0==(t=(t=+t).toFixed(2))?"0.00":n+" "+(t+"").replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,"))},encryption:function(){return(""+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")).replace(/(\d{3})\d*([0-9a-zA-Z]{4})/,"$1****$2")},browser:{versions:function(){var e=navigator.userAgent,t=(navigator.appVersion,"");if(e.indexOf("Ourydc.Yuebaobao")>-1){var n=e.match(/Ourydc.Yuebaobao.*/);if(n.length>0){var r=n[0];t=r.substr(r.indexOf("/")+1)}}return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,weibo:"WeiBo"==e.match(/WeiBo/i)||"Weibo"==e.match(/Weibo/i)||"weibo"==e.match(/weibo/i),qq:"qq"==e.match(/qq/i)||"QQ"==e.match(/QQ/i),qqBrower:-1==e.indexOf("Mobile MQQBrowser")&&-1!=e.indexOf("MQQBrowser"),isInApp:e.indexOf("Ourydc.Yuebaobao")>-1,locAppVersion:t}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},checkAccount:function(e){return/^[a-zA-Z](\w|\s+){5,15}$/.test(this.trim(e||""))},checkUrl:function(e){return/^((ht|f)tps?):\/\/([\w\-]+(\.[\w\-]+)*\/)*[\w\-]+(\.[\w\-]+)*\/?(\?([\w\-\.,@?^=%&:\/~\+#]*)+)?/.test(this.trim(e||""))},Reg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^[^\u4e00-\u9fa5]{5,31}$/.test(this.trim(e||""))},checkPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^.{6,16}$/.test(this.trim(e||""))},trim:function(e){return(e=""+e).replace(/(^\s*)|(\s*$)/g,"")},getCookie:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null},required:function(e){var t=this.trim(e||"");return!(!t||!t.length)},legnthCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INPUT";return this.trim(e||"").length<this.LENGTH[t]},LENGTH:{URL:500,TEXTAREA:200,INPUT:50},getQueryString:function(e){var t=new RegExp("(^|&|[?])"+e+"=([^&]*)(&|$)"),n=window.location.href.substr(1).match(t);return null!=n?n[2]:""},getParamString:function(e,t){var n=new RegExp("(^|&|[?])"+t+"=([^&]*)(&|$)"),r=e.substr(1).match(n);return null!=r?r[2]:""},Trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},deviceCheck:function(){return browser.versions.mobile?browser.versions.android?"android":browser.versions.ios?"ios":"mobile":"web"}}}).call(this,n(112))},880:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(14)),a=f(n(27)),i=f(n(11)),o=f(n(54)),u=f(n(15)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(18),n(26),n(22),n(53),n(16);var c=f(n(12)),s=f(n(28)),d=f(n(62));function f(e){return e&&e.__esModule?e:{default:e}}var m=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.addItem=function(){var e=t.state.dataList;e.push({url:null,price:null}),t.setState({dataList:e})},t.rmItem=function(e){var n=t.state.dataList;1!=n.length?(n.splice(e,1),t.setState({dataList:n})):u.default.error("最少保留一条链接")},t.changeItem=function(e,n,r){var a=t.state.dataList;"price"===n&&isNaN(+e.target.value)||(a[r][n]=e.target.value,a[r].editStatus=!1,a[r].url&&d.default.getParamString(a[r].url,"id").length&&a[r].price&&d.default.legnthCheck(""+a[r].price,"INPUT")&&(a[r].editStatus=!0),!0===a[r].checkStatus&&(a[r].checkStatus=!1),t.setState({dataList:a}))},t.ckeckUrl=function(){for(var e=t.state.dataList,n=0;n<e.length;n++)if(!e[n].editStatus){var r=e[n],a=r.price;if(!r.url)return void u.default.error("第"+(n+1)+"条链接地址不能为空");if(!d.default.getParamString(e[n].url,"id").length)return void u.default.error("第"+(n+1)+"条请输入正确的链接地址");if(!d.default.legnthCheck(e[n].url,"URL"))return void u.default.error("第"+(n+1)+"条请输入正确的链接地址");if(!a)return void u.default.error("第"+(n+1)+"条价格不能为空");if(!d.default.legnthCheck(""+a,"INPUT"))return void u.default.error("第"+(n+1)+"条价格字符长度不允许超过50")}var i=e.map(function(e,t){return d.default.getParamString(e.url,"id")}),o=Object.assign([],i);o.sort();for(var l=0;l<o.length-1;l++)if(o[l]==o[l+1]){for(var s=null,f=null,m=0;m<i.length;m++)i[m]===o[l]&&(null===s?s=m+1:f=m+1);return void u.default.error("第"+s+"条和第"+f+"条重复")}LoadingModal({bl:!0,text:"商品链接验证中,请耐心等候..."}),c.default.post("/hcm/monitorLink/check",{itemIds:i.join(",")}).then(function(n){(LoadingModal({bl:!1}),"10000"==n.data.status)&&(JSON.parse(n.data.data).data.forEach(function(t,n){t.WangWang.length&&t.itemTitle.length&&t.shopName.length?(e[n].checkStatus=!0,e[n].WangWang=t.WangWang,e[n].itemTitle=t.itemTitle,e[n].shopName=t.shopName,e[n].platform="True"==t.isTmall?"天猫":"淘宝",u.default.success("第"+(n+1)+"条数据验证成功")):(e[n].checkStatus=!1,u.default.error("第"+(n+1)+"条数据验证失败，请检查"))}),t.setState({dataList:e}))}).catch(function(e){LoadingModal({bl:!1}),u.default.error(e.statusText)})},t.onSubmit=function(){for(var e=t.state.dataList,n=0;n<e.length;n++){if(!1===e[n].checkStatus)return void u.default.error("第"+(n+1)+"条链接验证失败，请重新编辑后验证");if(void 0===e[n].checkStatus)return void u.default.error("第"+(n+1)+"条链接未验证，请验证")}var r=[];e.forEach(function(e,t){r.push({itemid:d.default.getParamString(e.url,"id"),itemlink:"https://item.taobao.com/item.htm?id="+d.default.getParamString(e.url,"id"),itemprice:e.price,itemtitle:e.itemTitle,shopname:e.shopName,shopnick:e.WangWang,platform:e.platform,status:"上架"})}),(0,c.default)({method:"post",url:"/hcm/monitorLink/Create",transformRequest:function(e){return e},headers:{"Content-Type":"application/json;charset=utf-8"},data:JSON.stringify(r)}).then(function(e){"10000"==e.data.status?(u.default.success(e.data.message),window.location.href="/index.html#/UrlMonitor"):e.data.data?e.data.data.forEach(function(t){return u.default.error(e.data.message+t)}):u.default.error(e.data.message)}).catch(function(e){u.default.error(e.statusText)})},t.state={dataList:[{url:null,price:null}]},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),l(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this,n=this.state.dataList;return e.createElement("div",{className:"addmonitor"},e.createElement("div",{className:"Breadcrumb"},e.createElement(o.default,null,e.createElement(o.default.Item,null,e.createElement("a",{href:"/index.html#/UrlMonitor"},"单链接监控")),e.createElement(o.default.Item,null,"新增"))),e.createElement("div",{className:"content"},e.createElement("h4",null,"设置监控链接"),e.createElement("p",{className:"p"},e.createElement(i.default,{type:"sound",className:"icon-sound",theme:"outlined"}),"暂时仅支持淘宝网商品链接，链接越多，验证链接时间越长"),e.createElement("div",{className:"url-list"},e.createElement("span",{className:"red tit"},"链接地址："),e.createElement("div",null,e.createElement("ul",{className:"items"},n.map(function(n,r){return e.createElement("li",{key:r,className:"item"},e.createElement(a.default,{style:!1===n.checkStatus?{borderColor:"red"}:!0===n.checkStatus?{borderColor:"green"}:{},onChange:function(e){return t.changeItem(e,"url",r)},value:n.url,placeholder:"链接地址",className:"url"}),e.createElement("span",{className:"zw"},"-"),e.createElement(a.default,{onChange:function(e){return t.changeItem(e,"price",r)},value:n.price,placeholder:"限价",className:"num"}),e.createElement(i.default,{onClick:function(e){return t.rmItem(r)},type:"minus-square-o"}))})),e.createElement(r.default,{onClick:function(e){return t.addItem()},className:"addbut",type:"dashed"},"+新增"),e.createElement(r.default,{onClick:function(e){return t.ckeckUrl()},style:{marginTop:"20px"},className:"url-check"},"验证链接"),e.createElement("div",{style:{paddingTop:"20px"}},e.createElement(r.default,{className:"btn2-main",onClick:function(e){return t.onSubmit()},style:{marginRight:"20px"},type:"primary"},"保存"),e.createElement("a",{href:"/index.html#/UrlMonitor"},e.createElement(r.default,null,"取消")))))),e.createElement(s.default,{clazzName:"copyright"}))}}]),n}();t.default=m}).call(this,n(1))}}]);