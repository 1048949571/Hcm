{"version":3,"sources":["webpack:///./app/widget/index/Service/LinkMarkingDetail/main.js"],"names":["DEFAULT_PAGE","pageNo","pageSize","TYPE_MAP","all","marked","nobrand","unmarked","App","props","getNum","params","shop_nick","state","shopName","axios","get","then","result","handleResponseSucc","res","setState","dataCounts","Object","assign","catch","handleResponseErr","handlePageChange","page","pagination","getDataList","submitMark","dataList","index","item_id","item_link","item_title","_isCheckboxStatus","_selected","product_class_id","product_class_name","product_id","product_name","type","shopmainid","data","parseInt","length","every","v","id","undefined","productClassifyName","productName","LoadingModal","bl","post","status","message","success","error","err","handleCheckboxChange","e","copyList","targetObj","target","checked","content","map","pageNumber","totalElements","getClassifyList","classifyList","value","label","isLeaf","handleLoadData","targetOption","selectedOptions","loading","product_classify_id","children","disabled","handleTabChange","activekey","handleCascaderChange","toggleFn","flag","some","_isShowEdit","warning","statusText","match","React","Component"],"mappings":"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","file":"js/chunk/328_95df161d99d3d3e5fcf6.js","sourcesContent":["import Tpl from './tpl'\r\nimport axios from '../../../../js/common/ajax'\r\nimport { message as Msg } from 'antd'\r\n\r\nconst DEFAULT_PAGE = {\r\n  pageNo: 1,\r\n  pageSize: 10,\r\n}\r\nconst TYPE_MAP = {\r\n  all: '0',\r\n  marked: '1',\r\n  nobrand: '2',\r\n  unmarked: '3',\r\n}\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      shopName: props.match.params.shopName,\r\n      pagination: {...DEFAULT_PAGE},\r\n      type: TYPE_MAP.all,\r\n      dataList: [],\r\n      dataCounts: null,\r\n      classifyList: [],\r\n    }\r\n  }\r\n  componentWillMount() {\r\n    this.getDataList()\r\n    this.getNum()\r\n    this.getClassifyList()\r\n  }\r\n  // 获取数量\r\n  getNum = () => {\r\n    const params = {\r\n      shop_nick: this.state.shopName\r\n    }\r\n    axios.get('/hcm/ItemMark/tyepCount',{params}).then(res => {\r\n      const result = this.handleResponseSucc(res)\r\n      if (!result) {\r\n        return\r\n      }\r\n      this.setState({\r\n        dataCounts: Object.assign({}, {...result})\r\n      })\r\n    }).catch(this.handleResponseErr)\r\n  }\r\n  // \r\n  handlePageChange = (page, pageSize) => {\r\n    this.setState({\r\n      pagination: {...this.state.pagination, pageNo: page}\r\n    }, () => {\r\n      this.getDataList()\r\n    })\r\n  }\r\n  // \r\n  submitMark = index => {\r\n    const { dataList, shopName } = this.state\r\n    const {\r\n      item_id, \r\n      item_link, \r\n      item_title, \r\n      _isCheckboxStatus,\r\n      _selected,\r\n      product_class_id,\r\n      product_class_name,\r\n      product_id,\r\n      product_name,\r\n      type,\r\n      shopmainid,\r\n    } = dataList[index]\r\n    let data = {\r\n      item_id,\r\n      item_link,\r\n      item_title,\r\n      shopmainid,\r\n      shop_nick: shopName,\r\n    }\r\n    if (_isCheckboxStatus) {\r\n      // 非本品牌商品\r\n      data.type = parseInt(TYPE_MAP.nobrand, 10)\r\n      data.product_class_id = null\r\n      data.product_class_name = null\r\n      data.product_id = null\r\n      data.product_name = null\r\n    } else {\r\n      if (!!_selected.length && _selected.every(v => v !== null && v.id !== undefined)) {\r\n        // 本品牌商品\r\n        data.type = parseInt(TYPE_MAP.marked, 10)\r\n        data.product_class_id = _selected[0].id\r\n        data.product_class_name = _selected[0].productClassifyName\r\n        data.product_id = _selected[1].id\r\n        data.product_name = _selected[1].productName\r\n      } else if (!!_selected.length && _selected.every(v => v === null)) {\r\n        data.type = null\r\n      }else {\r\n        data.type = !!_selected.length ? type : null\r\n        data.product_class_id = !!_selected.length ? product_class_id : null\r\n        data.product_class_name = !!_selected.length ? product_class_name : null\r\n        data.product_id = !!_selected.length ? product_id : null\r\n        data.product_name = !!_selected.length ? product_name : null\r\n      }\r\n    }\r\n    // console.log('---submit',data)\r\n    // return\r\n    LoadingModal({bl:true})\r\n    axios.post('/hcm/ItemMark/save', data).then(res => {\r\n      LoadingModal({bl:false})\r\n      const { data, status, message } = res.data\r\n      if (status === '10000') {\r\n        Msg.success(message)\r\n        this.getNum()\r\n        this.getDataList()\r\n      } else {\r\n        Msg.error(message)\r\n      }\r\n    }).catch(err => {\r\n      LoadingModal({bl:false})\r\n      this.handleResponseErr(err)\r\n    })\r\n  }\r\n  // \r\n  handleCheckboxChange = (index, e) => {\r\n    const copyList = [...this.state.dataList]\r\n    const targetObj = {...copyList[index]}\r\n    targetObj._isCheckboxStatus = e.target.checked\r\n    targetObj._selected = [null, null]\r\n    copyList[index] = targetObj\r\n    this.setState({\r\n      dataList: copyList\r\n    })\r\n  }\r\n  // 获取列表数据\r\n  getDataList = () => {\r\n    const { shopName, type, pagination } = this.state\r\n    const params = {\r\n      type,\r\n      shop_nick: shopName,\r\n      pageNo: pagination.pageNo,\r\n      pageSize: pagination.pageSize,\r\n    }\r\n    LoadingModal({bl:true})\r\n    axios.get('/hcm/ItemMark/List', {params}).then(res => {\r\n      LoadingModal({bl:false})\r\n      const result = this.handleResponseSucc(res)\r\n      if (!result) {\r\n        return\r\n      }\r\n      this.setState({\r\n        dataList: result.content.map(v => {\r\n          return  Object.assign({}, v, {\r\n            _isCheckboxStatus:v.type==TYPE_MAP.nobrand,\r\n            _selected: [v.product_class_id, v.product_id],\r\n          })\r\n        }),\r\n        pagination: Object.assign({}, this.state.pagination, {\r\n          pageNo: result.pageNumber,\r\n          pageSize: result.pageSize,\r\n          totalElements: result.totalElements,\r\n        })\r\n      })\r\n    }).catch(err => {\r\n      LoadingModal({bl:false})\r\n      this.handleResponseErr(err)\r\n    })\r\n  }\r\n  // 获取下拉数据\r\n  getClassifyList = () => {\r\n    axios.get('/hcm/ProductClassify/list').then(res => {\r\n      const result = this.handleResponseSucc(res)\r\n      if (!result) {\r\n        return\r\n      }\r\n      this.setState({\r\n        classifyList: result.map(v => Object.assign({}, v, {value:v.id,label:v.productClassifyName,isLeaf:false}))\r\n      })\r\n    }).catch(this.handleResponseErr)\r\n  }\r\n  // 点击加载下拉数据\r\n  handleLoadData = selectedOptions => {\r\n    const targetOption = selectedOptions[selectedOptions.length-1]\r\n    targetOption.loading = true\r\n    const params = {\r\n      product_classify_id: targetOption.id,\r\n    }\r\n    axios.get('/hcm/hcmProduct/listByClass', {params}).then(res => {\r\n      targetOption.loading = false\r\n      const result = this.handleResponseSucc(res)\r\n      if (!result) {\r\n        return\r\n      }\r\n      if (result.length) {\r\n        targetOption.children = result.map(v => Object.assign({}, v, {value:v.id,label:v.productName}))\r\n      } else {\r\n        targetOption.disabled = true\r\n        targetOption.isLeaf = true\r\n      }\r\n      this.setState({\r\n        classifyList: [...this.state.classifyList],\r\n      })\r\n    }).catch(err => {\r\n      targetOption.loading = false\r\n      this.handleResponseErr(err)\r\n    })\r\n  }\r\n  // 切换面板回调\r\n  handleTabChange = activekey => {\r\n    // console.log(activekey)\r\n    // const { dataList } = this.state\r\n    // let isGetData = false\r\n    // activekey === '' && !dataList.length ? isGetData = true : null\r\n    // activekey !== '' && !this.state[COMMON_MAP[activekey]].length ? isGetData = true : null\r\n    // if (!isGetData) {\r\n    //   return\r\n    // }\r\n    this.setState({\r\n      type: activekey,\r\n      pagination: {...DEFAULT_PAGE}\r\n    }, () => {\r\n      this.getDataList()\r\n    })\r\n  }\r\n  // 选择下拉选项\r\n  handleCascaderChange = (index, value, selectedOptions) => {\r\n    // console.log(value, selectedOptions)\r\n    const copyList = [...this.state.dataList]\r\n    const targetObj = copyList[index]\r\n    targetObj._selected = selectedOptions\r\n    copyList[index] = targetObj\r\n    this.setState({\r\n      dataList: copyList\r\n    })\r\n  }\r\n  // \r\n  toggleFn = (index, flag) => {\r\n    if (flag && this.state.dataList.some(v => v._isShowEdit)) {\r\n      Msg.warning('请先取消或保存编辑状态的条目！')\r\n      return\r\n    }\r\n    const copyList = [...this.state.dataList]\r\n    const targetObj = {...copyList[index]}\r\n    targetObj._isShowEdit = flag\r\n    if (!flag) {\r\n      // 取消操作\r\n      targetObj._isCheckboxStatus = targetObj.type==TYPE_MAP.nobrand\r\n      targetObj._selected = [targetObj.product_class_id, targetObj.product_id]\r\n    }\r\n    copyList[index] = targetObj\r\n    this.setState({\r\n      dataList: copyList\r\n    })\r\n  }\r\n  // 处理响应\r\n  handleResponseSucc = res => {\r\n    const { data, status, message } = res.data\r\n    if (status !== '10000') {\r\n      Msg.error(message)\r\n      return undefined\r\n    }\r\n    return data\r\n  }\r\n  handleResponseErr = err => {\r\n    Msg.error(err.statusText)\r\n  }\r\n  render() {\r\n    return <Tpl that={this} />\r\n  }\r\n}\r\n\r\nexport default App"],"sourceRoot":""}