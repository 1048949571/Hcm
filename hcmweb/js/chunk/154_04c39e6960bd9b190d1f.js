(window.webpackJsonp=window.webpackJsonp||[]).push([[154,221],{1158:function(e,t){},1160:function(e,t){},1176:function(e,t){},156:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(770);t.default={Encrypt:function(e){var t=a.enc.Utf8.parse("hcmabcdefghijklm"),n=a.enc.Utf8.parse(e);return a.AES.encrypt(n,t,{mode:a.mode.ECB,padding:a.pad.Pkcs7}).toString()},Decrypt:function(e){var t=a.enc.Utf8.parse("hcmabcdefghijklm"),n=a.AES.decrypt(e,t,{mode:a.mode.ECB,padding:a.pad.Pkcs7});return a.enc.Utf8.stringify(n).toString()}}},28:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var a=function(t){function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e.Component),n(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return e.createElement("div",{className:this.props.clazzName?this.props.clazzName:"Copyright"},"Copyright © 杭州久点网络技术有限公司")}}]),a}();t.default=a}).call(this,n(1))},532:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=s(n(35)),r=s(n(204)),i=s(n(15)),o=s(n(27)),l=s(n(30)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(34),n(203),n(16),n(26),n(31);var c=s(n(12));function s(e){return e&&e.__esModule?e:{default:e}}l.default.Option,o.default.TextArea;var d=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.getDepartmentLeaderList=function(){var e=t.state.parentId;c.default.get("/hcm/userout/getDepartmentLeaderList",{params:{departmentId:e}}).then(function(e){t.setState({leaderList:e.data.data,departLeader:[]})}).catch(function(e){i.default.error(e.statusText)})},t.chTreeSelect=function(e,n,a,r){var i=t.state;i[r]=e,t.setState(i,function(){})},t.onChange=function(e,n){var a=t.state;a[n]=e.target.value,t.setState(a)},t.handleChange=function(e){t.setState({departLeader:e})},t.onSubmit=function(){var e=t.state,n=e.parentId,a=e.departName,r=e.departLeader;n?!a||a.length<=0?i.default.error("请输入部门名称"):c.default.post("/hcm/department/savaDepartment",{parentId:n,departName:a,departState:1,departLeader:r.join(",")}).then(function(e){if("10000"==e.data.status){i.default.success(e.data.message);var n=t.props,a=n.onShowAdd;(0,n.getDepartmentList)(),a(!1)}else i.default.warning(e.data.message)}).catch(function(e){i.default.error(e.statusText)}):i.default.error("请选择父级部门")},t.state={departmentList:t.props.departmentList,visible:t.props.visible,parentId:null,departName:null,leaderList:[],departLeader:[]},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),u(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=e.departmentList,n=void 0===t?[]:t;this.setState({parentId:null,departName:null,departLeader:[],visible:e.visible,departmentList:n},function(){(0==n.length||n[0]&&"0"!=n[0].key)&&n.unshift({key:"0",title:"无",value:"0"})})}},{key:"render",value:function(){var t=this,n=this.state,i=n.departmentList,l=n.visible,u=n.parentId,c=n.departName,s=(n.leaderList,n.departLeader,this.props.onShowAdd);return e.createElement(a.default,{maskClosable:!1,title:"新增部门",visible:l,className:"add-department",onCancel:function(){return s(!1)},onOk:function(){return t.onSubmit()}},e.createElement("ul",{className:"items"},e.createElement("li",{className:"item"},e.createElement("span",{className:"title  red-ck"},"父级部门"),e.createElement("div",{className:"ipt-box"},e.createElement(r.default,{style:{width:"100%"},dropdownStyle:{maxHeight:200,overflow:"auto"},value:[u],treeData:i,onChange:function(e,n,a){return t.chTreeSelect(e,n,a,"parentId")}}))),e.createElement("li",{className:"item"},e.createElement("span",{className:"title  red-ck"},"部门名称"),e.createElement("div",{className:"ipt-box"},e.createElement(o.default,{onChange:function(e){return t.onChange(e,"departName")},value:c})))))}}]),n}();t.default=d}).call(this,n(1))},62:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={onVisibilityChange:function(e,t){var n="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,a=n.replace(/hidden/i,"visibilitychange"),r=function(){document[n]||console.log("页面非激活"+new Date),document[n]&&console.log("页面激活"+new Date)};document.addEventListener(a,r)},formatAccount:function(e){return e=e.replace(/[\s]/g,"").replace(/(\d{4})(?=\d)/g,"$1 ")},formatThousandMoney:function(t,n){return isNaN(t)?"":(n=n||"",!1===e.isNumeric(t)||0==t?"0.00":0==(t=(t=+t).toFixed(2))?"0.00":n+" "+(t+"").replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,"))},encryption:function(){return(""+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")).replace(/(\d{3})\d*([0-9a-zA-Z]{4})/,"$1****$2")},browser:{versions:function(){var e=navigator.userAgent,t=(navigator.appVersion,"");if(e.indexOf("Ourydc.Yuebaobao")>-1){var n=e.match(/Ourydc.Yuebaobao.*/);if(n.length>0){var a=n[0];t=a.substr(a.indexOf("/")+1)}}return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,weibo:"WeiBo"==e.match(/WeiBo/i)||"Weibo"==e.match(/Weibo/i)||"weibo"==e.match(/weibo/i),qq:"qq"==e.match(/qq/i)||"QQ"==e.match(/QQ/i),qqBrower:-1==e.indexOf("Mobile MQQBrowser")&&-1!=e.indexOf("MQQBrowser"),isInApp:e.indexOf("Ourydc.Yuebaobao")>-1,locAppVersion:t}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},checkAccount:function(e){return/^[a-zA-Z](\w|\s+){5,15}$/.test(this.trim(e||""))},checkUrl:function(e){return/^((ht|f)tps?):\/\/([\w\-]+(\.[\w\-]+)*\/)*[\w\-]+(\.[\w\-]+)*\/?(\?([\w\-\.,@?^=%&:\/~\+#]*)+)?/.test(this.trim(e||""))},Reg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^[^\u4e00-\u9fa5]{5,31}$/.test(this.trim(e||""))},checkPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^.{6,16}$/.test(this.trim(e||""))},trim:function(e){return(e=""+e).replace(/(^\s*)|(\s*$)/g,"")},getCookie:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null},required:function(e){var t=this.trim(e||"");return!(!t||!t.length)},legnthCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INPUT";return this.trim(e||"").length<this.LENGTH[t]},LENGTH:{URL:500,TEXTAREA:200,INPUT:50},getQueryString:function(e){var t=new RegExp("(^|&|[?])"+e+"=([^&]*)(&|$)"),n=window.location.href.substr(1).match(t);return null!=n?n[2]:""},getParamString:function(e,t){var n=new RegExp("(^|&|[?])"+t+"=([^&]*)(&|$)"),a=e.substr(1).match(n);return null!=a?a[2]:""},Trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},deviceCheck:function(){return browser.versions.mobile?browser.versions.android?"android":browser.versions.ios?"ios":"mobile":"web"}}}).call(this,n(112))},766:function(e,t){},845:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a,r,i=g(n(14)),o=g(n(11)),l=g(n(204)),u=g(n(70)),c=g(n(54)),s=g(n(15)),d=g(n(27)),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(18),n(22),n(203),n(85),n(53),n(16),n(26);var m=g(n(12)),p=g(n(28)),h=g(n(532)),v=g(n(62)),b=g(n(156));function g(e){return e&&e.__esModule?e:{default:e}}var y=d.default.TextArea,w=(a=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));r.call(t);var a=t.props.match.params,i=a.id,o=a.type;return t.state={id:i,type:o,addshow:!1,departmentList:[],departid:null,username:null,realname:null,password:null,memo:null},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),f(n,[{key:"componentDidMount",value:function(){var e=this;this.getDepartmentList(),"edit"==this.state.type&&this.getInfo(),m.default.get("/hcm/userout/getParentUseroutName").then(function(t){e.setState({masterName:t.data.data.username})}).catch(function(e){s.default.error(e.statusText)})}},{key:"getInfo",value:function(){var e=this;m.default.get("/hcm/userout/getUserById",{params:{userId:this.state.id,usertype:"c"}}).then(function(t){var n=t.data.data;e.setState({departid:""+n.departid,username:n.username,realname:n.realname,password:"******",memo:n.memo})}).catch(function(e){s.default.error(e.statusText)})}},{key:"render",value:function(){var t=this,n=this.state,a=n.addshow,r=n.masterName,s=n.username,f=n.realname,m=n.password,v=n.memo,b=n.departid,g=n.departmentList,w=n.type;return e.createElement("div",{className:"info-item"},e.createElement("div",{className:"Breadcrumb"},e.createElement(c.default,null,e.createElement(c.default.Item,null,e.createElement("a",{href:"/index.html#/AccountManagement"},"账号管理")),e.createElement(c.default.Item,null,"edit"==w?"编辑":"新增"))),e.createElement("ul",{className:"content"},e.createElement("li",{className:"item"},e.createElement("span",{className:"title red-ck"},"姓名"),e.createElement("div",{className:"ipt-box"},e.createElement(d.default,{onChange:function(e){return t.onChange(e,"realname")},maxLength:"32",value:f}))),e.createElement("li",{className:"item"},e.createElement("span",{className:"title red-ck"},"用户名"),e.createElement("div",{className:"ipt-box"},e.createElement(u.default,{overlayStyle:{maxWidth:"400px"},placement:"right",title:e.createElement("ul",null,e.createElement("li",null,"6 - 16 个字符，可使用数字、字母、下划线;"),e.createElement("li",null,"需以字母开头，字母区分大小写。"),e.createElement("li",null,"首尾空格无效;"),e.createElement("li",null,"创建后不可修改;"))},e.createElement(d.default,{disabled:"edit"==w,addonBefore:r+":",onChange:function(e){return t.onChange(e,"username")},value:s})))),e.createElement("li",{className:"item"},e.createElement("span",{className:"title red-ck"},"密码"),e.createElement("div",{className:"ipt-box"},e.createElement(u.default,{placement:"right",title:"6 - 16  个字符"},e.createElement(d.default,{onChange:function(e){return t.onChange(e,"password")},type:"password",value:m})))),e.createElement("li",{className:"item"},e.createElement("span",{className:"title  red-ck"},"所属部门"),e.createElement("div",{className:"ipt-box"},e.createElement(l.default,{style:{width:"100%"},dropdownStyle:{maxHeight:300,overflow:"auto"},value:[b],treeData:g,onChange:function(e,n,a){return t.chTreeSelect(e,n,a,"departid")}})),e.createElement("a",{onClick:function(){return t.onShowAdd(!0)},style:{fontSize:"14px",paddingLeft:"20px"}},e.createElement(o.default,{style:{paddingRight:"10px"},type:"plus-circle",theme:"outlined"}),"新增部门")),e.createElement("li",{className:"item"},e.createElement("span",{className:"title"},"备注说明"),e.createElement("div",{className:"ipt-box"},e.createElement(y,{onChange:function(e){return t.onChange(e,"memo")},value:v,placeholder:"",autosize:{minRows:2,maxRows:6}}))),e.createElement("li",{className:"item"},e.createElement("span",{className:"title"}),e.createElement("div",{className:"ipt-box"},e.createElement(i.default,{className:"AccountEdit btn2-main",onClick:function(){return t.onSubmit()}},"确定"),e.createElement("a",{href:"/index.html#/AccountManagement"},e.createElement(i.default,null,"返回"))))),e.createElement(h.default,{getDepartmentList:function(){return t.getDepartmentList()},onShowAdd:function(e){return t.onShowAdd(e)},departmentList:g,visible:a}),e.createElement(p.default,{clazzName:"copyright"}))}}]),n}(),r=function(){var e=this;this.getDepartmentList=function(){m.default.get("/hcm/department/fuByIds",{params:{id:0}}).then(function(t){if("10000"==t.data.status&&t.data.data){var n=t.data.data;e.setState({departmentList:function e(t){return t.map(function(t,n){return null!=t.subSysDepartment?{title:t.departName,value:""+t.id,key:""+t.id,children:e(t.subSysDepartment)}:{title:t.departName,value:""+t.id,key:""+t.id}})}(n)})}}).catch(function(e){s.default.error(e.statusText)})},this.chTreeSelect=function(t,n,a,r){var i=e.state;i[r]=t,e.setState(i)},this.onChange=function(t,n){var a=e.state;a[n]=t.target.value,e.setState(a)},this.onSubmit=function(){var t=e.state,n=t.masterName,a=t.departid,r=t.username,i=t.realname,o=t.password,l=t.memo,u=t.id,c=t.type;null!=i&&0!=i.length?v.default.legnthCheck(i,"INPUT")?v.default.checkAccount(r)?v.default.checkPassword(o)?a?v.default.legnthCheck(l,"URL")?(LoadingModal({bl:!0,text:"保存中,请稍后..."}),m.default.post("/hcm/userout/saveUserOutChildren",{departid:a,realname:i,password:b.default.Encrypt(v.default.trim(o)),memo:l,username:n+":"+v.default.trim(r),id:"edit"==c?u:null}).then(function(t){"10000"==t.data.status?(s.default.success("成功"),"edit"==c?window.location.href="/index.html#/AccountManagement":e.setState({addshow:!1,departid:null,username:null,realname:null,password:null,memo:null}),LoadingModal({bl:!1})):(s.default.warning(t.data.message),LoadingModal({bl:!1}))}).catch(function(e){s.default.error(e.statusText)})):s.default.error("备注说明长度不允许超过500"):s.default.error("请输入部门"):s.default.error("密码长度不符"):s.default.error("请按照要求用户名"):s.default.error("姓名长度不允许超过50"):s.default.error("请输入姓名")},this.onShowAdd=function(t){e.setState({addshow:t})}},a);t.default=w}).call(this,n(1))}}]);