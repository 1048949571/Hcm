{"version":3,"sources":["webpack:///./app/widget/index/Shop/DataPresentation/main.js"],"names":["DataPresentation","props","GetDateStr","AddDayCount","dd","Date","setDate","getDate","y","getFullYear","m","getMonth","d","shopDataDayReportPageList","pageNo","pageSize","start_time","end_time","ajax","post","then","res","console","log","data","status","content","length","setState","link_taobao","totalNum","totalElements","obj","error","message","zrsj","success","state","onChange","date","dateString","undefined","SwitchonChange","onPaginationSize","current","changePagination","columns","title","dataIndex","render","record","index","moment","parseInt","daydate","format","width","submit_status","submit_time","ProductInformation_list","React","Component","create"],"mappings":"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","file":"js/chunk/343_84a113f6c9de05470dfa.js","sourcesContent":["import Tpl from './tpl';\r\nimport ajax from '../../../../js/common/ajax'\r\nimport { Form, message } from 'antd';\r\nclass DataPresentation extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        const columns = [{\r\n            title: '序号',\r\n            dataIndex: 'entity_owner_name',\r\n            render: (content, record, index) => (\r\n                <span key={index}>\r\n                    {index+1}\r\n                </span>\r\n            )\r\n        }, {\r\n            title: '数据时间',\r\n            dataIndex: 'platform_code',\r\n            render: (content, record, index) => (\r\n                <span key={index}>\r\n                    <a href={`/index.html#/DataDetails/${moment(parseInt(record.daydate)).format('YYYY-MM-DD')}`}>\r\n                    {moment(parseInt(record.daydate)).format('YYYY-MM-DD')} 销售数据报表\r\n                    </a>\r\n                  \r\n                </span>\r\n            )\r\n        }, {\r\n            title: '提报时间',\r\n            width: \"200px\",\r\n            render: (content, record, index) => (\r\n                <span key={index}>\r\n                {\r\n                    record.submit_status==\"1\" ? <span> {moment(parseInt(record.submit_time)).format('YYYY-MM-DD HH:mm:ss')}</span> : null\r\n                }\r\n                </span>\r\n            )\r\n        }, {\r\n            title: '状态',\r\n            render: (content, record, index) => (\r\n                <span key={index}>\r\n                  {\r\n                      record.submit_status==\"0\" ? <span>未提报 <a href={`/index.html#/DataDetails/${moment(parseInt(record.daydate)).format('YYYY-MM-DD')}`}>立即提报></a></span> : \r\n                      <span>已提报 <a href={`/index.html#/DataDetails/${moment(parseInt(record.daydate)).format('YYYY-MM-DD')}`}>查看详情</a></span>\r\n                  }\r\n                </span>\r\n            )\r\n        }]\r\n        this.state = {\r\n            ProductInformation_list:columns,\r\n            link_taobao:[],\r\n            pageNo:1,\r\n            totalNum:0,\r\n            pageSize:10,\r\n            obj:\"\"\r\n        }\r\n\r\n\r\n    }\r\n    GetDateStr = (AddDayCount) => {\r\n        var dd = new Date(); dd.setDate(dd.getDate() + AddDayCount);\r\n        var y = dd.getFullYear(); var m = (dd.getMonth() + 1) < 10 ? \"0\" + (dd.getMonth() + 1) : (dd.getMonth() + 1);\r\n        var d = dd.getDate() < 10 ? \"0\" + dd.getDate() : dd.getDate();\r\n        return y + \"-\" + m + \"-\" + d;\r\n    }\r\n    \r\n    componentDidMount() {\r\n        this.setState({\r\n            start_time:this.GetDateStr(-31),\r\n            end_time:this.GetDateStr(-1)\r\n        },()=>{\r\n            this.shopDataDayReportPageList(this.state.pageNo,this.state.pageSize,this.state.start_time,this.state.end_time)\r\n        })\r\n       \r\n      \r\n    }\r\n    shopDataDayReportPageList=(pageNo,pageSize,start_time,end_time)=>{\r\n        ajax.post(\"/hcm/dayReport/shopDataDayReportPageList\", {\r\n            pageNo:pageNo,\r\n            pageSize:pageSize,\r\n            start_time:start_time,\r\n            end_time:end_time\r\n        }).then((res) => {\r\n            console.log(res)\r\n            if (res.data.status == 10000) {\r\n                \r\n                if (res.data.data.content.length) {\r\n                    this.setState({\r\n                        link_taobao: res.data.data.content,\r\n                        totalNum:res.data.data.totalElements,\r\n                    }, () => {\r\n                        \r\n\r\n                    })\r\n                }\r\n                this.setState({\r\n                    obj:res.data.data.obj\r\n                })\r\n\r\n            } else {\r\n\r\n                message.error(res.data.message)\r\n            }\r\n        })\r\n    }\r\n    zrsj=()=>{\r\n        ajax.post(\"/hcm/dayReport/shopZRReportTJ\").then((res) => {\r\n        \r\n            if (res.data.status == 10000) {\r\n                \r\n                    message.success(\"昨日数据提报统计成功\")\r\n                   // this.shopDataDayReportPageList(this.state.pageNo,this.state.pageSize,this.GetDateStr(-30),this.GetDateStr(0))\r\n                   this.shopDataDayReportPageList(this.state.pageNo,this.state.pageSize,this.state.start_time,this.state.end_time)\r\n              \r\n             \r\n            } else {\r\n\r\n                message.error(res.data.message)\r\n            }\r\n        })\r\n    }\r\n    onChange=(date,dateString)=>{\r\n        if (date != \"\" && date != [] && date != undefined) {\r\n            this.setState({\r\n                start_time: dateString[0],\r\n                end_time: dateString[1],\r\n                link_taobao: [],\r\n                totalNum:0\r\n            }, () => {\r\n                this.shopDataDayReportPageList(this.state.pageNo,this.state.pageSize,this.state.start_time,this.state.end_time)\r\n            })\r\n        } else {\r\n            this.setState({\r\n                start_time: this.GetDateStr(-30),\r\n                end_time: this.GetDateStr(0),\r\n                link_taobao: [],\r\n                totalNum:0\r\n            }, () => {\r\n                this.shopDataDayReportPageList(this.state.pageNo,this.state.pageSize,this.state.start_time,this.state.end_time)\r\n            })\r\n\r\n        }\r\n    }\r\n    SwitchonChange=()=>{\r\n        if(this.state.obj==\"0\"){\r\n            ajax.post(\"/hcm/dayReport/shopAutoSubmit\", {\r\n                state:\"1\"\r\n            }).then((res) => {\r\n                console.log(res)\r\n                if (res.data.status == 10000) {\r\n    \r\n                    message.success(\"已开启自动提报\")\r\n                    this.shopDataDayReportPageList(this.state.pageNo,this.state.pageSize,this.GetDateStr(-30),this.GetDateStr(0))\r\n  \r\n                } else {\r\n    \r\n                    message.error(res.data.message)\r\n                }\r\n            })\r\n        }else{\r\n            ajax.post(\"/hcm/dayReport/shopAutoSubmit\", {\r\n                state:\"0\"\r\n            }).then((res) => {\r\n                console.log(res)\r\n                if (res.data.status == 10000) {\r\n    \r\n                    message.success(\"已关闭自动提报\")\r\n                    this.shopDataDayReportPageList(this.state.pageNo,this.state.pageSize,this.GetDateStr(-30),this.GetDateStr(0))\r\n  \r\n                } else {\r\n    \r\n                    message.error(res.data.message)\r\n                }\r\n            })\r\n        }\r\n        \r\n    }\r\n    onPaginationSize=(current, pageSize)=>{\r\n        this.setState({\r\n            pageSize:pageSize,\r\n            link_taobao:[]\r\n        },()=>{\r\n            this.shopDataDayReportPageList(this.state.pageNo,this.state.pageSize,this.state.start_time,this.state.end_time)\r\n        })\r\n    }\r\n    changePagination=(current, pageSize)=>{\r\n        this.setState({\r\n            pageNo:current,\r\n            link_taobao:[]\r\n        },()=>{\r\n            this.shopDataDayReportPageList(this.state.pageNo,this.state.pageSize,this.state.start_time,this.state.end_time)\r\n       \r\n        })\r\n    }\r\n    render() {\r\n        return <Tpl that={this} />\r\n    }\r\n}\r\nexport default Form.create()(DataPresentation)"],"sourceRoot":""}