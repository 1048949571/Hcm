(window.webpackJsonp=window.webpackJsonp||[]).push([[250],{878:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(70)),l=f(a(121)),o=f(a(122)),i=f(a(90)),r=f(a(15)),s=f(a(35)),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(85),a(159),a(158),a(91),a(16),a(34);var u=f(a(640)),d=f(a(12)),m=f(a(120));function f(e){return e&&e.__esModule?e:{default:e}}var p=s.default.confirm,h=function(t){function a(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return s.inviteLinkStatus=function(e){s.setState({inviteLinkStatus:e})},s.errorListStatus=function(e){s.setState({errorListStatus:e})},s.getPlatform=function(){s.setState({platForm:can.platform||[]})},s.onSearch=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s.setState({pageNo:1,dealername:e?null:s.state.dealername,isauthed:e?null:s.state.isauthed,platform_code:e?null:s.state.platform_code,shopname:e?null:s.state.shopname,oldSearch:{dealername:e?null:s.state.dealername,isauthed:e?null:s.state.isauthed,platform_code:e?null:s.state.platform_code,shopname:e?null:s.state.shopname}},function(){s.getList()})},s.onTableCheckChange=function(e){s.setState({selectedRowKeys:e,checkAll:!1})},s.changePagination=function(e,t){s.setState({pageNo:e,pageSize:t},function(){s.getList()})},s.onPaginationSize=function(e,t){s.setState({pageNo:1,pageSize:t},function(){s.getList()})},s.onChange=function(e,t){var a=s.state;a[t]=e.target.value,s.setState(a)},s.onsChange=function(e,t){var a=s.state;a[t]=e,s.setState(a)},s.handleClearIconClick=function(e){var t=s.state;t[e]=null,s.setState(t)},s.getList=function(){var e=s.state,t=e.pageNo,a=e.pageSize,n=e.dealername,l=e.isauthed,o=e.platform_code,i=e.shopname;e.totalNum,e.id;d.default.get("/hcm/hcmShop/getPageByBmc",{params:{dealername:n,isauthed:l,platform_code:o,shopname:i,pageNo:t,pageSize:a}}).then(function(e){var t=e.data.data,a=t.content,n=t.pageNumber,l=t.pageSize,o=t.totalElements;t.obj;s.setState({selectedRowKeys:[],checkAll:!1,dataList:a,pageNumber:n,pageSize:l,totalElements:o})}).catch(function(e){r.default.error(e.statusText)})},s.rmAll=function(){var t=s,a=s.state,n=a.checkAll,l=a.selectedRowKeys,o=a.totalElements,i=s.state.oldSearch,c=i.dealername,u=i.isauthed,m=i.platform_code,f=i.shopname;0!=l.length?p({title:null,content:e.createElement("div",null,e.createElement("div",{className:"tips"},"提示"),e.createElement("div",{className:"pline"}),e.createElement("p",{className:"Dtitle"},"你确认要删除勾选的",n?o:l.length,"个店铺吗？"),e.createElement("p",null,"删除后",e.createElement("span",{className:"red"},"相关店铺将无法找回"))),okText:"确定",cancelText:"取消",okButtonProps:{className:"btn2-main"},cancelButtonProps:{className:"btn2-sub"},className:"alert-item-confirm",onOk:function(){d.default.post("/hcm/hcmShop/Delete",{ids:n?"checkAll":l.join(","),dealername:n?c:"",isauthed:n?u:"",platform_code:n?m:"",shopname:n?f:""}).then(function(e){r.default.success(e.data.message),t.onSearch(!0)}).catch(function(e){r.default.error(e.statusText)})}}):r.default.error("至少选择一条")},s.rmItem=function(t){s.state.id;var a=s;p({title:null,content:e.createElement("div",null,e.createElement("div",{className:"tips"},"提示"),e.createElement("div",{className:"pline"}),e.createElement("p",{className:"Dtitle"},"你确认要删除该店铺吗？"),e.createElement("p",null,"删除后",e.createElement("span",{className:"red"},"该店铺将无法找回"))),okText:"确定",cancelText:"取消",okButtonProps:{className:"btn2-main"},cancelButtonProps:{className:"btn2-sub"},className:"alert-item-confirm",onOk:function(){d.default.post("/hcm/hcmShop/Delete",{ids:t.shopdealerid}).then(function(e){r.default.success(e.data.message),a.getList()}).catch(function(e){r.default.error(e.statusText)})}})},s.getByProduct=function(){d.default.get("/hcm/hcmCustomModel/getBybmcidAndModule",{params:{module:"SHOP"}}).then(function(e){var t=e.data.data;s.setState({formatColumn:s.formAtDom(t)})}).catch(function(e){r.default.error(e.statusText)})},s.formAtDom=function(t){var a=s.state,r=(a.name,a.id,a.setTableVisible,[{title:"序号",dataIndex:"index",fixed:"left",sort:0,width:80,key:"index",render:function(e,t,a){return a+1}}]),c=function(a){t[a].data.forEach(function(t,l){if(t.isChecked&&"platformname"!=t.fieldvalue)return t.target=[a,l,t],r.push({title:t.fieldname,dataIndex:t.fieldvalue,key:t.id,sort:t.sort,className:"item-column",render:function(a,l,o){return"dealername"===t.fieldvalue?"{}"==JSON.stringify(l.status)?e.createElement("span",null,a):e.createElement("div",null,e.createElement("span",{style:{paddingRight:10}},a),e.createElement(n.default,{placement:"bottom",title:l.status.info},e.createElement("span",{className:l.status.info_type},l.status.title))):"shopName"===t.fieldvalue?e.createElement("div",null,e.createElement("a",{onClick:function(){return s.shopDetail.current.onShow(l.id,l.dealerid)},style:{paddingRight:10}},a),"AUTHED"==l.isauthed?e.createElement("img",{style:{verticalAlign:"bottom",paddingRight:10},src:"../../../../img/dinggou.jpg"}):null,(0,m.default)(l.platform_code,{verticalAlign:"bottom",width:"20px",height:"20px"})):"shopUrl"===t.fieldvalue?e.createElement("a",{className:"urlHide",target:"_blank",href:l.shopUrl},l.shopUrl):"productclassifyid"===t.fieldvalue?e.createElement("div",{className:"table-tb-box"},e.createElement(n.default,{placement:"bottom",title:l.productClassifyName?l.productClassifyName.join(","):null},l.productClassifyName?l.productClassifyName.join(","):null)):e.createElement("div",{className:"table-tb-box"},e.createElement(n.default,{placement:"bottom",title:a},a))}})})};for(var u in t)c(u);return r.push({title:"操作",dataIndex:"action",key:"action",sort:999999,width:180,align:"center",fixed:"right",render:function(t,a,n){return e.createElement("div",null,e.createElement("a",{href:"index.html#/ActionShopFile/edit/"+a.dealerid+"/"+a.id},e.createElement("img",{style:{verticalAlign:"text-bottom",paddingRight:"6px"},src:"../../../img/icon/icon_operating_edit.png"}),"编辑"),e.createElement(i.default,{type:"vertical"}),e.createElement(l.default,{overlay:e.createElement(o.default,null,e.createElement(o.default.Item,null,e.createElement("a",{className:"A-COLOR",onClick:function(){return s.rmItem(a)}},e.createElement("img",{style:{verticalAlign:"text-bottom",paddingRight:"6px"},src:"../../../img/icon/icon_operating_del.png"}),"删除")),e.createElement(o.default.Item,null,e.createElement("a",{className:"A-COLOR",onClick:function(){return s.ChangeHis(a)}},e.createElement("img",{style:{verticalAlign:"text-bottom",paddingRight:"4px"},src:"../../../img/icon/icon_operating_history.png"}),"变更历史")))},e.createElement("a",null,"···  更多")))}}),r},s.ChangeHis=function(e){window.location="/index.html#/ChangeHistorys/HcmShopBmcDealer/"+e.shopName+"/"+e.shopdealerid},s.ProduHistory=function(){window.location="/index.html#/ChangeHistoryx/HcmShopBmcDealer/"},s.checkAll=function(e){var t=s.state.selectedRowKeys;e?s.state.dataList.forEach(function(e,a){t.push(e.shopdealerid)}):t=[],s.setState({checkAll:e,selectedRowKeys:t})},s.handleUpload=function(){var e=s.state.fileList,t=new FormData;e.forEach(function(e){t.append("file",e)}),s.setState({uploading:!0}),(0,d.default)({method:"post",url:"/hcm/hcmShop/readExcelFile",headers:{"Content-Type":"multipart/form-data"},data:t,onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);s.setState({percent:t})}}).then(function(e){s.setState({fileList:[],uploading:!1,uploadVisible:!1}),s.getList(),"10000"==e.data.status?e.data.data&&e.data.data.length?(r.default.warning(e.data.message),s.errorListStatus(!0),s.setState({errorList:e.data})):r.default.success(e.data.message):r.default.warning(e.data.message)}).catch(function(){s.setState({uploading:!1}),r.default.error("upload failed.")})},s.propsUpload=function(){return{action:"/hcm/hcmShop/readExcelFile",accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onRemove:function(e){s.setState(function(t){var a=t.fileList,n=a.indexOf(e),l=a.slice();return l.splice(n,1),{fileList:l}})},beforeUpload:function(e){return s.setState(function(){return{fileList:[e]}}),!1},fileList:s.state.fileList}},s.onuploadVisible=function(e){s.setState({uploadVisible:e,fileList:[],uploading:!1,percent:null})},s.onShowSetTable=function(e,t){"getlist"==t&&(s.getByProduct(),s.onSearch()),s.setState({setTableVisible:e},function(){e&&s.ShopFile_SetTable.current.getByProduct()})},s.ShopFile_SetTable=e.createRef(),s.shopDetail=e.createRef(),s.state={inviteLinkStatus:!1,errorListStatus:!1,errorList:{},fileList:[],percent:null,uploading:!1,uploadVisible:!1,formatColumn:[],selectedRowKeys:[],addStatus:!1,visible:!1,dataList:[],setTableVisible:!1,dealername:null,isauthed:null,platform_code:null,shopname:null,oldSearch:{dealername:null,isauthed:null,platform_code:null,shopname:null},platForm:[],pageNo:1,pageSize:10,checkAll:!1,totalElements:null},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e.Component),c(a,[{key:"componentDidMount",value:function(){this.getList(),this.getByProduct(),this.getPlatform()}},{key:"render",value:function(){return e.createElement(u.default,{that:this})}}]),a}();t.default=h}).call(this,a(1))}}]);