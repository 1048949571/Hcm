{"version":3,"sources":["webpack:///./app/widget/index/ComplaintReport/main.js"],"names":["App","props","getAllData","platform","ipr","getComplaintLinkSummary","getShopComplaintCount","getComplaintList","getComplaintLinkSummary_1688","getShopComplaintCount_1688","getComplaintList_1688","handleTabChange","setState","currentTab","key","tablePage","pageNo","pageSize","pagination","state","alreadyComplaintList","filter","v","report_id","str","length","complaintModelList","map","ipr_name","ipr_id","join","currentIpr","goTo","history","push","path","getAlreadyComplaintList","axios","post","type","then","res","data","status","message","catch","error","iprNum","start_time","end_time","format","ipr_num","myChart","getData","iprName","rankPageChange","Object","assign","page","tablePageChange","dateChange","dates","list","reduce","a","b","concat","ipr_names","ipr_nums","url","flag","pageKey","isPage","inner_platform","LoadingModal","bl","content","pageNumber","totalElements","handleDisabledDate","current","moment","echarts","init","document","getElementById","totnum","item","value","total","currentValue","index","arr","setOption","tooltip","trigger","formatter","legend","width","orient","right","bottom","itemGap","name","series","radius","center","color","silent","label","position","fontSize","rich","align","c","padding","avoidLabelOverlap","match","params","subtract","shopComplaintRank","complaintListDetail","React","Component"],"mappings":"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","file":"js/chunk/289_8e1ae4430fb88c4deee3.js","sourcesContent":["import Tpl from './tpl';\r\nimport echarts from 'echarts';\r\n\r\nimport { message as Msg } from 'antd'\r\nimport axios from '../../../js/common/ajax'\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      platform: props.match.params.platform,\r\n      data: [],\r\n      inner_platform: 'taobao',\r\n      start_time: moment().subtract(90, 'd'),\r\n      end_time: moment(),\r\n      pagination: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n      },\r\n      tablePage: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n      },\r\n      shopComplaintRank: [],\r\n      complaintListDetail: [],\r\n\r\n      alreadyComplaintList: [],\r\n      currentTab: '',\r\n      currentIpr: '',\r\n    }\r\n  }\r\n  componentWillMount() {\r\n    this.getAlreadyComplaintList()\r\n    this.getAllData(this.state.platform, '')\r\n  }\r\n  getAllData = (platform, ipr) => {\r\n    if (platform === 'taobao') {\r\n      this.getComplaintLinkSummary(ipr)\r\n      this.getShopComplaintCount(ipr)\r\n      this.getComplaintList(ipr)\r\n    }\r\n    if (platform === '1688') {\r\n      // 默认获取全部\r\n      this.getComplaintLinkSummary_1688(ipr)\r\n      this.getShopComplaintCount_1688(ipr)\r\n      this.getComplaintList_1688(ipr)\r\n    }\r\n  }\r\n  handleTabChange = key => {\r\n    // console.log('-------tab', key)\r\n    this.setState({\r\n      currentTab: key,\r\n      tablePage: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n      },\r\n      pagination: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n      },\r\n    }, () => {\r\n      const platform = this.state.platform\r\n      const ipr = this.state.alreadyComplaintList.filter(v => v.report_id === key)\r\n      const str = ipr.length ? ipr[0].complaintModelList.map(v => {\r\n        if (platform === 'taobao') {\r\n          return v.ipr_name\r\n        }\r\n        if (platform === '1688') {\r\n          return v.ipr_id\r\n        }\r\n      }).join(',') : ''\r\n      this.setState({\r\n        currentIpr: str,\r\n      })\r\n      this.getAllData(platform, key?str:key)\r\n    })\r\n\r\n  }\r\n  goTo = path => {\r\n    this.props.history.push(path)\r\n  }\r\n  // 获取已设置投诉报表列表\r\n  getAlreadyComplaintList = () => {\r\n    axios.post('/hcm/complaint/report_list', {type: this.state.platform}).then(res => {\r\n      const { data, status, message } = res.data\r\n      if (status === '10000') {\r\n        this.setState({\r\n          alreadyComplaintList: data\r\n        })\r\n      }\r\n    }).catch(err => {\r\n      Msg.error('系统繁忙，请稍后再试！')\r\n    })\r\n  }\r\n  // 1688投诉链接情况概览数据\r\n  getComplaintLinkSummary_1688 = (iprNum) => {\r\n    const {\r\n      start_time,\r\n      end_time,\r\n      alreadyComplaintList,\r\n      currentTab,\r\n    } = this.state\r\n    // const list = alreadyComplaintList.length?alreadyComplaintList.map(v => v.complaintModelList).reduce((a,b) => a.concat(b), []):[]\r\n    // const account_ids = list.length?list.map(v => v.account_id).join(','):''\r\n    // console.log('--account', account_ids, currentTab === '')\r\n    axios.post('/hcm/complaint/link_1688', {\r\n      start_time: start_time.format('YYYY-MM-DD'),\r\n      end_time: end_time.format('YYYY-MM-DD'),\r\n      ipr_num: iprNum,\r\n      // account_id: currentTab === '' ? '' : account_ids,\r\n    }).then(res => {\r\n      // console.log(res)\r\n      const { data, status, message } = res.data\r\n      if (status === '10000') {\r\n        this.setState({\r\n          data: data\r\n        },()=>{\r\n          this.myChart()\r\n        })\r\n      }\r\n    }).catch(err => {\r\n      Msg.error('系统繁忙，请稍后再试！')\r\n    })\r\n  }\r\n  // 1688获取店铺投诉次数\r\n  getShopComplaintCount_1688 = (iprNum) => {\r\n    this.getData('/hcm/complaint/reportSort_1688', 'shopComplaintRank', iprNum, '1688', 'pagination')\r\n  }\r\n  // 1688获取投诉列表\r\n  getComplaintList_1688 = iprNum => {\r\n    this.getData('/hcm/complaint/reportList_1688', 'complaintListDetail', iprNum, '1688', 'tablePage')\r\n  }\r\n  // taobao投诉链接概览数据\r\n  getComplaintLinkSummary = (iprName) => {\r\n    const {\r\n      start_time,\r\n      end_time,\r\n    } = this.state\r\n    axios.post('/hcm/complaint/reportStatus_taobao', {\r\n      start_time: start_time.format('YYYY-MM-DD'),\r\n      end_time: end_time.format('YYYY-MM-DD'),\r\n      iprName,\r\n    }).then(res => {\r\n      // console.log(res)\r\n      const { data, status, message } = res.data\r\n      if (status === '10000') {\r\n        this.setState({\r\n          data: data\r\n        },()=>{\r\n          this.myChart()\r\n        })\r\n      }\r\n    }).catch(err => {\r\n      Msg.error('系统繁忙，请稍后再试！')\r\n    })\r\n  }\r\n  // taobao获取店铺被投诉次数\r\n  getShopComplaintCount = (iprName) => {\r\n    this.getData('/hcm/complaint/reportSort_taobao', 'shopComplaintRank', iprName, 'taobao', 'pagination')\r\n  }\r\n  // taobao获取投诉列表\r\n  getComplaintList = (iprName) => {\r\n    this.getData('/hcm/complaint/reportList_taobao', 'complaintListDetail', iprName, 'taobao', 'tablePage')\r\n  }\r\n  rankPageChange = page => {\r\n    // console.log(page)\r\n    const { platform, alreadyComplaintList, currentTab, currentIpr } = this.state\r\n    // const list = alreadyComplaintList.length?alreadyComplaintList.map(v => v.complaintModelList).reduce((a,b) => a.concat(b), []):[]\r\n    // const ipr_names = list.length?list.map(v => v.ipr_name).join(','):''\r\n    // const ipr_nums = list.length?list.map(v => v.ipr_id).join(','):''\r\n    this.setState({\r\n      pagination: Object.assign({}, this.state.pagination, {\r\n        pageNo: page,\r\n      })\r\n    }, () => {\r\n      if (platform === 'taobao') {\r\n        this.getShopComplaintCount(currentTab === '' ? '' : currentIpr)\r\n      }\r\n      if (platform === '1688') {\r\n        this.getShopComplaintCount_1688(currentTab === '' ? '' : currentIpr)\r\n      }\r\n    })\r\n  }\r\n  tablePageChange = page => {\r\n    const { platform, alreadyComplaintList, currentTab, currentIpr } = this.state\r\n    // const list = alreadyComplaintList.length?alreadyComplaintList.map(v => v.complaintModelList).reduce((a,b) => a.concat(b), []):[]\r\n    // const ipr_names = list.length?list.map(v => v.ipr_name).join(','):''\r\n    // const ipr_nums = list.length?list.map(v => v.ipr_id).join(','):''\r\n    this.setState({\r\n      tablePage: Object.assign({}, this.state.tablePage, {\r\n        pageNo: page,\r\n      })\r\n    }, () => {\r\n      if (platform === 'taobao') {\r\n        this.getComplaintList(currentTab === '' ? '' : currentIpr)\r\n      }\r\n      if (platform === '1688') {\r\n        this.getComplaintList_1688(currentTab === '' ? '' : currentIpr)\r\n      }\r\n      \r\n    })\r\n  }\r\n  dateChange = dates => {\r\n    // console.log(dates)\r\n    // return\r\n    if (!dates.length) {\r\n      return\r\n    }\r\n    const { platform, alreadyComplaintList, currentTab } = this.state\r\n    const list = alreadyComplaintList.length?alreadyComplaintList.map(v => v.complaintModelList).reduce((a,b) => a.concat(b), []):[]\r\n    const ipr_names = list.length?list.map(v => v.ipr_name).join(','):''\r\n    const ipr_nums = list.length?list.map(v => v.ipr_id).join(','):''\r\n    // if (platform === 'taobao') {\r\n      this.setState({\r\n        start_time: dates[0],\r\n        end_time: dates[1],\r\n        pagination: Object.assign({}, this.state.pagination, {\r\n          pageNo: 1,\r\n        }),\r\n        tablePage: Object.assign({}, this.state.tablePage, {\r\n          pageNo: 1,\r\n        })\r\n      }, () => {\r\n        // this.getComplaintLinkSummary()\r\n        this.getAllData(platform, currentTab === '' ? '' : (platform === 'taobao' ? ipr_names : ipr_nums))\r\n      })\r\n    // }\r\n    // if (platform === '1688') {\r\n\r\n    // }\r\n  }\r\n  // 获取数据\r\n  getData = (url, key, ipr, flag, pageKey, isPage=true) => {\r\n    const {\r\n      inner_platform,\r\n      start_time,\r\n      end_time,\r\n      // pagination,\r\n      alreadyComplaintList,\r\n      currentTab,\r\n    } = this.state\r\n    const data = {\r\n      // iprName: 'FLYCO飞科',\r\n      // platformCode: inner_platform,\r\n      start_time: start_time.format('YYYY-MM-DD'),\r\n      end_time: end_time.format('YYYY-MM-DD'),\r\n    }\r\n    if (isPage) {\r\n      // data.pageNo = pagination.pageNo\r\n      // data.pageSize = pagination.pageSize\r\n      data.pageNo = this.state[pageKey].pageNo\r\n      data.pageSize = this.state[pageKey].pageSize\r\n    }\r\n    if (flag === 'taobao') {\r\n      data.iprName = ipr\r\n    }\r\n    if (flag === '1688') {\r\n      // const list = alreadyComplaintList.length?alreadyComplaintList.map(v => v.complaintModelList).reduce((a,b) => a.concat(b), []):[]\r\n      // const account_ids = list.length?list.map(v => v.account_id).join(','):''\r\n      data.ipr_num = ipr\r\n      // data.account_id = currentTab === '' ? '' : account_ids\r\n    }\r\n    LoadingModal({bl:true})\r\n    axios.post(url,data).then(res => {\r\n      // console.log(res)\r\n      LoadingModal({bl:false})\r\n      const { data, status, message } = res.data\r\n      if (status === '10000') {\r\n        this.setState({\r\n          [key]: data.content,\r\n          // pagination: Object.assign({}, this.state.pagination, {\r\n          //   pageNo: data.pageNumber,\r\n          //   pageSize: data.pageSize\r\n          // })\r\n          [pageKey]: Object.assign({}, this.state[pageKey], {\r\n            pageNo: data.pageNumber,\r\n            pageSize: data.pageSize,\r\n            totalElements: data.totalElements\r\n          }),\r\n        })\r\n      }\r\n    }).catch(err => {\r\n      LoadingModal({bl:false})\r\n      Msg.error('系统繁忙，请稍后再试！')\r\n    })\r\n  }\r\n  // 90天之内的可以选择\r\n  handleDisabledDate = current => {\r\n    // return current > moment() || current < moment().subtract(90, 'd')\r\n    return current > moment()\r\n  }\r\n\r\n  componentDidMount(){\r\n    \r\n  }\r\n  myChart = () => {\r\n    let {data} = this.state;\r\n    const myChart = echarts.init(document.getElementById('echarts'));\r\n    let totnum = 0;\r\n    \r\n    if (data.length) {\r\n      totnum = data.map(item => item.value).reduce((total, currentValue, index, arr) => {\r\n        return total + currentValue\r\n      })\r\n    }\r\n    myChart.setOption({\r\n      tooltip: {\r\n        trigger: 'item',\r\n        formatter: \"{b}: {c} ({d}%)\"\r\n      },\r\n      legend: {\r\n        width:'100%',\r\n        orient: 'horizontal',\r\n        right: 'center',\r\n        bottom: '20',\r\n        itemGap: 20,\r\n        data: data.map(item => item.name)\r\n      },\r\n\r\n      series: [\r\n        {\r\n          name: '总提交数',\r\n          type: 'pie',\r\n          radius: ['0%', '30%'],\r\n          center: ['50%', '48%'],\r\n          color: ['#fff'],\r\n          silent: true,\r\n          label: {\r\n            position: 'center',\r\n            formatter: '{c| {c}}\\n{a|{a}}',\r\n            color: '#333',\r\n            fontSize: 20,\r\n            rich: {\r\n              a: {\r\n                fontSize: 14,\r\n                color: '#999',\r\n                align: 'center'\r\n              },\r\n              c: {\r\n                color: '#333',\r\n                fontSize: 20,\r\n                padding: 10,\r\n                align: 'center'\r\n              }\r\n            }\r\n          },\r\n          data: [\r\n            { value: totnum, name: '' }\r\n          ]\r\n        },\r\n        {\r\n          type: 'pie',\r\n          radius: ['50%', '70%'],\r\n          center: ['50%', '48%'],\r\n          label: {\r\n            formatter: '{b}：{c}  ({d}%)',\r\n          },\r\n          avoidLabelOverlap: true,\r\n          color: ['#55a0f8', '#66c8ca', '#72c77c', '#f4d358', '#e17c7d', '#8e66dd','#2b5fb9','#50e667','#e650cf'],\r\n          data: data\r\n        }\r\n      ]\r\n    })\r\n\r\n  }\r\n  render() {\r\n    return <Tpl that={this} />\r\n  }\r\n}\r\n\r\nexport default App"],"sourceRoot":""}