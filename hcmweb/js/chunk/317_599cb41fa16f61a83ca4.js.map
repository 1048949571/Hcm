{"version":3,"sources":["webpack:///./app/widget/index/MonitorLowPriceScreenshot/main.js"],"names":["App","props","dateChange","dates","length","setState","start_time","end_time","pagination","pageNum","pageSize","getScreenShot","MoreClick","Object","assign","state","parseInt","itemid","platform","detail","data","platform_code","format","LoadingModal","bl","axios","post","then","res","status","message","screenshotList","list","count","error","catch","getDetailData","id","match","params","productId","optionId","moment","subtract","React","Component"],"mappings":"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","file":"js/chunk/317_599cb41fa16f61a83ca4.js","sourcesContent":["import Tpl from './tpl'\r\nimport axios from '../../../js/common/ajax'\r\n\r\nimport { message as Msg } from 'antd'\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      id: props.match.params.productId,\r\n      platform: props.match.params.optionId,\r\n      detail: {},\r\n      pagination: {\r\n        pageNum: 1,\r\n        pageSize: 10\r\n      },\r\n      start_time: moment().subtract(90, 'd'),\r\n      end_time: moment(),\r\n      screenshotList: [],\r\n    }\r\n  }\r\n  componentWillMount() {\r\n    this.getDetailData()\r\n  }\r\n  dateChange = (dates) => {\r\n    if (!dates.length) {\r\n      return\r\n    }\r\n    this.setState({\r\n      start_time: dates[0],\r\n      end_time: dates[1],\r\n      pagination: {\r\n        pageNum: 1,\r\n        pageSize: 10\r\n      }\r\n    }, () => {\r\n      this.getScreenShot()\r\n    })\r\n  }\r\n  MoreClick = () => {\r\n    this.setState({\r\n      pagination: Object.assign({}, this.state.pagination, {\r\n        pageNum: parseInt(this.state.pagination.pageNum, 10) + 1\r\n      })\r\n    }, () => {\r\n      this.getScreenShot()\r\n    })\r\n  }\r\n  getScreenShot = (itemid) => {\r\n    const { platform, pagination, start_time, end_time, detail } = this.state\r\n    const data = {\r\n      platform_code: platform,\r\n      start_time: start_time.format('YYYY-MM-DD HH:mm:ss'),\r\n      end_time: end_time.format('YYYY-MM-DD HH:mm:ss'),\r\n      itemid: detail.itemid,\r\n      pageSize: pagination.pageSize,\r\n      pageNum: pagination.pageNum,\r\n    }\r\n    LoadingModal({bl:true})\r\n    axios.post('/hcm/keyword_monitor/PhotoHis', data).then(res => {\r\n      LoadingModal({bl:false})\r\n      const { data, status, message } = res.data\r\n      if (status === '10000') {\r\n        // console.log(data)\r\n        this.setState({\r\n          screenshotList: data.list,\r\n          pagination: Object.assign({}, this.state.pagination, {\r\n            count: data.count,\r\n          })\r\n        })\r\n      } else {\r\n        Msg.error(message)\r\n      }\r\n    }).catch(err => {\r\n      LoadingModal({bl:false})\r\n      Msg.error('系统繁忙，请稍后再试！')\r\n    })\r\n  }\r\n  getDetailData = () => {\r\n    const { id, platform } = this.state\r\n    axios.post('/hcm/keyword_monitor/getObj', {\r\n      platform_code: platform,\r\n      id,\r\n    }).then(res => {\r\n      const { data, status, message } = res.data\r\n      if (status === '10000') {\r\n        // console.log(data)\r\n        this.setState({\r\n          detail: data\r\n        }, () => {\r\n          this.getScreenShot()\r\n        })\r\n      } else {\r\n        Msg.error(message)\r\n      }\r\n    }).catch(err => {\r\n      Msg.error('系统繁忙，请稍后再试！')\r\n    })\r\n\r\n  }\r\n  render() {\r\n    return <Tpl that={this} />\r\n  }\r\n}\r\n\r\nexport default App"],"sourceRoot":""}