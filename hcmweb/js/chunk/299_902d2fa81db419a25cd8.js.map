{"version":3,"sources":["webpack:///./app/widget/index/Dealers/ProductInformation/main.js"],"names":["ProductInformation","props","document","title","getByProduct","ajax","get","params","productClassifyid","match","id","then","response","productList","data","setState","ProductInformation_list","formAtDom","catch","error","message","statusText","arr","dataIndex","fixed","sort","width","render","text","record","index","display","key","forEach","item","isChecked","target","push","fieldname","fieldvalue","className","align","verticalAlign","paddingRight","HistoryBtn","console","log","window","location","brand_name","handleClearIconClick","form","resetFields","getFieldsValue","handleClearIconClicks","ForgetSubmit","e","preventDefault","validateFields","err","values","state","pageNo","pageSize","post","classifyid","brandName","productName","res","status","content","loading","totalNum","totalElements","pageNumber","changePagination","current","fetch","onPaginationSize","size","handleTableChange","pagination","filters","sorter","pager","results","page","sortField","field","sortOrder","order","classifyId","tit","type","confirmLoading","React","Component","create"],"mappings":"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","file":"js/chunk/299_902d2fa81db419a25cd8.js","sourcesContent":["import Tpl from './tpl';\r\nimport ajax from '../../../../js/common/ajax'\r\nimport { Form, Input } from 'antd';\r\nclass ProductInformation extends React.Component {\r\n    constructor(props) {\r\n        document.title = '产品信息';\r\n        super(props)\r\n        this.state = {\r\n            ProductInformation_list: [],\r\n            data: [],\r\n            type: \"新增\",\r\n            pagination: {},\r\n            loading: false,\r\n            pageNo: 1,\r\n            pageSize: 10,\r\n            totalNum: 0,\r\n            confirmLoading:false,\r\n            tit:\"\"\r\n        }\r\n\r\n    }\r\n    componentDidMount() {\r\n        this.fetch();\r\n        this.getByProduct();\r\n    }\r\n    getByProduct = () => {\r\n        ajax.get('/hcm/hcmCustomModel/getByProduct', {\r\n            params: {\r\n                productClassifyid:this.props.match.params.id\r\n            }\r\n        }).then((response) => {\r\n            let productList = response.data.data;\r\n            this.setState({\r\n                ProductInformation_list: this.formAtDom(productList)\r\n            })\r\n        }).catch((error) => {\r\n            message.error(error.statusText);\r\n        });\r\n    }\r\n    \r\n    formAtDom = (data) =>{\r\n        let arr = [{\r\n            title: '序号',\r\n            dataIndex: 'index',\r\n            fixed: 'left',\r\n            sort:0,\r\n            width:'100px',\r\n            render: (text, record, index) => (\r\n                <span style={{width:'50px',display:'inline-block'}}>\r\n                   {index+1}\r\n                </span>\r\n            )\r\n        }];\r\n        for (const key in data) {\r\n            data[key].data.forEach((item,index)=>{\r\n                if(item.isChecked){\r\n                    item.target = [key,index,item]\r\n                    return (\r\n                        arr.push({\r\n                            title: item.fieldname,\r\n                            dataIndex: item.fieldvalue,\r\n                            key:item.id,\r\n                            sort:item.sort,\r\n                            width:'400px',\r\n                            className:'item-column'\r\n                        })\r\n                    )\r\n                }\r\n                \r\n            })\r\n        }\r\n        arr.push({\r\n            title: '操作',\r\n            dataIndex: 'action',\r\n            key:'action',\r\n            sort:999999,  \r\n            width:'150px',\r\n            align:'center',\r\n            fixed: 'right',\r\n            render: (text, record, index) => (\r\n                <span style={{width:\"170px\"}}>\r\n                    \r\n                <img style={{verticalAlign:'text-bottom',paddingRight:'4px'}} src='../../../img/icon/icon_operating_history.png' />\r\n                    <a onClick={(text)=>this.HistoryBtn(record)}>变更历史</a>\r\n                </span>\r\n            )\r\n        })\r\n        return arr\r\n    }  \r\n    HistoryBtn = (index) => { //变更历史\r\n        console.log(index)\r\n        window.location=\"/index.html#/PricePublicity/ChangeHistory/Product/\"+index.brand_name+\"/\"+index.id\r\n    }\r\n    handleClearIconClick =  () => {\r\n        const { form: { resetFields, getFieldsValue } } = this.props\r\n       // console.log(getFieldsValue())\r\n        //console.log(resetFields())\r\n             resetFields(\"productName\")\r\n    }\r\n    handleClearIconClicks =  () => {\r\n        const { form: { resetFields, getFieldsValue } } = this.props\r\n             resetFields(\"brandName\")\r\n    }\r\n    ForgetSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.props.form.validateFields((err, values) => {\r\n           // console.log(values)\r\n            if (!err) {\r\n                console.log(this.state.pageNo,this.state.pageSize,)\r\n                ajax.post('/hcm/hcmProduct/getPageBybmcid', {\r\n                    classifyid:this.props.match.params.id,\r\n                    pageNo:1,\r\n                    pageSize:this.state.pageSize,\r\n                    brandName:values.brandName,\r\n                    productName:values.productName\r\n                }).then((res) => {\r\n                    console.log(res)\r\n                    if (res.data.status == 10000) {\r\n                        if(res.data.data.content!=\"\"){\r\n                            this.setState({\r\n                                data: res.data.data.content,\r\n                                loading: false,\r\n                                totalNum:res.data.data.totalElements,\r\n                                pageNo:res.data.data.pageNumber,\r\n                                pageSize:res.data.data.pageSize,\r\n\r\n                            });\r\n                        }else{\r\n                            this.setState({\r\n                                data: \"\",\r\n                                loading: false,\r\n                                totalNum:\"0\"\r\n                            });\r\n                        }\r\n                        \r\n                    }\r\n                })\r\n                \r\n            }\r\n        })\r\n\r\n    }\r\n\r\n\r\n    changePagination = (current, pageSize) => {\r\n        console.log(current, pageSize);\r\n\r\n        ajax.post('/hcm/hcmProduct/getPageBybmcid', {\r\n            classifyid:this.props.match.params.id,\r\n            pageNo:current,\r\n            pageSize:pageSize,\r\n        }).then((res) => {\r\n            console.log(res)\r\n            if(res.data.status==10000){\r\n                \r\n                this.setState({\r\n                    totalNum:res.data.data.totalElements,\r\n                    pageNo:res.data.data.pageNumber,\r\n                    pageSize:res.data.data.pageSize,\r\n                },()=>{\r\n                    this.fetch();\r\n                })\r\n            }\r\n            \r\n        })\r\n       \r\n    }\r\n    onPaginationSize = (current, size) => {\r\n        console.log(size)\r\n      \r\n        ajax.post('/hcm/hcmProduct/getPageBybmcid', {\r\n            classifyid:this.props.match.params.id,\r\n            pageNo:current,\r\n            pageSize:size,\r\n        }).then((res) => {\r\n            console.log(res)\r\n            if(res.data.status==10000){\r\n                this.setState({\r\n                    pageNo:current,\r\n                    pageSize: size\r\n                },()=>{\r\n                    this.fetch();\r\n                })\r\n              \r\n            }\r\n            \r\n        })\r\n       \r\n    }\r\n    handleTableChange = (pagination, filters, sorter) => {\r\n        console.log(pagination, filters, sorter)\r\n        const pager = { ...this.state.pagination };\r\n        pager.current = pagination.current;\r\n        this.setState({\r\n            pagination: pager,\r\n        });\r\n        this.fetch({\r\n            results: pagination.pageSize,\r\n            page: pagination.current,\r\n            sortField: sorter.field,\r\n            sortOrder: sorter.order,\r\n            ...filters,\r\n        });\r\n    }\r\n\r\n\r\n    fetch = (params = {}) => {\r\n        ajax.post('/hcm/productread/create', {\r\n            classifyId:this.props.match.params.id\r\n        }).then((res) => {\r\n            console.log(res)\r\n        })\r\n        this.setState({ loading: true });\r\n        this.setState({\r\n            tit:this.props.match.params.tit\r\n        });\r\n        ajax.post('/hcm/hcmProduct/getPageBybmcid', {\r\n            classifyid:this.props.match.params.id,\r\n            pageNo:this.state.pageNo,\r\n            pageSize:this.state.pageSize\r\n        }).then((res) => {\r\n            console.log(res,\"123321\")\r\n            if (res.data.status == 10000) {\r\n                if(res.data.data.content!=\"\"){\r\n                    console.log()\r\n                    this.setState({\r\n                        data: res.data.data.content,\r\n                        loading: false,\r\n                        totalNum:res.data.data.totalElements,\r\n                        pageNo:res.data.data.pageNumber,\r\n                        pageSize:res.data.data.pageSize,\r\n                    });\r\n                }else{\r\n                    this.setState({\r\n                        data: \"\",\r\n                        loading: false,\r\n                        totalNum:\"0\"\r\n                    });\r\n                }\r\n                \r\n            }\r\n        })\r\n        \r\n\r\n    }\r\n\r\n    render() {\r\n        return <Tpl that={this} />\r\n    }\r\n}\r\nexport default Form.create()(ProductInformation)"],"sourceRoot":""}