{"version":3,"sources":["webpack:///./app/widget/components/platform.js","webpack:///./app/widget/index/Brand/Home/main.js"],"names":["name","style","width","height","data","App","props","expire","state","exDay","Math","ceil","format","moment","close","sessionStorage","setItem","args","message","description","duration","key","btn","onClose","config","top","getItem","warning","myChart","id","title","echarts","init","document","getElementById","totnum","length","map","item","value","reduce","total","currentValue","index","arr","setOption","tooltip","trigger","formatter","legend","orient","right","itemGap","series","type","radius","center","color","silent","label","position","fontSize","rich","a","align","c","padding","avoidLabelOverlap","carouselItem","dom","num","dataList","item_shop_data","styles","display","justifyContent","alignItems","oFor","i","push","platform_code","platform_name","shop_num","item_num","CarouselHome","React","createRef","binding","userid","getList","ajax","get","then","response","status","setState","bmaincustomer_validtime","daquData","shopGroupData","error","catch","statusText","Component"],"mappings":"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","file":"js/chunk/257_0f84afac61e529e3e987.js","sourcesContent":["export default (name,style={width:'20px',height:'20px'})=>{\r\n    let data = {\r\n        \"TB\":<img style={style} src='../../../../img/platform/1_taobao.svg'/>,\r\n        \"TM\":<img style={style} src='../../../../img/platform/2_tall.svg'/>,\r\n        \"JD\":<img style={style} src='../../../../img/platform/3_jd.svg'/>,\r\n        \"SN\":<img style={style} src='../../../../img/platform/4_suning.svg'/>,\r\n        \"GM\":<img style={style} src='../../../../img/platform/5_gome.svg'/>,\r\n        \"PDD\":<img style={style} src='../../../../img/platform/6_pinduoduo.svg'/>,\r\n        \"AMAZON\":<img style={style} src='../../../../img/platform/7_a.svg'/>,\r\n        \"WPH\":<img style={style} src='../../../../img/platform/8_weipinhui.svg' />,\r\n        \"1688\":<img style={style} src='../../../../img/platform/9_1688.svg'/>,\r\n        \"SMT\":<img style={style} src='../../../../img/platform/10_sumaitong.svg'/>,\r\n        \"DD\":<img style={style} src='../../../../img/platform/11_dangdang.svg'/>,\r\n        \"ALST\":<img style={style} src='../../../../img/platform/12_lingshoutong.svg'/>,\r\n        \"1HD\":<img style={style} src='../../../../img/platform/13_1haodian.svg'/>,\r\n        \"YJWD\":<img style={style} src='../../../../img/platform/14_yunji.svg'/>,\r\n        \"YLW\":<img style={style} src='../../../../img/platform/15_youle.svg'/>,\r\n        \"XY\":<img style={style} src='../../../../img/platform/16_xainyu.svg'/>,\r\n        \"WECD\":<img style={style} src='../../../../img/platform/17_weixin.svg'/>,\r\n        \"MGJ\":<img style={style} src='../../../../img/platform/18_mogujie.svg'/>,\r\n        \"JMYP\":<img style={style} src='../../../../img/platform/19_jumei.svg'/>,\r\n        \"CCJ\":<img style={style} src='../../../../img/platform/20_chuchujie.svg'/>,\r\n        \"BBWG\":<img style={style} src='../../../../img/platform/21_beibeiwang.svg'/>,\r\n        \"platform_OTHER\":<img style={style} src='../../../../img/platform/22_qita.svg'/>,\r\n    }\r\n    return data[name]\r\n}\r\n","import Tpl from './tpl';\r\nimport { message,Card, Button, notification } from 'antd';\r\nimport ajax from '../../../../js/common/ajax';\r\nimport echarts from 'echarts';\r\nimport platform from '../../../components/platform'\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.CarouselHome = React.createRef();\r\n        this.state = {\r\n            expire: moment(),\r\n            dataList: {\r\n                binding: null,\r\n                userid:null,\r\n                data:[]\r\n            }\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.getList();\r\n    }\r\n    componentWillUnmount() {\r\n        notification.close('date')\r\n    }\r\n    getList() {\r\n       \r\n        ajax.get('/hcm/Index/bmaincustomerIndex')\r\n        .then((response) => {\r\n            if (response.data.status == '10000') {\r\n                this.setState({\r\n                    dataList: response.data.data,\r\n                    expire: moment(response.data.data.bmaincustomer_validtime),\r\n                }, () => {\r\n                    this.expire();\r\n                    this.myChart(this.state.dataList.daquData,'chart-dealers','客户总数量')\r\n                    this.myChart(this.state.dataList.shopGroupData,'chart-shops','店铺总数量')\r\n                })\r\n            } else {\r\n                message.error(response.data.message);\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            message.error(error.statusText);\r\n        });\r\n\r\n\r\n    }\r\n    expire = () => {\r\n        const { expire } = this.state;\r\n        let exDay = Math.ceil((expire.format('X') - moment().format('X')) / 60 / 60 / 24) + 1;\r\n        const close = () => {\r\n            notification.close('date')\r\n            sessionStorage.setItem('exdate', true)\r\n        }\r\n        const args = {\r\n            message: '账号即将到期提醒',\r\n            description: `你的账号有效期至 ${expire.format('YYYY年MM月DD日')} ，使用期限仅剩 ${exDay}天，过期后账号将不能使用，请及时联系管理员续期`,\r\n            duration: 0,\r\n            key: 'date',\r\n            btn: <Button onClick={close}>我知道了</Button>,\r\n            onClose: close\r\n        };\r\n        notification.config({\r\n            top: 60\r\n        });\r\n        if (exDay <= 30 && !sessionStorage.getItem('exdate')) {\r\n            notification.warning(args);\r\n        }\r\n    }\r\n    myChart = (data,id,title) => {\r\n        \r\n        const myChart = echarts.init(document.getElementById(id));\r\n        let totnum = 0;\r\n        if (data.length) {\r\n            totnum = data.map(item => item.value).reduce((total, currentValue, index, arr) => {\r\n                return total + currentValue\r\n            })\r\n        }\r\n\r\n        myChart.setOption({\r\n            tooltip: {\r\n                trigger: 'item',\r\n                formatter: \"{b}: {c} ({d}%)\"\r\n            },\r\n            legend: {\r\n                orient: 'vertical',\r\n                right: '30',\r\n                top: 'center',\r\n                itemGap: 20,\r\n                data: data.map(item => item.name)\r\n            },\r\n\r\n            series: [\r\n                {\r\n                    name: title,\r\n                    type: 'pie',\r\n                    radius: ['0%', '30%'],\r\n                    center: ['38%', '50%'],\r\n                    color: ['#fff'],\r\n                    silent: true,\r\n                    label: {\r\n                        position: 'center',\r\n                        formatter: '{c| {c}}\\n{a|{a}}',\r\n                        color: '#333',\r\n                        fontSize: 20,\r\n                        rich: {\r\n                            a: {\r\n                                fontSize: 14,\r\n                                color: '#999',\r\n                                align: 'center'\r\n                            },\r\n                            c: {\r\n                                color: '#333',\r\n                                fontSize: 20,\r\n                                padding: 10,\r\n                                align: 'center'\r\n                            }\r\n                        }\r\n                    },\r\n                    data: [\r\n                        { value: totnum, name: '' }\r\n                    ]\r\n                },\r\n                {\r\n                    type: 'pie',\r\n                    radius: ['40%', '55%'],\r\n                    center: ['38%', '50%'],\r\n                    label: {\r\n                        formatter: '{b}：{c}\\n占比：{d}%',\r\n                    },\r\n                    avoidLabelOverlap: true,\r\n                    color: ['#55a0f8', '#66c8ca', '#72c77c', '#f4d358', '#e17c7d', '#8e66dd'],\r\n                    data: data\r\n                }\r\n            ]\r\n        })\r\n\r\n    }\r\n    carouselItem  = () => {\r\n        let dom = [];\r\n        let num = 6;\r\n        let {item_shop_data=[]} = this.state.dataList;\r\n        let styles={\r\n            width:'100%',\r\n            display: 'flex',\r\n            justifyContent: 'space-evenly',\r\n            alignItems: 'center'\r\n        }\r\n        function oFor(num,index){\r\n            \r\n            let arr = []\r\n            for(let i = 0; i<num; i++){\r\n                if(item_shop_data[num*index+i]){\r\n                    arr.push(\r\n                        <div key={i} className='item' >\r\n                            {platform(item_shop_data[num*index+i].platform_code,{width:40,height:40})}\r\n                            <p style={{padding:'5px 0px 10px'}}>{item_shop_data[num*index+i].platform_name}</p>\r\n                            <p style={styles}>\r\n                                <span>店铺数</span>\r\n                                <span style={{fontSize:18}}>{item_shop_data[num*index+i].shop_num}</span>\r\n                            </p>\r\n\r\n                            <p style={styles}>\r\n                                <span>商品数</span>\r\n                                <span style={{fontSize:18}}>{item_shop_data[num*index+i].item_num}</span>\r\n                            </p>\r\n                            \r\n                        </div>\r\n                    )\r\n                }\r\n            }\r\n            return arr\r\n        }\r\n        for(let i = 0; i<Math.ceil(item_shop_data.length/num); i++){\r\n            dom.push(\r\n                <div key={i} className='carousel-item'>\r\n                   \r\n                    {oFor(num,i)}\r\n                    \r\n                </div>\r\n            )\r\n        }\r\n        return dom\r\n    }\r\n    render() {\r\n        return <Tpl that={this} />\r\n    }\r\n}\r\nexport default App;\r\n"],"sourceRoot":""}