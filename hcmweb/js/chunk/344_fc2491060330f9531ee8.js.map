{"version":3,"sources":["webpack:///./app/widget/index/Shop/Home/main.js"],"names":["App","props","activityDeclaration","window","location","hash","shopindex","state","noticeNotReadCount","productNotReadCount","huanbi","lastMonthCount","reportforms","huanbiState","ajax","get","then","res","data","status","list","setState","catch","error","tabs","tabsData","LoadingModal","bl","sevendaysTab","my_date","i","time","shops","hotCommodity","items","document","querySelectorAll","forEach","ee","ii","className","moment","format","params","campaign_node","ser_day","pageNum","pageSize","openRetract","ljtb","days","React","Component"],"mappings":"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","file":"js/chunk/344_fc2491060330f9531ee8.js","sourcesContent":["import Tpl from './tpl';\r\nimport ajax from '../../../../js/common/ajax';\r\nimport { message , } from 'antd';\r\n\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            tabsData:[],//选项卡表头数据\r\n            days:['星期日','星期一','星期二','星期三','星期四','星期五','星期六'],\r\n            noticeNotReadCount: 0,//未读的通知公告数\r\n            productNotReadCount: 0,//未读的售价变更数\r\n            huanbi: \"0%\",//环比\r\n            huanbiState:true,//环比上升或者下降\r\n            lastMonthCount:0,//上月销售总额\r\n            reportforms:[],//销售数据提报\r\n            shops:[],//参与活动的店铺\r\n            hotCommodity:[],//热销活动商品\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.tabs()\r\n        this.shopindex()\r\n    }\r\n    //跳转到活动申报页面\r\n    activityDeclaration = () => {\r\n        window.location.hash = '/ActivityDeclaration'\r\n    }\r\n    ///首页数据统计\r\n    shopindex = () =>{\r\n        let {noticeNotReadCount,productNotReadCount,huanbi,lastMonthCount,reportforms,huanbiState} = this.state;\r\n        // LoadingModal({bl:true})\r\n        ajax.get('/hcm/Index/shopIndex')\r\n        .then(res => {\r\n            // console.log(res)\r\n            // LoadingModal({bl:false})\r\n            if(res.data.status == 10000){\r\n                noticeNotReadCount = res.data.data.noticeNotReadCount;\r\n                productNotReadCount = res.data.data.productNotReadCount;\r\n                huanbi = res.data.data.huanbi;\r\n                lastMonthCount = res.data.data.lastMonthCount;\r\n                reportforms = res.data.data.list;\r\n                huanbiState = res.data.data.huanbiState;\r\n                this.setState({noticeNotReadCount,productNotReadCount,huanbi,lastMonthCount,reportforms,huanbiState})\r\n            }\r\n            \r\n        })\r\n        .catch(() => {\r\n            // LoadingModal({bl:false})\r\n            message.error('获取信息失败');\r\n        });\r\n    }\r\n    //获取选项卡信息\r\n    tabs = () =>{\r\n        let {tabsData} = this.state;\r\n        LoadingModal({bl:true})\r\n        ajax.get('/hcm/campgign/ScheduleBMCSeven')\r\n        .then(res => {\r\n            // console.log(res)\r\n            LoadingModal({bl:false})\r\n            if(res.data.status == 10000){\r\n                tabsData = res.data.data\r\n                this.setState({tabsData},()=>{\r\n                    this.sevendaysTab(0,tabsData[0].my_date)\r\n                })\r\n            }\r\n            \r\n        })\r\n        .catch(() => {\r\n            LoadingModal({bl:false})\r\n            message.error('获取信息失败');\r\n        });\r\n    }\r\n    //选项卡七天切换\r\n    sevendaysTab = async (i,time) =>{\r\n        let {shops,hotCommodity} = this.state;\r\n        let items = document.querySelectorAll('.item')\r\n        // console.log(items)\r\n        items.forEach((ee,ii)=>{\r\n            items[ii].className = 'item'\r\n        })\r\n        items[i].className = 'item active';\r\n        time = moment(time).format('YYYY-MM-DD')\r\n        LoadingModal({bl:true})\r\n        await ajax.get('/hcm/campgign/findCampaignShopsPageList',{\r\n            params: {\r\n                campaign_node:'已审核',\r\n                ser_day: time,\r\n                pageNum:1,       \r\n                pageSize:6\r\n            }\r\n        })\r\n        .then(res => {\r\n            // console.log(res)\r\n            // LoadingModal({bl:false})\r\n            if(res.data.status == 10000){\r\n                shops = res.data.data.list;\r\n                this.setState({shops})\r\n            }\r\n            \r\n        })\r\n        .catch(() => {\r\n            LoadingModal({bl:false})\r\n            message.error('获取信息失败');\r\n        });\r\n        // LoadingModal({bl:true})\r\n        await ajax.get('/hcm/campgign/findProductPublicListShop',{\r\n            params: {\r\n                ser_day: time,\r\n                pageNum:1,       \r\n                pageSize:3\r\n            }\r\n        })\r\n        .then(res => {\r\n            // console.log(res)\r\n            LoadingModal({bl:false})\r\n            if(res.data.status == 10000){\r\n                hotCommodity = res.data.data.list;\r\n                this.setState({hotCommodity})\r\n            }\r\n            \r\n        })\r\n        .catch(() => {\r\n            LoadingModal({bl:false})\r\n            message.error('获取信息失败');\r\n        });\r\n    }\r\n    //活动店铺跳转\r\n    openRetract = () =>{\r\n        window.location.hash = '/ActivityPublicity'\r\n    }\r\n    //立即提报跳转\r\n    ljtb = (time) =>{\r\n        // window.location.hash = '/DataPresentation'\r\n        window.location.hash = '/DataDetails/' + time\r\n    }\r\n    render() {\r\n        return <Tpl that={this} />\r\n    }\r\n}\r\nexport default App;\r\n"],"sourceRoot":""}