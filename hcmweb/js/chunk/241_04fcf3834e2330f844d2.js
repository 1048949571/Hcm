(window.webpackJsonp=window.webpackJsonp||[]).push([[241],{856:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=l(a(15)),o=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();a(16);var r=l(a(635)),i=l(a(135)),c=l(a(12));function l(t){return t&&t.__esModule?t:{default:t}}var s=function(e){function a(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return o.JINGPINGList=function(){c.default.post("/hcm/search/jingPinBrandList",{}).then(function(t){console.log(t),1e4==t.data.status?""!=t.data.data&&t.data.data!=[]&&o.setState({jingPinBrandList:t.data.data,styleSX:t.data.data[0].bid},function(){o.JingPinPT(o.state.styleSX)}):n.default.error(t.data.message)}).catch(function(t){n.default.error(t.statusText)})},o.JingPinPT=function(t){LoadingModal({bl:!0}),c.default.post("/hcm/search/dataCompare",{bid:t,type:"jingpin"}).then(function(e){console.log(e),1e4==e.data.status?""!=e.data.data&&e.data.data!=[]&&o.setState({JingPinPTx:e.data.data,CardStyle:e.data.data[0].platform_code},function(){LoadingModal({bl:!1}),o.shopGroupData(t,o.state.CardStyle),console.log(o.state.JingPinPTx[0].platform_name)}):(LoadingModal({bl:!1}),n.default.error(e.data.message))}).catch(function(t){LoadingModal({bl:!1}),n.default.error(t.statusText)})},o.shopGroupData=function(t,e){LoadingModal({bl:!0}),c.default.post("/hcm/search/priceSectionRatio",{bid:t,platform_code:e,type:"jingpin"}).then(function(t){console.log(t),1e4==t.data.status?""!=t.data.data&&t.data.data!=[]&&o.setState({shopGroupData:t.data.data[0].cover_list,contertier:t.data.data[0]},function(){LoadingModal({bl:!1}),o.myChart(),o.contertier()}):(LoadingModal({bl:!1}),n.default.error(t.data.message))}).catch(function(t){LoadingModal({bl:!1}),n.default.error(t.statusText)})},o.myChart=function(){var t=o.state.shopGroupData;console.log(t);var e=i.default.init(document.getElementById("echartsxx")),a=0;t.length&&(a=t.map(function(t){return t.value}).reduce(function(t,e,a,n){return t+e})),e.setOption({tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{name:"店铺数量",type:"pie",radius:["0%","30%"],center:["50%","40%"],color:["#fff"],silent:!0,label:{position:"center",formatter:function(e){return e.seriesName+":"+t[1].value},color:"#333",fontSize:20,rich:{a:{fontSize:14,color:"#999",align:"center"},c:{color:"#333",fontSize:20,padding:10,align:"center"}}},data:[{value:a,name:""}]},{type:"pie",radius:["50%","70%"],center:["50%","40%"],color:["#66c8ca","#ccc"],data:t}]})},o.onChange=function(t,e,a){console.log(t,e,a)},o.beforeChange=function(t,e,a){console.log(t,e,a)},o.handlePrev=function(){o.refx.current.prev()},o.handleNext=function(){o.refx.current.next()},o.JPList=function(t){o.setState({styleSX:t,JingPinPT:[]},function(){o.JingPinPT(o.state.styleSX)})},o.CardStyle=function(t){o.setState({CardStyle:t,shopGroupData:[]},function(){console.log(o.state.CardStyle),o.shopGroupData(o.state.styleSX,o.state.CardStyle)})},o.contertier=function(){i.default.init(document.getElementById("container")).setOption({color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(t){return"价格区间："+t[0].axisValue+"<br/>"+t[0].seriesName+":"+t[0].data+"% <br/>"+t[1].seriesName+":"+t[1].data+"%"}},legend:{data:["我的品牌","竞品品牌"],center:["38%","50%"],color:"#666",fontSize:14},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:""!=o.state.contertier.section_list?o.state.contertier.section_list:["0-100","101-200","201-300","301-400"],axisTick:{alignWithLabel:!0},axisLabel:{interval:0}}],yAxis:[{type:"value",axisLine:{onZero:!1},axisLabel:{formatter:"{value}%"}}],series:[{name:"我的品牌",type:"bar",barWidth:"40%",color:"#108CEE",data:o.state.contertier.my_brand_list,axisLabel:{formatter:"{value}%"}},{name:"竞品品牌",type:"bar",barWidth:"40%",color:"#4ECB73",data:o.state.contertier.jingpin_list}]},!0)},o.refx=t.createRef(),o.state={shopGroupData:[],jingPinBrandList:[],styleSX:"",JingPinPTx:[],CardStyle:"",contertier:[]},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,t.Component),o(a,[{key:"componentDidMount",value:function(){this.JINGPINGList()}},{key:"render",value:function(){return t.createElement(r.default,{that:this})}}]),a}();e.default=s}).call(this,a(1))}}]);