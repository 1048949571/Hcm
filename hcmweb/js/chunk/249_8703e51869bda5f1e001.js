(window.webpackJsonp=window.webpackJsonp||[]).push([[249],{563:function(t,e,a){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0});var o=l(a(15)),i=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();a(16);var s=l(a(564)),r=l(a(12));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(e){function a(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return e.reset=function(){e.setState({id:null,dealerid:null,activeKey:"1",baseInfo:{},titleList:{},activity:{date:[n().subtract(1,"months"),n()],show:3,list:[]},salesData:{list:[],pageNo:1,pageSize:10,totalNum:0},abnormalOrders:{date:[n().subtract(1,"months"),n()],show:1,list:[]}})},e.getAbnormalOrdersList=function(){var t=e.state,a=t.id,n=t.dealerid,i=t.abnormalOrders;r.default.get("/hcm/hcmShopMonitor/getMonitorByShopid",{params:{shopid:a,dealerid:n,pageNo:1,pageSize:i.list.length+10,start_time:i.date[0].format("YYYY-MM-DD"),end_time:i.date[1].format("YYYY-MM-DD")}}).then(function(t){var a=t.data,n=a.data,o=a.status;a.message;i.list.length==n.length||n.length<10?i.show=2:i.show=1,0==n.length&&(i.show=3),i.list=n,"10000"===o&&e.setState({abnormalOrders:i})}).catch(function(t){o.default.error("系统繁忙，请稍后再试！")})},e.getDay=function(){var t=e.state,a=t.id,n=t.dealerid,i=e.state.salesData,s=(i.list,i.pageNo),l=i.pageSize;r.default.get("/hcm/dayReport/findMonitorDinDanDayReportPageListDay",{params:{shop_id:a,dealer_id:n,pageNo:s,pageSize:l}}).then(function(t){var a=t.data,n=a.data,o=a.status,i=(a.message,e.state.salesData);i.list=n.content,i.pageNo=n.pageNumber,i.pageSize=n.pageSize,i.totalNum=n.totalElements,"10000"===o&&e.setState({salesData:i})}).catch(function(t){o.default.error("系统繁忙，请稍后再试！")})},e.getShopInfo=function(){var t=e.state,a=t.id,n=t.dealerid;LoadingModal({bl:!0}),r.default.get("/hcm/hcmCustomModel/getBybmcidAndModule",{params:{module:"SHOP"}}).then(function(t){var i=t.data,s=i.data,l=i.status;i.message;"10000"===l&&e.setState({activeKey:"1",titleList:s},function(){r.default.get("/hcm/hcmShop/getById",{params:{shopId:a,dealerid:n,getType:"SEARCH"}}).then(function(t){LoadingModal({bl:!1});var a=t.data,n=a.data,o=a.status;a.message;"10000"===o&&e.setState({baseInfo:n},function(){e.getActivityList(),"NOTAUTH"!=n.isauthed&&(e.getDay(),e.getAbnormalOrdersList())})}).catch(function(t){LoadingModal({bl:!1}),o.default.error("系统繁忙，请稍后再试！")})})}).catch(function(t){LoadingModal({bl:!1}),o.default.error("系统繁忙，请稍后再试！")})},e.getActivityList=function(){var t=e.state,a=t.id,n=t.dealerid,i=t.activity;r.default.get("/hcm/hcmShop/CampaignList",{params:{shopid:a,dealerid:n,pageNo:1,pageSize:i.list.length+10,start_time:i.date[0].format("YYYY-MM-DD"),end_time:i.date[1].format("YYYY-MM-DD")}}).then(function(t){var a=t.data,n=a.data,o=a.status;a.message;i.list.length==n.length||n.length<10?i.show=2:i.show=1,0==n.length&&(i.show=3),i.list=n,"10000"===o&&e.setState({activity:i})}).catch(function(t){o.default.error("系统繁忙，请稍后再试！")})},e.onShow=function(t,a){e.setState({visible:!0,id:t,dealerid:a},function(){e.getShopInfo()})},e.onClose=function(){e.setState({visible:!1},function(){e.reset()})},e.onTabsChange=function(t){e.setState({activeKey:t})},e.onSalesDataPagination=function(t,a){var n=e.state.salesData;n.pageNo=t,n.pageSize=a,e.setState({salesData:n},function(){e.getDay()})},e.onSalesDataPaginationSize=function(t,a){var n=e.state.salesData;n.pageNo=1,n.pageSize=a,e.setState({salesData:n},function(){e.getDay()})},e.activityRangePicker=function(t){var a=e.state.activity;a.date=t,e.setState({activity:a},function(){e.getActivityList()})},e.abnormalOrdersRangePicker=function(t){var a=e.state.abnormalOrders;a.date=t,e.setState({abnormalOrders:a},function(){e.getAbnormalOrdersList()})},e.state={id:null,dealerid:null,activeKey:"1",baseInfo:{},titleList:{},activity:{date:[n().subtract(1,"months"),n()],show:3,list:[]},salesData:{list:[],pageNo:1,pageSize:10,totalNum:0},abnormalOrders:{date:[n().subtract(1,"months"),n()],show:1,list:[]}},e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,t.Component),i(a,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return t.createElement(s.default,{that:this})}}]),a}();e.default=c}).call(this,a(1),a(10))}}]);