{"version":3,"sources":["webpack:///./app/widget/index/TaobaoComplaint/main.js"],"names":["PLATFORM","tb","tm","tmhk","COMPLAINT_LINK_TYPE","goods","shops","App","props","handleRemoveFile","file","arr","state","fileList","slice","list","filter","v","uid","setState","handleBeforeUpload","ALLOW_TYPE","type","name","substring","lastIndexOf","isAllow","includes","isLt5M","size","error","handleUploadChange","info","status","response","data","message","success","getComplaintAccount","axios","post","platform","then","res","complatinAccountList","catch","verifyLink","callback","complaintPlatform","complaintLinkType","linkList","complaintAccount","form","validateFieldsAndScroll","err","values","cId","knowledgeRightTypeDetail","length","warning","LoadingModal","bl","id","urlType","linkers","map","errorLink","join","isVerifyLink","Object","assign","concat","catchError","getComplaintReason","typeId","getListFn","getKnowledgeRightTypeDetail","getKnowledgeRightType","url","params","key","handleResponse","handleSubmit","e","preventDefault","knowledgeRightTypeList","knowledgeRightTypeDetailList","complaintReasonList","reportComment","reasonText","iprName","cName","forEach","items","val","reason","text","knowledgeRightType","links","resetFields","complaintReasonId","handleRadioChange","target","value","validateFields","handleSelect","handleLinkItemBlur","current_link_item","Array","from","Set","handleLinkItemChange","index","handleLinkItemEdit","handleLinkItemDelete","splice","handleLinkChange","link_textarea_value","handleLinkBlur","split","value_set","list_value","showFileList","React","Component","create"],"mappings":"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","file":"js/chunk/349_be8c9f68605ad6a36522.js","sourcesContent":["import Tpl from './tpl'\r\nimport { Form, message as Msg } from 'antd'\r\n\r\nimport axios from '../../../js/common/ajax'\r\n// import { LoadingModal } from '../../components/LoadingModal/LoadingModal'\r\n\r\nconst PLATFORM = {\r\n  tb: 'taobao',\r\n  tm: 'tmall',\r\n  tmhk: 'tmallhk'\r\n}\r\nconst COMPLAINT_LINK_TYPE = {\r\n  goods: 'item',\r\n  shops: 'shop'\r\n}\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      // 投诉链接相关\r\n      linkList: [],\r\n      link_textarea_value: '',\r\n      current_link_item: -1,\r\n      \r\n      complaintAccount: '',\r\n      complatinAccountList: [],\r\n      knowledgeRightTypeList: [],\r\n      knowledgeRightTypeDetailList: [],\r\n      complaintPlatform: PLATFORM.tb,\r\n\r\n      complaintLinkType: COMPLAINT_LINK_TYPE.goods,\r\n      complaintReasonList: [],\r\n      \r\n      complaintReasonId: '',\r\n\r\n      fileList: [],\r\n      showFileList: [],\r\n\r\n      isVerifyLink: false,\r\n    }\r\n  }\r\n  componentWillMount() {\r\n    this.getComplaintAccount()\r\n    // this.getKnowledgeRightType(this.state.complaintPlatform)\r\n  }\r\n  // 移除文件\r\n  handleRemoveFile = (file) => {\r\n    const arr = this.state.fileList.slice()\r\n    const list = arr.filter(v => v.uid !== file.uid)\r\n    this.setState({\r\n      fileList: list\r\n    })\r\n  }\r\n  // 上传文件之前\r\n  handleBeforeUpload = (file, list) => {\r\n    const ALLOW_TYPE = ['jpg', 'png', 'bmp', 'pdf', 'zip', 'rar', 'doc', 'docx']\r\n    const type = file.name.substring(file.name.lastIndexOf('.') + 1)\r\n    \r\n    const isAllow = ALLOW_TYPE.includes(type)\r\n    const isLt5M = file.size / 1024 / 1024 < 5;\r\n    if (!isLt5M) {\r\n      Msg.error('上传的文件必须小于 5MB!');\r\n    }\r\n    if (!isAllow) {\r\n      Msg.error('请按正确格式上传文件！')\r\n    }\r\n    return isAllow && isLt5M;\r\n  }\r\n  // 上传文件改变\r\n  handleUploadChange = info => {\r\n    // const { fileList, showFileList } = this.state\r\n    // const list = fileList.slice()\r\n    // console.log(info)\r\n    const { fileList } = info\r\n    if (info.file.status === 'done') {\r\n      // console.log(info)\r\n      const { data, status, message } = info.file.response\r\n      if (status === '10000') {\r\n        Msg.success(message)\r\n        // list.push({link: data.url, uid: info.file.uid, url: data.url})\r\n        // this.setState({\r\n        //   fileList: list\r\n        // })\r\n      } else {\r\n        Msg.error(message)\r\n      }\r\n    }\r\n    if (this.handleBeforeUpload(info.file)) {\r\n      this.setState({\r\n        fileList\r\n      })\r\n    }\r\n\r\n  }\r\n  // 获取投诉账号\r\n  getComplaintAccount = () => {\r\n    axios.post('/hcm/complaiont/getListByBmcid', {\r\n      platform: 'ALIBABA'\r\n    }).then(res => {\r\n      // console.log(res)\r\n      const { data, message, status } = res.data\r\n      if (status === '10000') {\r\n        this.setState({\r\n          complatinAccountList: data\r\n        })\r\n      }\r\n    }).catch(err => {\r\n      // console.log(err)\r\n      Msg.error('系统繁忙，请稍后再试！')\r\n    })\r\n  }\r\n  // 验证链接\r\n  verifyLink = (callback) => {\r\n    const { complaintPlatform, complaintLinkType, linkList, complaintAccount } = this.state\r\n    this.props.form.validateFieldsAndScroll(['complaintAccount', 'knowledgeRightTypeDetail'], (err, values) => {\r\n      if (!err) {\r\n        const cId = values.knowledgeRightTypeDetail\r\n        if (!linkList.length) {\r\n          Msg.warning('请至少添加一条链接！')\r\n          return\r\n        }\r\n        LoadingModal({bl:true})\r\n        axios.post('/hcm/taobaoCheckLink', {\r\n          id: complaintAccount,\r\n          platform: complaintPlatform,\r\n          cId,\r\n          urlType: complaintLinkType,\r\n          linkers: linkList.map(v => typeof(v) === 'string' ? v : v.errorLink).join(',')\r\n        }).then(res => {\r\n          LoadingModal({bl:false})\r\n          // const data = this.handleResponse(res)\r\n          const { data, status, message } = res.data\r\n          if (status === '10000') {\r\n            if (data.data) {\r\n              // console.log(data)\r\n              const { success, error } = data.data\r\n              // if (success !== false) {\r\n              this.setState({\r\n                isVerifyLink: true,\r\n                linkList: error ? error.map(v => Object.assign({}, {errorLink: v})).concat(success?success:[]) : (success?success:[])\r\n              }, () => {\r\n                callback && callback()\r\n              })\r\n              // } else {\r\n              //   Msg.error(data.data.message)\r\n              // }\r\n            }\r\n          } else {\r\n            Msg.error(message)\r\n          }\r\n\r\n        }).catch(err => {\r\n          LoadingModal({bl:false})\r\n          this.catchError(err)\r\n        })\r\n      }\r\n    })\r\n\r\n  }\r\n  // 获取投诉理由\r\n  getComplaintReason = (platform, typeId) => {\r\n    this.getListFn('/hcm/getTaobaoIprReason', {platform, type: typeId}, 'complaintReasonList')\r\n  }\r\n  // 获取知识产权类别详情\r\n  getKnowledgeRightTypeDetail = typeId => {\r\n    this.getListFn('/hcm/getTaobaoIpr', {type: typeId}, 'knowledgeRightTypeDetailList')\r\n  }\r\n  // 获取知识产权类型\r\n  getKnowledgeRightType = platform => {\r\n    this.getListFn('/hcm/getTaobaoiprType', {platform}, 'knowledgeRightTypeList')\r\n  }\r\n  getListFn = (url, params, key) => {\r\n    const { complaintAccount } = this.state\r\n    axios.post(url, {id: complaintAccount, ...params}).then(res => {\r\n      const data = this.handleResponse(res)\r\n      if (data) {\r\n        this.setState({\r\n          [key]: [...data]\r\n        })\r\n      }\r\n    }).catch(this.catchError)\r\n  }\r\n  catchError = err => {\r\n    Msg.error('系统繁忙，请稍后再试！')\r\n  }\r\n  handleResponse = response => {\r\n    // console.log('=-=-=-=', response)\r\n    const { data, status, message } = response.data\r\n    if (status === '10000') {\r\n      return data ? data.data:null\r\n    } else {\r\n      Msg.error(message)\r\n      // return null\r\n    }\r\n  }\r\n  handleSubmit = e => {\r\n    e.preventDefault()\r\n    this.verifyLink(() => {\r\n      const { \r\n        complaintPlatform, \r\n        knowledgeRightTypeList, \r\n        knowledgeRightTypeDetailList, \r\n        complaintReasonList, \r\n        complaintLinkType,\r\n        linkList,\r\n        fileList,\r\n      } = this.state\r\n      const { validateFieldsAndScroll } = this.props.form\r\n      validateFieldsAndScroll((err, values) => {\r\n        if (!err) {\r\n          if (values.reportComment.length > 1500) {\r\n            Msg.warning('投诉理由超过1500字，请修改！')\r\n            return\r\n          }\r\n          let reasonText = '', iprName = '', cName = '', url = ''\r\n          complaintReasonList.forEach(v => {\r\n            v.items.forEach(val => {\r\n              if (val.id === values.reason) {\r\n                reasonText = val.text\r\n              }\r\n            })\r\n          })\r\n          iprName = knowledgeRightTypeList.filter(v => v.id == values.knowledgeRightType)[0].text\r\n          cName = knowledgeRightTypeDetailList.filter(v => v.id == values.knowledgeRightTypeDetail)[0].text\r\n          url = !!fileList.length ? fileList.map(v => v.response.data.url).join(',') : ''\r\n          const data = {\r\n            id:values.complaintAccount,\r\n            platform:complaintPlatform,\r\n            iprName,\r\n            type:values.knowledgeRightType,\r\n            cName,\r\n            cId:values.knowledgeRightTypeDetail,\r\n            urlType:complaintLinkType,\r\n            reasonText: complaintLinkType === COMPLAINT_LINK_TYPE.goods?reasonText:'明显假冒',\r\n            reason:complaintLinkType === COMPLAINT_LINK_TYPE.goods?values.reason:'frontReason.trademark.fake.mxjh',\r\n            reportComment:values.reportComment,\r\n            links: linkList.map(v => typeof(v) === 'string' ? v : v.errorLink).join(','),\r\n            url,\r\n          }\r\n          // console.log(data)\r\n          // return\r\n          LoadingModal({bl:true})\r\n          axios.post('/hcm/taobaoComplaint', data).then(res => {\r\n            LoadingModal({bl:false})\r\n            const { data, status, message } = res.data\r\n            if (status === '10000') {\r\n              // if (data.success && data.success !== false) {\r\n                // Msg.success((data.message && data.message) || message)\r\n                Msg.success(message)\r\n                this.props.form.resetFields()\r\n                this.setState({\r\n                  linkList: [],\r\n                  isVerifyLink: false,\r\n                  complaintReasonId: '',\r\n                  fileList: [],\r\n                })\r\n              // } else {\r\n              //   Msg.error(data.message && data.message)\r\n              // }\r\n            } else {\r\n              Msg.error(message)\r\n            }\r\n          }).catch(err => {\r\n            LoadingModal({bl:false})\r\n            this.catchError(err)\r\n          })\r\n        }\r\n      })\r\n    })\r\n\r\n  }\r\n  handleRadioChange = (key, e) => {\r\n    this.setState({\r\n      [key]: e.target.value\r\n    })\r\n    if (key === 'complaintPlatform') {\r\n      this.props.form.validateFields(['complaintAccount'], (err, values) => {\r\n        if (!err) {\r\n          this.getKnowledgeRightType(e.target.value)\r\n        }\r\n      })\r\n    }\r\n  }\r\n  handleSelect = (key, value) => {\r\n    if (key === 'knowledgeRightType') {\r\n      // 选择知识产权类型\r\n      this.props.form.resetFields(['knowledgeRightTypeDetail'])\r\n      this.getKnowledgeRightTypeDetail(value)\r\n      this.getComplaintReason(this.state.complaintPlatform, value)\r\n    } else if (key === 'complaintAccount') {\r\n      this.props.form.resetFields(['knowledgeRightType', 'knowledgeRightTypeDetail', 'reason'])\r\n      this.setState({\r\n        [key]: value\r\n      }, () => {\r\n        this.getKnowledgeRightType(this.state.complaintPlatform)\r\n      })\r\n    } else {\r\n      this.setState({\r\n        [key]: value\r\n      })\r\n    }\r\n  }\r\n  // 修改链接结束\r\n  handleLinkItemBlur = () => {\r\n    const list = this.state.linkList.slice()\r\n    this.setState({\r\n      current_link_item: -1,\r\n      linkList: Array.from(new Set(list))\r\n    })\r\n  }\r\n  // 修改链接\r\n  handleLinkItemChange = (index, e) => {\r\n    const value = e.target.value\r\n    const list = this.state.linkList.slice()\r\n    list[index] = value\r\n    this.setState({\r\n      linkList: list,\r\n      isVerifyLink: false,\r\n    })\r\n  }\r\n  // 选中要修改的链接\r\n  handleLinkItemEdit = index => {\r\n    this.setState({\r\n      current_link_item: index\r\n    })\r\n  }\r\n  // 删除选中的链接\r\n  handleLinkItemDelete = index => {\r\n    // console.log(index)\r\n    const list = this.state.linkList.slice()\r\n    list.splice(index, 1)\r\n    this.setState({\r\n      linkList: list,\r\n      isVerifyLink: false,\r\n    })\r\n  }\r\n  // 添加链接\r\n  handleLinkChange = e => {\r\n    const list = this.state.linkList.slice()\r\n    if (list.length < 300) {\r\n      this.setState({\r\n        link_textarea_value: e.target.value\r\n      })\r\n    } else {\r\n      Msg.warning('超出限制！')\r\n    }\r\n\r\n  }\r\n  // 添加链接结束\r\n  handleLinkBlur = e => {\r\n    // console.log(this._textarea)\r\n    const values = e.target.value.split('\\n')\r\n    const list = this.state.linkList.slice()\r\n    const arr = list.concat(values)\r\n\r\n    const value_set = new Set(arr.filter(v => v !== ''))\r\n    const list_value = Array.from(value_set)\r\n\r\n    this.setState({\r\n      linkList: [...list_value],\r\n      link_textarea_value: ''\r\n    })\r\n  }\r\n  render() {\r\n    return <Tpl that={this} />\r\n  }\r\n}\r\n\r\n// export default App\r\nexport default Form.create()(App)"],"sourceRoot":""}