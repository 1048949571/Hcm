{"version":3,"sources":["webpack:///./app/widget/index/Modify/ModifyPhone/main.js"],"names":["ModifyPhone","props","HistoryGo","window","history","go","DidMountText","BJBtn","setState","visible","confirmLoading","MEbtn","e","form","validateFields","err","values","pones","undefined","yzms","error","Trim","str","replace","ForgetSubmit","preventDefault","console","log","han","test","length","ajax","post","mobile","code","then","res","data","status","getAuthCode","forgetxs","state","yzm","seconds","codeType","usertype","match","params","type","siv","setInterval","shows","clearInterval","React","Component","create"],"mappings":"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","file":"js/chunk/315_c359f49283922d308ca1.js","sourcesContent":["import Tpl from './tpl';\r\nimport ajax from '../../../../js/common/ajax'\r\nimport { Form, message } from 'antd';\r\n\r\nclass ModifyPhone extends React.Component {\r\n    constructor(props) {\r\n        // document.title = '修改手机';\r\n        super(props)\r\n        this.state = {\r\n            yzm: \"获取验证码\",\r\n            forgetxs: false,//输入错误提示\r\n            shows: true,\r\n            seconds: 59//倒计时,\r\n\r\n        }\r\n\r\n\r\n    }\r\n    componentDidMount() {\r\n        this.DidMountText()\r\n    }\r\n    HistoryGo = () => {\r\n        window.history.go(-1)\r\n    }\r\n    DidMountText = () => {\r\n        // console.log(this.props.match.params.pone)\r\n        //console.log(this.props.match.params.type)\r\n    }\r\n    BJBtn = () => {\r\n        this.setState({\r\n            visible: true,\r\n            confirmLoading: true\r\n        })\r\n    }\r\n    MEbtn = (e) => {\r\n        this.props.form.validateFields((err, values) => {\r\n            if (values.pones != undefined && values.pones != \"\") {\r\n                if (values.yzms != undefined && values.yzms != \"\") {\r\n\r\n                } else {\r\n                    message.error(\"请输入验证码！\")\r\n                }\r\n            } else {\r\n                message.error(\"请输入手机号！\")\r\n            }\r\n        })\r\n    }\r\n    Trim = (str) => {\r\n\r\n        return str.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n    }\r\n    ForgetSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.props.form.validateFields((err, values) => {\r\n            console.log(values)\r\n            if (values.pones != undefined && values.pones != \"\") {\r\n                const han = /[\\u4E00-\\u9FA5]/i;\r\n                if (!han.test(values.pones)) {\r\n                    if (values.yzms != undefined && values.yzms != \"\") {\r\n                        if (this.Trim(values.pones).length >= 6 && this.Trim(values.pones).length <= 16) {\r\n                            ajax.post('/hcm/login/validateSMS', {\r\n                                mobile: values.pones,\r\n                                code: values.yzms\r\n                            }).then((res) => {\r\n                                console.log(res)\r\n                                if (res.data == true && res.status == 200) {\r\n                                    ajax.post('/hcm/user/updatemobile', {\r\n                                        mobile: values.pones\r\n                                    }).then((res) => {\r\n                                        console.log(res)\r\n    \r\n                                        window.history.go(-1)\r\n                                    })\r\n                                }\r\n    \r\n                            })\r\n                        }else{\r\n                            message.error(\"格式长度不对！\")\r\n                        }\r\n                    } else {\r\n                        // message.error(\"请输入验证码！\")\r\n                    }\r\n                }else{\r\n                    message.error(\"请输入正确格式！\")\r\n                }\r\n               \r\n            } else {\r\n                // message.error(\"请输入手机号！\")\r\n            }\r\n        })\r\n    }\r\n    getAuthCode = () => {\r\n        this.setState({\r\n            forgetxs: false\r\n        })\r\n\r\n        this.props.form.validateFields((err, values) => {\r\n            console.log(values)\r\n            // this.setState({\r\n            //     forgetxs:false\r\n            // })\r\n            if (values.pones != undefined && values.pones != \"\") {\r\n                const han = /[\\u4E00-\\u9FA5]/i;\r\n                if (!han.test(values.pones)) {\r\n                    if (this.state.yzm == \"获取验证码\") {\r\n\r\n                        if (this.state.seconds == 59) {\r\n\r\n                            ajax.post('/hcm/login/sendSMS', {\r\n                                mobile: values.pones,\r\n                                codeType: \"HCM_BIND\",\r\n                                usertype: this.props.match.params.type\r\n                            }).then((res) => {\r\n                                if (res.data.status == 10000) {\r\n                                    let siv = setInterval(() => {\r\n                                        this.setState({\r\n                                            yzm: `${this.state.seconds--}s后重新发送`,\r\n                                            shows: false,\r\n                                            forgetxs: false,\r\n                                            shows: false\r\n                                        }, () => {\r\n                                            if (this.state.seconds == 1) {\r\n                                                clearInterval(siv);\r\n                                                this.setState({\r\n                                                    yzm: \"获取验证码\",\r\n                                                    shows: true,\r\n                                                    seconds: 59\r\n                                                });\r\n                                            }\r\n                                        });\r\n                                    }, 1000)\r\n                                } else if (res.data.status == 400) {\r\n                                    this.setState({\r\n                                        forgetxs: true\r\n                                    })\r\n                                }\r\n                                console.log(res)\r\n                            })\r\n\r\n\r\n\r\n                        } else {\r\n\r\n                            ajax.post('/hcm/login/sendSMS', {\r\n                                mobile: values.pones,\r\n                                codeType: \"HCM_BIND\",\r\n                                usertype: this.props.match.params.type\r\n                            }).then((res) => {\r\n                                if (res.data.status == 10000) {\r\n                                    let siv = setInterval(() => {\r\n                                        this.setState({\r\n                                            yzm: `${this.state.seconds--}s后重新发送`,\r\n                                            shows: false,\r\n                                            forgetxs: false,\r\n                                            shows: false\r\n                                        }, () => {\r\n                                            if (this.state.seconds == 1) {\r\n                                                clearInterval(siv);\r\n                                                this.setState({\r\n                                                    yzm: \"获取验证码\",\r\n                                                    shows: true,\r\n                                                    seconds: 59\r\n                                                });\r\n                                            }\r\n                                        });\r\n                                    }, 1000)\r\n                                } else if (res.data.status == 400) {\r\n                                    this.setState({\r\n                                        forgetxs: true\r\n                                    })\r\n                                }\r\n                                console.log(res)\r\n                            })\r\n                        }\r\n\r\n\r\n                    }\r\n                } else {\r\n                    message.error(\"请输入正确格式！\")\r\n                }\r\n\r\n\r\n            } else {\r\n                message.error(\"请输入手机号！\")\r\n            }\r\n        })\r\n    }\r\n    render() {\r\n        return <Tpl that={this} />\r\n    }\r\n}\r\nexport default Form.create()(ModifyPhone)"],"sourceRoot":""}