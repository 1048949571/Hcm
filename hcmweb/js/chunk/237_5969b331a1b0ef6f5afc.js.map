{"version":3,"sources":["webpack:///./app/widget/index/Brand/ActivityReview/main.js"],"names":["App","props","getinfo","Identity","state","localStorage","getItem","setState","handleClearIconClick","form","resetFields","fieldName","handleTabChange","getActivityList","url","data","type","activeKey","pageNo","pageSize","pagination","searchCondition","ping_id","currentTabIndex","getActivityNums","params","axios","post","then","res","status","message","statusNums","catch","postFn","cacheActivityList","Object","assign","content","pageNumber","totalElements","Promise","resolve","reject","method","console","log","err","getPlatformList","dictcode","dictType","platformList","goToDetail","history","push","pathname","path","handleFormSubmit","e","preventDefault","validateFields","values","campaign_name","dealer_name","shop_name","time","start_time","length","format","end_time","handlePageChange","page","React","Component","create"],"mappings":"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","file":"js/chunk/237_5969b331a1b0ef6f5afc.js","sourcesContent":["// 品牌活动审查\r\nimport Tpl from './tpl'\r\nimport { Form } from 'antd'\r\nimport axios from '../../../../js/common/ajax'\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      platformList: [],\r\n      cacheActivityList: {},\r\n      currentTabIndex: \"1\",\r\n      pagination: {\r\n        pageNo: 1,\r\n        pageSize: 10\r\n      },\r\n      statusNums: {},\r\n      searchCondition: {},\r\n      Identity:''\r\n    }\r\n  }\r\n  componentDidMount(){\r\n      this.getinfo()\r\n  }\r\n  //获取用户身份信息\r\n  getinfo = () =>{\r\n    let {Identity} = this.state;\r\n    Identity = localStorage.getItem(\"logintype\")\r\n    this.setState({Identity})\r\n}\r\n  componentWillMount() {\r\n    this.getPlatformList('platform')\r\n    this.getActivityNums()\r\n    this.getActivityList({\r\n      url: '/hcm/campgign/List',\r\n      data: {\r\n        type: this.state.currentTabIndex,\r\n        ...this.state.pagination\r\n      }\r\n    })\r\n  }\r\n  handleClearIconClick = fieldName => {\r\n    // console.log(fieldName, this.props)\r\n    this.props.form.resetFields([fieldName])\r\n  }\r\n  // tab导航切换\r\n  handleTabChange = activeKey => {\r\n    this.getActivityList({\r\n      url: '/hcm/campgign/List',\r\n      data: {\r\n        type: activeKey,\r\n        pageNo: 1,\r\n        pageSize: this.state.pagination.pageSize,\r\n        ...this.state.searchCondition,\r\n        ping_id: this.state.searchCondition.ping_id === 'all' ? '' : this.state.searchCondition.ping_id\r\n      }\r\n    })\r\n    this.setState({\r\n      currentTabIndex: activeKey\r\n    })\r\n  }\r\n  // 查询每个状态对应的数量\r\n  getActivityNums = (params = {}) => {\r\n    axios.post('/hcm/campgign/ListCount', {...params}).then(res => {\r\n      const { data, status, message } = res.data\r\n      this.setState({\r\n        statusNums: data\r\n      })\r\n    }).catch(err => {\r\n\r\n    })\r\n  }\r\n  // 获取活动列表\r\n  getActivityList = params => {\r\n    this.postFn(params).then(res => {\r\n      this.setState({\r\n        cacheActivityList: Object.assign({}, this.state.cacheActivityList, {\r\n          [this.state.currentTabIndex]: res.content\r\n        }),\r\n        pagination: Object.assign({}, this.state.pagination, {\r\n          pageNo: res.pageNumber,\r\n          pageSize: res.pageSize,\r\n          totalElements: res.totalElements,\r\n          // totalPages: res.totalPages\r\n        })\r\n      })\r\n    }).catch()\r\n  }\r\n  // post请求\r\n  postFn = params => {\r\n    return new Promise((resolve, reject) => {\r\n      axios({\r\n        method: 'post',\r\n        url: params.url,\r\n        data: params.data || {}\r\n      }).then(res => {\r\n          console.log(res)\r\n        const { data, status, message } = res.data\r\n        if (status === '10000') {\r\n          resolve(data)\r\n        } else {\r\n          reject({message})\r\n        }\r\n      }).catch(err => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n  // 查询平台字典\r\n  getPlatformList = dictType => {\r\n    axios({\r\n      method: 'post',\r\n      url: '/hcm/sys/GetList',\r\n      data: {\r\n        dictcode:dictType\r\n      }\r\n    }).then(res => {\r\n      const { data, status, message } = res.data\r\n      this.setState({\r\n        platformList: data\r\n      })\r\n    }).catch(err => {\r\n\r\n    })\r\n  }\r\n  goToDetail = path => {\r\n    this.props.history.push({\r\n      pathname: path\r\n    })\r\n  }\r\n  handleFormSubmit = e => {\r\n    e.preventDefault()\r\n    this.props.form.validateFields((err, values) => {\r\n      // console.log(values)\r\n      const {\r\n        campaign_name,\r\n        dealer_name,\r\n        ping_id,\r\n        shop_name,\r\n        time\r\n      } = values\r\n      // console.log(time)\r\n      const start_time = time.length === 0 ? '' : time[0].format('YYYY-MM-DD HH:mm:ss')\r\n      const end_time = time.length === 0 ? '' : time[1].format('YYYY-MM-DD HH:mm:ss')\r\n      this.getActivityList({\r\n        url: '/hcm/campgign/List',\r\n        data: {\r\n          type: \"1\",\r\n          pageNo: 1,\r\n          pageSize: this.state.pagination.pageSize,\r\n          campaign_name,\r\n          dealer_name,\r\n          ping_id: ping_id === 'all' ? '' : ping_id,\r\n          shop_name,\r\n          start_time: start_time,\r\n          end_time: end_time\r\n        }\r\n      })\r\n      this.getActivityNums({\r\n        campaign_name,\r\n        shop_name,\r\n        dealer_name,\r\n        ping_id: ping_id === 'all' ? '' : ping_id,\r\n        start_time: start_time,\r\n        end_time: end_time\r\n      })\r\n      this.setState({\r\n        searchCondition: Object.assign({}, this.state.searchCondition, {\r\n          campaign_name,\r\n          dealer_name,\r\n          ping_id,\r\n          shop_name,\r\n          start_time,\r\n          end_time,\r\n        }),\r\n        currentTabIndex: '1'\r\n      })\r\n    })\r\n  }\r\n  handlePageChange = (page, pageSize) => {\r\n    const { searchCondition } = this.state\r\n    this.getActivityList({\r\n      url: '/hcm/campgign/List',\r\n      data: {\r\n        type: this.state.currentTabIndex,\r\n        pageNo: page,\r\n        pageSize,\r\n        ...searchCondition,\r\n        ping_id: searchCondition.ping_id === 'all' ? '' : searchCondition.ping_id\r\n      }\r\n    })\r\n  }\r\n  render() {\r\n    return <Tpl that={this} />\r\n  }\r\n}\r\n\r\nexport default Form.create()(App)"],"sourceRoot":""}