{"version":3,"sources":["webpack:///./app/widget/index/MonitorDataAnalysis/main.js"],"names":["App","props","getMonitorDetail","state","id","createtime","axios","post","moment","parseInt","format","then","res","data","status","message","setState","detail","getList","platform_code","low_pagination","sale_pagination","error","catch","url","platform","key","pagination","pageKey","start_time","end_time","keyword_id","pageSize","pageNo","LoadingModal","bl","content","Object","assign","pageNumber","totalElements","handleDateChange","dates","datestrings","length","pageChange","page","match","params","productId","optionId","subtract","lowPriceList","salesRankList","React","Component"],"mappings":"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","file":"js/chunk/316_e51d015c60385a206b1d.js","sourcesContent":["import Tpl from './tpl'\r\nimport axios from '../../../js/common/ajax'\r\n\r\nimport { message as Msg } from 'antd'\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      id: props.match.params.productId,\r\n      createtime: props.match.params.optionId,\r\n      detail: {},\r\n      start_time: moment().subtract(90, 'd'),\r\n      end_time: moment(),\r\n      low_pagination: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n      },\r\n      sale_pagination: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n      },\r\n      lowPriceList: [],\r\n      salesRankList: [],\r\n    }\r\n  }\r\n  componentWillMount() {\r\n    this.getMonitorDetail()\r\n  }\r\n  getMonitorDetail = () => {\r\n    const { id, createtime } = this.state\r\n    axios.post('/hcm/keyword_monitor/obj', {\r\n      id,\r\n      createtime: moment(parseInt(createtime, 10)).format('YYYY-MM-DD HH:mm:ss'),\r\n    }).then(res => {\r\n      const { data, status, message } = res.data\r\n      if (status === '10000') {\r\n        // console.log(data)\r\n        this.setState({\r\n          detail: data\r\n        })\r\n        this.getList('/hcm/keyword_monitor/low_sort', data.platform_code, 'lowPriceList', this.state.low_pagination, 'low_pagination')\r\n        this.getList('/hcm/keyword_monitor/sale_sort', data.platform_code, 'salesRankList', this.state.sale_pagination, 'sale_pagination')\r\n      } else {\r\n        Msg.error(message)\r\n      }\r\n    }).catch(err => {\r\n      Msg.error('系统繁忙，请稍后再试！')\r\n    })\r\n  }\r\n  // 获取低价次数排行榜\r\n  getList = (url, platform, key, pagination, pageKey) => {\r\n    const { start_time, end_time, id } = this.state\r\n    const data = {\r\n      platform_code: platform,\r\n      keyword_id: id,\r\n      start_time: start_time.format('YYYY-MM-DD HH:mm:ss'),\r\n      end_time: end_time.format('YYYY-MM-DD HH:mm:ss'),\r\n      pageSize: pagination.pageSize,\r\n      pageNo: pagination.pageNo,\r\n    }\r\n    LoadingModal({bl:true})\r\n    axios.post(url, data).then(res => {\r\n      LoadingModal({bl:false})\r\n      const { data, status, message } = res.data\r\n      if (status === '10000') {\r\n        // console.log(data)\r\n        this.setState({\r\n          [key]: data.content,\r\n          [pageKey]: Object.assign({}, this.state[pageKey], {\r\n            pageNo: data.pageNumber,\r\n            pageSize: data.pageSize,\r\n            totalElements: data.totalElements,\r\n          })\r\n        })\r\n      } else {\r\n        Msg.error(message)\r\n      }\r\n    }).catch(err => {\r\n      LoadingModal({bl:false})\r\n      Msg.error('系统繁忙，请稍后再试！')\r\n    })\r\n  }\r\n  handleDateChange = (dates, datestrings) => {\r\n    // console.log(dates, datestrings)\r\n    if (!dates.length) {\r\n      return\r\n    }\r\n    this.setState({\r\n      start_time: dates[0],\r\n      end_time: dates[1],\r\n    }, () => {\r\n      this.getList('/hcm/keyword_monitor/low_sort', this.state.detail.platform_code, 'lowPriceList', this.state.low_pagination, 'low_pagination')\r\n      this.getList('/hcm/keyword_monitor/sale_sort', this.state.detail.platform_code, 'salesRankList', this.state.sale_pagination, 'sale_pagination')\r\n    })\r\n  }\r\n  pageChange = (url, platform, key, pagination, pageKey, page) => {\r\n    this.setState({\r\n      pagination: Object.assign({}, this.state.pagination, {\r\n        pageNo: page,\r\n      })\r\n    }, () => {\r\n      this.getList(url, platform, key, pagination, pageKey)\r\n    })\r\n  }\r\n  // salesRankPageChange = page => {\r\n  //   this.setState({\r\n  //     pagination: Object.assign({}, this.state.pagination, {\r\n  //       pageNo: page,\r\n  //     })\r\n  //   }, () => {\r\n  //     this.getList('/hcm/keyword_monitor/sale_sort', this.state.detail.platform, 'salesRankList')\r\n  //   })\r\n  // }\r\n  // lowPricePageChange = page => {\r\n  //   this.setState({\r\n  //     pagination: Object.assign({}, this.state.pagination, {\r\n  //       pageNo: page,\r\n  //     })\r\n  //   }, () => {\r\n  //     this.getList('/hcm/keyword_monitor/low_sort', this.state.detail.platform, 'lowPriceList')\r\n  //   })\r\n  // }\r\n  render() {\r\n    return <Tpl that={this} />\r\n  }\r\n}\r\n\r\nexport default App"],"sourceRoot":""}