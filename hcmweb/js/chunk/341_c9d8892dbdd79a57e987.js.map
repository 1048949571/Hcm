{"version":3,"sources":["webpack:///./app/widget/index/Shop/DataDetails/main.js"],"names":["mapStateToProps","state","ownProps","console","log","collapsed","DataPresentation","props","shopDataDayReportPageList","daydate","ajax","post","then","res","data","status","length","sum","money","i","buy_num","trade_money","setState","link_shopDataReport","SUM","toFixed","error","message","yesButton","LoadingModal","bl","submit_money","success","setTimeout","window","location","catch","columns","title","width","dataIndex","render","content","record","index","shopDataReportSubmit","stateError","match","params","React","Component","create"],"mappings":"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","file":"js/chunk/341_c9d8892dbdd79a57e987.js","sourcesContent":["import Tpl from './tpl';\r\nimport ajax from '../../../../js/common/ajax'\r\nimport { Form, message } from 'antd';\r\nimport { bindActionCreators } from 'redux';\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    console.log(state)\r\n    return {\r\n        collapsed: state.collapsed\r\n    }\r\n}\r\n\r\nclass DataPresentation extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        const columns = [{\r\n            title: '序号',\r\n            width: \"100px\",\r\n            dataIndex: 'entity_owner_name',\r\n            render: (content, record, index) => (\r\n                <span key={index}>\r\n                    {index + 1}\r\n                </span>\r\n            )\r\n        }, {\r\n            title: '商品',\r\n            dataIndex: 'itemtitle',\r\n            width: \"40%\"\r\n        }, {\r\n            title: '销量（件）',\r\n            width: \"200px\",\r\n            dataIndex: \"buy_num\"\r\n\r\n        }, {\r\n            title: '销售金额（元）',\r\n            width: \"200px\",\r\n            render: (content, record, index) => (\r\n                <span key={index}>\r\n                    {record.trade_money}\r\n                </span>\r\n            )\r\n        }]\r\n        this.state = {\r\n            shopDataReportSubmit: columns,\r\n            link_shopDataReport: [],\r\n            daydate: \"\",\r\n            SUM:0,\r\n            trade_money:0,\r\n            stateError:false\r\n        }\r\n\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({\r\n            daydate: this.props.match.params.daydate\r\n        }, () => {\r\n            this.shopDataDayReportPageList(this.state.daydate)\r\n        })\r\n    }\r\n    shopDataDayReportPageList = (daydate) => {\r\n        ajax.post(\"/hcm/dayReport/shopDataDayReportDetailList\", {\r\n            daydate: daydate\r\n        }).then((res) => {\r\n            console.log(res)\r\n            if (res.data.status == 10000) {\r\n\r\n                if (res.data.data.length) {\r\n                    var sum = 0;\r\n                    var money=0;\r\n                    for (var i = 0; i < res.data.data.length; i++) {\r\n                        sum = sum + res.data.data[i].buy_num\r\n                        money=money+res.data.data[i].trade_money\r\n                    }\r\n                    this.setState({\r\n                        link_shopDataReport: res.data.data,\r\n                        SUM:sum,\r\n                        trade_money:money.toFixed(2)\r\n                    })\r\n                   \r\n                }\r\n\r\n            } else {\r\n\r\n                message.error(res.data.message)\r\n            }\r\n        })\r\n    }\r\n    yesButton=()=>{\r\n        LoadingModal({ bl: true })\r\n        ajax.post(\"/hcm/dayReport/shopDataReportSubmit\", {\r\n            buy_num:this.state.SUM,\r\n            submit_money:this.state.trade_money,//    总额\r\n            daydate:this.state.daydate     //日期\r\n        }).then((res) => {\r\n\r\n            if (res.data.status == 10000) {\r\n\r\n                message.success(\"提报成功\")\r\n                    setTimeout(()=>{\r\n                        window.location = \"/index.html#/DataPresentation\" \r\n                    },2000)\r\n            } else {\r\n               \r\n                message.error(\"提报失败\")\r\n                setTimeout(()=>{\r\n                    window.location = \"/index.html#/DataPresentation\" \r\n                },2000)\r\n            }\r\n            LoadingModal({ bl: false })\r\n        }).catch(()=>{\r\n            LoadingModal({ bl: false })\r\n            setTimeout(()=>{\r\n                window.location = \"/index.html#/DataPresentation\" \r\n            },2000)\r\n        })\r\n    }\r\n    render() {\r\n        return <Tpl that={this} />\r\n    }\r\n}\r\nexport default Form.create()(DataPresentation)"],"sourceRoot":""}